window.__require=function t(e,i,n){function o(a,c){if(!i[a]){if(!e[a]){var r=a.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+a+"'")}}var h=i[a]={exports:{}};e[a][0].call(h.exports,function(t){return o(e[a][1][t]||t)},h,h.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({ArrayCovert:[function(t,e,i){"use strict";cc._RF.push(e,"78761bxkBxEgJtB69ye8Tm7","ArrayCovert");var n=Array.prototype;n.clear=function(){this.splice(0,this.length)},n.clone=function(){return this.slice()},n.getRandomItems=function(t){for(var e=[],i=this.clone(),n=0;n<t;++n){var o=Math.getRandomInt(0,this.length);e.push(i.removeAt(o))}return e},n.getRandomOne=function(){return this[Math.getRandomInt(0,this.length)]},n.add=function(t){return this.push(t)},n.addRange=function(t){return this.concat(t)},n.insert=function(t,e){this.splice(t,0,e)},n.removeAt=function(t){return this.splice(t,1)},n.remove=function(t){var e=this.indexOf(t);if(e>-1)return this.removeAt(e)},n.removeRange=function(t,e){return this.splice(t,e)},n.removeAll=function(t){for(var e=this.filter(t),i=0;i<e.length;i++)this.remove(e[i])},n.concatSelf=function(t){this.push.apply(this,t)},n.distinct=function(){return[].concat(function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(Set(this)))},cc._RF.pop()},{}],AudioMng:[function(t,e,i){"use strict";cc._RF.push(e,"ff97cWKF7JGbZTlvxZpL9mr","AudioMng");var n="stop",o="setVolume",s="setLoop";window.AudioOpObjType={All:0,Effect:1,Music:2};var a=cc.Class({name:"audioObj",properties:{key:"NotName",value:{type:cc.Asset,default:null}}});cc.Class({extends:MngBase,properties:{effectResArray:{default:[],type:[a]},musicResArray:{default:[],type:[a]}},onLoad:function(){void 0===window.AudioMng&&(window.AudioMng=this),this.effectIDPool=new Map,this.musicIDPool=new Map,this.effectResMap=new Map,this.musicResMap=new Map,this.objArrayConvertMay(this.effectResArray,this.effectResMap),this.objArrayConvertMay(this.musicResArray,this.musicResMap),this.checkLocalSetting()},start:function(){},onDestroy:function(){},checkLocalSetting:function(){},play:function(t,e,i,n,o){var s=!0,a=FileUtils.Instant.getSoundByName(e);if(a){e=a.name;var c=this.getIDPoolByType(t);if(i>0){var r=0;c.forEach(function(t){t.name==e&&++r}),s=r<i}if(s){var l=cc.audioEngine.play(a,n,o);c.set(l,{name:e,volume:o,loop:n}),n||cc.audioEngine.setFinishCallback(l,function(){c.delete(l)})}}},playEffect:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments[3];if(GameDataHandler.Instant.effectState){var n=FileUtils.Instant.getSoundByName(t);Math.isNumberNoNan(i)&&cc.audioEngine.setEffectsVolume(GameDataHandler.Instant.effectState*i),cc.audioEngine.playEffect(n,e)}},playMusic:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];if(GameDataHandler.Instant.musicState){cc.audioEngine.setMusicVolume();var n=FileUtils.Instant.getSoundByName(t);Math.isNumberNoNan(i)&&cc.audioEngine.setMusicVolume(GameDataHandler.Instant.effectState*i),cc.audioEngine.playMusic(n,e)}},playEffect2:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;GameDataHandler.Instant.effectState&&this.play(AudioOpObjType.Effect,t,e,i,n)},playMusic2:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;GameDataHandler.Instant.musicState&&this.play(AudioOpObjType.Music,t,e,i,n)},getIDPoolByType:function(t){switch(t){case AudioOpObjType.Music:return this.musicIDPool;case AudioOpObjType.Effect:return this.effectIDPool;default:return null}},getResMayByType:function(t){switch(t){case AudioOpObjType.Music:return this.musicResMap;case AudioOpObjType.Effect:return this.effectResMap;default:return null}},getCurMusic:function(){return this.getIDPoolByType(AudioOpObjType.Music)},stopAllMusic:function(){cc.audioEngine.stopMusic()},stopAllEffect:function(){cc.audioEngine.stopAllEffects()},pauseAll:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:AudioOpObjType.Effect){case AudioOpObjType.Effect:cc.audioEngine.pauseAllEffects();break;case AudioOpObjType.Music:cc.audioEngine.pauseMusic();break;case AudioOpObjType.All:cc.audioEngine.pauseAll()}},resumeAll:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:AudioOpObjType.Effect){case AudioOpObjType.Effect:cc.audioEngine.resumeAllEffects();break;case AudioOpObjType.Music:cc.audioEngine.resumeMusic();break;case AudioOpObjType.All:cc.audioEngine.resumeAll()}},stopAll:function(){var t=this;switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:AudioOpObjType.Effect){case AudioOpObjType.Effect:this.effectIDPool.forEach(function(e,i){t.opAudioID({objType:AudioOpObjType.Effect,audioID:i,opType:n})});break;case AudioOpObjType.Music:this.musicIDPool.forEach(function(e,i){t.opAudioID({objType:AudioOpObjType.Music,audioID:i,opType:n})});break;case AudioOpObjType.All:cc.audioEngine.stopAll(),this.musicIDPool.clear(),this.effectIDPool.clear()}},opAudioID:function(t){if(void 0!==t&&void 0!==t.audioID){var e=this.getIDPoolByType(t.objType);if(e){var i=e.get(t.audioID);if(void 0===i)return;switch(t.opType){case o:t.volume&&i.volume!=t.volume&&(cc.audioEngine.setVolume(t.audioID,t.volume),i.volume=t.volume);break;case s:t.loop&&i.loop!=t.loop&&(cc.audioEngine.setLoop(t.audioID,t.loop),i.loop=t.loop);break;default:cc.audioEngine[t.opType](t.audioID),t.opType==n&&e.delete(t.audioID)}}}}}),cc._RF.pop()},{}],Bg:[function(t,e,i){"use strict";cc._RF.push(e,"c617cbGBMtHp5hii0R7UBQG","Bg"),cc.Class({extends:cc.Component,properties:{bg1:cc.Node,particle:cc.ParticleSystem},onLoad:function(){},start:function(){this.init()},init:function(){},updateState:function(t){switch(t){case NodeType.START:this.showStartBg();break;case NodeType.PLAY:this.showGameBg()}},showStartBg:function(){},showGameBg:function(){}}),cc._RF.pop()},{}],BubbleBase:[function(t,e,i){"use strict";cc._RF.push(e,"86452oqI6NOvZftTvAS2kwp","BubbleBase");var n=t("PoolNodeBase"),o=GameDataHandler.Instant,s=MissionDataHandler.Instant;cc.Class({extends:n,properties:{icon:cc.Sprite},start:function(){},setType:function(t){this.bubbleType=t,this.icon.spriteFrame=FileUtils.Instant.getTextureByName(o.getTextureNameByType(t)),this.removeCf=null},setIndex:function(t,e){this.row=t,this.col=e,this.node.position=s.getPosByRowAndCol(t,e)},tagAround:function(){this.row&&(s.aroundList.forEach(function(t){t.scale=1}),s.aroundList=s.getAroundBubble(this.row,this.col),this.aroundList=s.aroundList,this.aroundList.forEach(function(t){t.scale=.8})),console.log("row "+this.row+"  col"+this.col)},unTagAround:function(){this.aroundList&&(this.aroundList.forEach(function(t){t.scale=1}),this.aroundList=null)},remove:function(){n.prototype.remove.call(this),this.removeCf&&this.removeCf(this.node.position)}}),cc._RF.pop()},{PoolNodeBase:"PoolNodeBase"}],ButtonCustom:[function(t,e,i){"use strict";cc._RF.push(e,"6306awcL/RGo46XQnCdb3CK","ButtonCustom"),cc.Class({extends:cc.Button,editor:!1,properties:{zoomScale:{override:!0,default:1.1},playSFX:{default:!1,displayName:"\u64ad\u653e\u97f3\u6548"},sfxUrl:{default:"btnEffect",displayName:"\u97f3\u6548\u540d\u79f0"}},_onTouchBegan:function(t){this.interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState(),t.stopPropagation(),this.playSFX&&AudioMng.playEffect(this.sfxUrl))},start:function(){}}),cc._RF.pop()},{}],CCConvert:[function(t,e,i){"use strict";cc._RF.push(e,"5e948aWEg1MArAK053073Lt","CCConvert"),cc.Node.prototype.pauseSelf=function(){this.getNumberOfRunningActions()>0&&this.pauseAllActions();var t=this.getComponent(cc.Animation);t&&t.pause(),this.pauseSystemEvents(!0)},cc.Node.prototype.resumeSelf=function(){this.getNumberOfRunningActions()>0&&this.resumeAllActions();var t=this.getComponent(cc.Animation);t&&t.resume(),this.resumeSystemEvents(!0)},cc._RF.pop()},{}],Collection:[function(t,e,i){"use strict";cc._RF.push(e,"9f8caXMMxVNqLsMN0aoTZDW","Collection");var n=t("NodeBase"),o=t("sdk"),s=o.game_id+"Collection";cc.Class({extends:n,properties:{hand:cc.Node,explainBox:t("PopLayerBase"),rewardBox:t("PopLayerBase"),shortcutBtn:t("ShortcutBtn")},onLoad:function(){this._signName="v4",this.state=this.getData(s,-1),window.Collection=this,this.hasShowed=!1},start:function(){var t=this;this.node.opacity=0,this.node.zIndex=11111,NotificationCenter.Instant.register(NotificationMsg.POP_SHOW,this,function(){setTimeout(function(){-1===t.state?!t.hasShowed&&-1===GameMng.nodeTypeList.indexOf(NodeType.PLAY)&&o.shortcut_threshold&&GameDataHandler.Instant.bestScore>parseInt(o.shortcut_threshold)?window.__isQQ||(t.show(),t.shortcutBtn.show()):(t.hide(),t.shortcutBtn.hide()):2===t.state?t.node.removeFromParent():t.state},1e3)})},onDestroy:function(){o.offShow("onShowCollection"),NotificationCenter.Instant.removeRegister(this)},show:function(){this.node.active=!0,this.node.opacity=255,this._dtime=.4},hide:function(){this.node.active=!1},getData:function(t,e){var i=this._signName+t,n=void 0;return GameDataHandler.Instant._localData.collection&&GameDataHandler.Instant._localData.collection.value&&GameDataHandler.Instant._localData.collection.key===i?n=GameDataHandler.Instant._localData.collection.value:(this.setData(t,e),n=e),n},setData:function(t,e){var i=this._signName+t;GameDataHandler.Instant._localData.collection={},GameDataHandler.Instant._localData.collection.key=i,GameDataHandler.Instant._localData.collection.value=e,GameDataHandler.Instant.saveData()},showRewardBox:function(){var t=this;this.shortcut_coins=o.shortcut_coins?parseInt(o.shortcut_coins):0,console.log("showRewardBox ",this.shortcut_coins),this.shortcut_coins>0&&(this.scheduleOnce(function(){t.rewardBox.show()},.5),this.explainBox.close())},hideRewardBox:function(){this.rewardBox.close()},showExplainBox:function(){if(this.shortcut_coins=o.shortcut_coins?parseInt(o.shortcut_coins):0,this.shortcut_coins>0&&!this.hasShowed){this.hasShowed=!0;var t=.5*Constant.visibleSize.height+(o.isIphoneX()?-137:-97);this.hand.position=cc.v2(144,t),this.hand.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.7,cc.v2(89,t-55)),cc.moveTo(.7,cc.v2(144,t))))),this.explainBox.show()}},hideExplainBox:function(){this.explainBox.close()},clickGetRe:function(){this.state=2,this.setData(s,this.state),GameMng.playLy&&GameMng.playLy.node.active?(GameMng.playLy.updateProp(GainPos.Magic,2),GameMng.playLy.updateProp(GainPos.Double,2),GameMng.playLy.updateProp(GainPos.Laser,2)):(GameDataHandler.Instant.updatePropNum(GainPos.Magic,2),GameDataHandler.Instant.updatePropNum(GainPos.Double,2),GameDataHandler.Instant.updatePropNum(GainPos.Laser,2),ToastMng.showToast("\u606d\u559c\u83b7\u5f972\u679a\u6d88\u53cc\u884c\u9053\u5177\u30012\u679a\u9b54\u6cd5\u7403\u9053\u5177\u53ca2\u679a\u6fc0\u5149\u70ae",2)),this.hideRewardBox()},clickCloseEx:function(){this.hideExplainBox()},clickBtn:function(){this.shortcutBtn.hide(),this.showExplainBox()}}),cc._RF.pop()},{NodeBase:"NodeBase",PopLayerBase:"PopLayerBase",ShortcutBtn:"ShortcutBtn",sdk:"sdk"}],CollisionUtils:[function(t,e,i){"use strict";cc._RF.push(e,"c8656WX9jJN1q9xLtslTc+C","CollisionUtils"),cc._RF.pop()},{}],CommonNode:[function(t,e,i){"use strict";cc._RF.push(e,"56492CmC+RFd4WgqWMedUhi","CommonNode");var n=cc.Class({extends:cc.Component,statics:{Instant:null},properties:{switchLayer:t("SwitchNode")},onLoad:function(){n.Instant=this},start:function(){},loadScene:function(t,e,i){var n;(n=this.switchLayer).loadScene.apply(n,arguments)}});window.CommonNode=e.exports=n,cc._RF.pop()},{SwitchNode:"SwitchNode"}],Common:[function(t,e,i){"use strict";cc._RF.push(e,"c2d209qMMlD77NG0XLFVRE/","Common"),window.isTest=!1,window.logTest=isTest?console.log:function(){};var n=new Map;window.logTime=function(t){if(IsWx){var e=IsWx?wx.getPerformance().now():(new Date).getTime();n.set(t,e)}},window.logTimeEnd=function(t){if(IsWx){var e=n.get(t);if(e){var i=IsWx?wx.getPerformance().now():(new Date).getTime();logTest(t+":"+(i-e)+(IsWx?"\u5fae\u79d2":"\u6beb\u79d2"))}}},window.Common={getTargetPos:function(t,e,i){var n=e.convertToWorldSpaceAR(t);return i.convertToNodeSpaceAR(n)},getNodePos:function(t,e){var i=t.parent.convertToWorldSpaceAR(t.position);return e.convertToNodeSpaceAR(i)},showToast:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:cc.size(50,50),arguments.length>2&&void 0!==arguments[2]?arguments[2]:cc.Color.YELLOW;var e=cc.instantiate(ToastMng.toastList[0]);cc.find("Canvas").addChild(e),e.name="mainToast",e.getComponent("ToastBase").showToast(t)},getLocalData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=LocalStorageUtils.Instant.getData(t);return!i&&e&&(i=e,this.setLocalData(t,e)),i},setLocalData:function(t,e){logTest("setLocalData ",t,e),LocalStorageUtils.Instant.setData(t,e)},loadImage:function(t,e,i){var n=t.getComponent(cc.Sprite)||t;if("undefined"!=typeof wx){var o=e+"?a=a.png",s=wx.createImage();s.onload=function(){var t=new cc.Texture2D;t.initWithElement(s),t.handleLoadedTexture(),n.spriteFrame=new cc.SpriteFrame(t),i&&i()},s.src=o}},generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&i]+t[i>>8&255]+"-"+t[i>>16&15|64]+t[i>>24&255]+"-"+t[63&n|128]+t[n>>8&255]+"-"+t[n>>16&255]+t[n>>24&255]+t[255&o]+t[o>>8&255]+t[o>>16&255]+t[o>>24&255]).toUpperCase()}}(),getSimpleUrl:function(t){return t.split("/").pop()},getInterval:function(t,e){return e=void 0==e?(new Date).getTime():e,Math.abs(t-e)/864e5},getIntervalDays:function(t,e){var i=new Date(t).toDateString(),n=new Date(e).toDateString(),o=new Date(i).getTime();return(new Date(n).getTime()-o)/864e5},extendProperties:function(t,e){for(var i in e)t[i]=e[i]},deepCopy:function(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i]instanceof Array?e[i]=this.deepCopy(t[i]):e[i]=t[i];return e},createBySpriteFrame:function(t){var e=(new cc.Node).addComponent(cc.Sprite);return e.spriteFrame=t,e},getRandControl2:function(t){logTest("chance ",t);var e=!0;if(t<=0)e=!1;else if(t<1){var i=(t+"").split("."),n=i[1].length,o=parseInt(i[1]),s=Math.pow(10,n);logTest("getRandControl"+s),e=this.getRand({max:s,min:0})<o}return e},getRand2:function(t){var e=t.max-t.min,i=Math.getRandomInt()%e;return t.min+i},getRandShareStr:function(t){var e=Constant.shareStr[t],i=void 0;if(e){var n=e.length;n>0&&(i=e[Math.getRandomInt()%n])}return i||"NotTitle"},swingAc:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;void 0!==e&&(t.rotation=e),t.runAction(cc.repeatForever(cc.sequence(cc.delayTime(n),cc.rotateTo(.07,-i),cc.rotateTo(.07,i),cc.rotateTo(.07,-i),cc.rotateTo(.07,i),cc.rotateTo(.07,-i),cc.rotateTo(.07,i),cc.rotateTo(.07,0))))},vibrate:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];GameDataHandler.Instant.canShake&&"undefined"!=typeof wx&&(t?wx.vibrateLong(function(){logTest("wx.vibrateLong() = success")},function(){logTest("wx.vibrateLong() = fail")},function(){logTest("wx.vibrateLong() = complete")}):wx.vibrateShort(function(){console.log("wx.vibrateShort() = success")},function(){console.log("wx.vibrateShort() = fail")},function(){console.log("wx.vibrateShort() = complete")}))}},cc._RF.pop()},{}],Constant:[function(t,e,i){"use strict";cc._RF.push(e,"2b526WtCHVJd5FDMWEzHnt3","Constant"),window.Constant={shareIconPath:"other/share.png",rankTitleList:["\u521d\u5b66\u5f1f\u5b50","\u6c5f\u6e56\u65b0\u79c0","\u6c34\u679c\u5fcd\u8005","\u6c5f\u6e56\u8c6a\u4fa0","\u4e00\u6d3e\u638c\u95e8","\u4e00\u4ee3\u5b97\u5e08","\u795e\u96d5\u5927\u4fa0","\u6b66\u6797\u76df\u4e3b","\u72ec\u5b64\u6c42\u8d25"],MAX_ROWS:15,MAX_COLS:11,LIST_START_ROW:2,BUBBLE_RADIUS:31.4,READY_BUBBLE_POS:cc.v2(0,-351),BUBBLE_SPEED:38,BORDER_XD:14,TOP_BAR_H:164,ReadyBubbleScale:1.1,WaitBubbleScale:.8,EndDate:"Sat Mar 28 2020 02:26:51 GMT+0800",shareStr:{propShare:["\u5feb\u6765\u4e00\u8d77\u73a9\u5f00\u5fc3\u6ce1\u6ce1\u9f99\u5427!"],scoreShare:["\u5feb\u6765\u4e00\u8d77\u73a9\u5f00\u5fc3\u6ce1\u6ce1\u9f99\u5427!"],otherShare:["\u5feb\u6765\u4e00\u8d77\u73a9\u5f00\u5fc3\u6ce1\u6ce1\u9f99\u5427!"]},visibleSize:cc.size(720,1280),visibleScale:{wScale:1,hScale:1}},e.exports=Constant,cc._RF.pop()},{}],DataHandler:[function(t,e,i){"use strict";cc._RF.push(e,"9196fcm5W1I1KvLRaV7knLh","DataHandler");var n=t("LocalStorageUtils");cc.Class({extends:t("Singleton"),properties:{_configRelativeURL:null,_jsonConfigRelativeURL:null,_configTableURL:null,_config:null,_localData:null},loadJsonConfig:function(){if(null!=this._jsonConfigRelativeURL){var t=FileUtils.Instant.getConfigByName(this._jsonConfigRelativeURL);this.onLoadConfig(t.json)}else this.onLoadConfig(null)},loadConfig:function(){if(null!=this._configRelativeURL){var e=t(this._configRelativeURL);this.onLoadConfig(e)}else this.onLoadConfig(null)},onLoadConfig:function(t){this._config=t,this._config&&this._config.tableData&&Object.keys(this._config.tableData).length>0&&this.initLocalData(this._config.tableData,!0)},initLocalData:function(t,e){this._localData=n.Instant.initData(this._configTableURL,t),e&&this.mergeProperty(t)},resetData:function(t){this._localData=n.Instant.resetData(this._configTableURL,t)},getConfig:function(){return this._config},getConfigByKey:function(t){return this._config[t]},mergeProperty:function(t){var e=this,i=function(t){Object.hasOwnProperty(t)||Object.defineProperty(e,t,{get:function(){return this.getLocalData(t)},set:function(e){this.setLocalData(t,e)},configurable:!0})};for(var n in t)i(n)},getLocalData:function(t){return this._localData[t]},setLocalData:function(t,e){this._localData[t]=e},saveData:function(){n.Instant.setData(this._configTableURL,this._localData)},getData:function(){return n.Instant.getData(this._configTableURL,this._localData)}}),cc._RF.pop()},{LocalStorageUtils:"LocalStorageUtils",Singleton:"Singleton"}],Define:[function(t,e,i){"use strict";cc._RF.push(e,"035f0paZLxJYa+H3MqlA5sx","Define"),window.Define={},window.NotificationMsg={LOAD_OVER:"load_over",PERCENT_CHANGE:"percent_change",SOUNDSTATE_CHANGE:"soundState_change",KNIFESTATE_CHANGE:"knifeState_change",LAYER_CHANGE:"layer_face_change",POP_SHOW:"POP_SHOW",POP_HIDE:"POP_HIDE",SCORE_CHANGE:"score_change",BESTSCORE_CHANGE:"bestScore_change",PROP_UPDATE:"prop_update",SHOOT:"shoot",SHOOT_END:"shoot_end",REMOVE_FRUIT_ITEM:"remove_fruit_item",ON_SHOW:"on_show",UPDATE_SKIN_INFO:"update_skin_info",UPDATE_CUR_SKIN:"update_cur_skin",UPDATE_COIN:"update_coin",TESTLY_POP:"TESTLY_POP",CLUBBTN_DO:"CLUBBTN_DO"},window.LayerState={LOADING:"loading",START:"start",GAME:"game",SKIN:"skin",LEVEL:"level",GAME_OVER:"gameOver"},window.GameState={GAME_PREPARE:"gamePrepare",GAME_FLYING:"gameFlying",GAME_ING:"gameIng",GAME_WIN:"gameWin",GAME_OVER:"gameOver",GAME_PAUSE:"gamePause"},window.PopState={RANK:"rank",PAUSE:"pause",PROP_BOX:"propBox",RESULT:"result",FAIL:"fail",WIN:"win"},window.GainType={NOT:0,REVIVE:1,SCALE:2,SKIN:3,COIN:4,THREE:5,ADDEDBONUS:6,SIGN:7},window.PropType={NO_ADS:"NO_ADS",KILL_TWO:"KILL_TWO",MAGIC_BALL:"MAGIC_BALL",LASER:"LASER",FAGAMENT:"FAGAMENT",REVIVE_CARD:"REVIVE_CARD"},window.ZValueType={BG:0,OBSTACLE:1,ROLE:2,BG_FRONT:3,UI:10,POP:15},window.SharePos={NOT:-1,SYSTEM:528,RANK:529,MAGIC:530,DOUBLE:531,DANGER:532,GIFT:533,REVIVE:534,SCORE:535,START:536,LASER:537,SIGN:538,PDD:539},window.GainPos={Magic:"magic",Double:"double",Laser:"laser",Gift:"gift",Revive:"revive",Danger:"danger",Sign:"sign",PddShow:"pddShow"},window.ShareGroupState={State1:1,State2:2,State3:3,State4:4,State5:5},window.ShareToastStr={1:"\u5206\u4eab\u6210\u529f!",2:"\u5206\u4eab\u5931\u8d25!",3:"\u4e0d\u80fd\u5206\u4eab\u5230\u91cd\u590d\u7fa4\u54e6!",4:"\u83b7\u53d6\u7fa4\u6570\u636e\u5931\u8d25\u4e86!",5:"\u9700\u8981\u5206\u4eab\u5230\u7fa4\u54e6!"},window.RankType={CloseSub:-1,NotSub:0,World:1,FriendsRank:2,GroupRank:3,MyRank:4,Beyond:5,BeyondList:6},window.NodeType=cc.Enum({LOADING:"loading",START:"start",PLAY:"game",RESULT_LY:"resultLy",RANK_POP:"rankPop",PAUSE_POP:"pausePop",SKIN_FACE_POP:"skin_face_pop",SETTING_POP:"setting_pop",SHOP_POP:"SHOP_POP"}),window.BubbleType={BUBBLE_1:1,BUBBLE_2:2,BUBBLE_3:3,BUBBLE_4:4,BUBBLE_5:5,BUBBLE_6:6,BUBBLE_MAGIC:7,BUBBLE_GIFT:8,BUBBLE_LASER:9},window.SkinType={SKIN_1:1,SKIN_2:2,SKIN_3:3},window.SkinState={NOT:0,USING:1,NO_USE:2},window.ReportMsg={NEW_PLAYER:{tag:"new5000",page:"index"},POP_COUPON:{tag:"POP_COUPON",page:"index"},OPEN_COUPON_VIDEO:{tag:"OPEN_COUPON_VIDEO",page:"index"},OPEN_COUPON_SHARE:{tag:"OPEN_COUPON_SHARE",page:"index"},SHOW_COUPON_INFO:{tag:"SHOW_COUPON_INFO",page:"index"},TO_PDD_MINI_WX:{tag:"TO_PDD_MINI_WX",page:"index"}},window.IsWx=void 0!==window.wx,window.CreateVersion="2.1.0",e.exports=Define,cc._RF.pop()},{}],DragonBonesBase:[function(t,e,i){"use strict";cc._RF.push(e,"42770ilrSBOZKZ6DVLHthqT","DragonBonesBase"),cc.Class({extends:t("PoolNodeBase"),properties:{},onLoad:function(){this._initAnimation()},_initAnimation:function(){this.animation=this.node.getComponent(dragonBones.ArmatureDisplay),this.armature=this.animation.armature(),this.aniState=null,dragonBones.WorldClock.clock.add(this.armature)},playAnimation:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=void 0;if(arguments.length>3&&void 0!==arguments[3]&&arguments[3]){var o=this.aniState?this.aniState.currentTime:0,s=(this.aniState?this.aniState.totalTime:0)-o;n=this.armature.animation.gotoAndPlayByTime(t,s,e)}else n=this.armature.animation.fadeIn(t,0,e,0);this.aniState=n,n.timeScale=i},updateSlotSkin:function(t,e){this.armature.getSlot(t).displayIndex=e}}),cc._RF.pop()},{PoolNodeBase:"PoolNodeBase"}],DynamicLabel:[function(t,e,i){"use strict";cc._RF.push(e,"dddc1p8ovNOH78ud+jLuDHd","DynamicLabel"),cc.Class({extends:cc.Component,onLoad:function(){this.times=0,this.intervalTime=0,this.curTime=0},init:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.fixedStr=e,this.srcNum=t,this.dstNum=this.srcNum,this.label=this.node.getComponent(cc.Label),this.label.string=this.fixedStr+this.srcNum,this.intervalNum=0},setNum:function(t){this.times=0,this.label.string=t,this.dstNum=this.srcNum=t},updateNum:function(t,e){if(e){this.dstNum=this.dstNum+e,e=this.dstNum-this.srcNum;var i=Math.abs(e),n=e>0?1:-1,o=t/i,s=Math.floor(.016/o);s>1?(this.intervalNum=n*s,this.times=Math.ceil(t/.016),this.intervalTime=.016):(this.intervalNum=n,this.times=Math.ceil(i),this.intervalTime=o),this.curTime=0}},update:function(t){0!=this.times&&this.intervalTime>0&&(this.curTime>=this.intervalTime&&(this.times>1?this.srcNum+=this.intervalNum:1==this.times&&(this.srcNum=this.dstNum,this.intervalTime=0),this.label.string=this.fixedStr+this.srcNum,this.curTime=0,this.times--),this.curTime+=t)}}),cc._RF.pop()},{}],EffectSprBase:[function(t,e,i){"use strict";cc._RF.push(e,"4a8c3VpOexHGLBfAgkrtuMI","EffectSprBase");var n=t("PoolNodeBase"),o=FileUtils.Instant,s=Constant.visibleSize.width;cc.Class({extends:n,properties:{spr:cc.Sprite},refresh:function(t,e){var i=this;this.spr.spriteFrame=o.getTextureByName(t),this.node.position=e,this.node.opacity=255,this.node.scale=1,this.node.x+.5*this.node.width>.5*s?this.node.x=.5*s-.5*this.node.width:this.node.x-.5*this.node.width<.5*-s&&(this.node.x=.5*-s+.5*this.node.width),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.2,.9),cc.scaleTo(.2,1.15),cc.scaleTo(.2,1.05),cc.scaleTo(.2,1.1),cc.fadeTo(.4,0),cc.callFunc(function(){i.remove()})))}}),cc._RF.pop()},{PoolNodeBase:"PoolNodeBase"}],Fail:[function(t,e,i){"use strict";cc._RF.push(e,"eabd4jF7I1BdKduTPwxx3i1","Fail");t("sdk");var n=t("WxSDK"),o=t("PopLayerBase");cc.Class({extends:o,properties:{timeLb:cc.Label,reviveBtn:cc.Node,reviveBtnStatusSpr:[cc.SpriteFrame]},onLoad:function(){o.prototype.onLoad.call(this),this.reviveType=GainFuncType.NOT},show:function(){o.prototype.show.call(this),this.enableTimeUpdate=!0,this.time=10,this.timeLb.string=this.time,this.timeUpdate(),this.refreshState(),this.geting=!1},close:function(){o.prototype.close.call(this)},_closeOver:function(){o.prototype._closeOver.call(this),this.closeCf&&this.closeCf(),this.node.destroy()},timeUpdate:function(){var t=this;this.enableTimeUpdate&&(this.time<=0?this.skip():(this.timeLb.string=this.time,this.time--)),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){t.timeUpdate()})))},reviveByVideo:function(){var t=this;n.videoGain(function(){t.revive()},function(){t.refreshState(),t.geting=!1,t.enableTimeUpdate=!0},function(){ToastMng.showToast("\u770b\u89c6\u9891\u5931\u8d25\u54e6!",2),t.refreshState(),t.geting=!1,t.enableTimeUpdate=!0})},reviveByShare:function(){var t=this;n.propShare(SharePos.REVIVE,function(e){t.revive()},function(){t.enableTimeUpdate=!0,t.geting=!1,t.refreshState()},function(){t.geting=!1},function(){t.enableTimeUpdate=!0,t.geting=!1})},reviveByCoin:function(){this.geting=!1,GameDataHandler.Instant.updateCoin(-GameDataHandler.Instant.reviveNeedCoin),this.revive()},refreshState:function(){switch(this.reviveType=n.getReviveGetFunc(),this.reviveBtn.stopAllActions(),this.reviveBtn.scale=1,this.reviveType){case GainFuncType.SHARE:this.reviveBtn.getComponent(cc.Sprite).spriteFrame=this.reviveBtnStatusSpr[0];break;case GainFuncType.VIDEO:this.reviveBtn.getComponent(cc.Sprite).spriteFrame=this.reviveBtnStatusSpr[1];break;case GainFuncType.COIN:default:this.skip()}},skip:function(){this.close(),this.closeCf=function(){GameMng.playLy.endGame(),GameMng.popResult()}},revive:function(){GameDataHandler.Instant.onePlayReviveTimes++,this.close(),this.closeCf=function(){GameMng.playLy.reviveGame()}},clickReviveBtn:function(t){t.currentTarget.scale=1,this.geting||(this.enableTimeUpdate=!1,this.geting=!0,this.reviveType===GainFuncType.VIDEO?this.reviveByVideo():this.reviveType===GainFuncType.SHARE?this.reviveByShare():this.reviveType===GainFuncType.COIN&&this.reviveByCoin())},clickSkipBtn:function(t){t.currentTarget.scale=1,this.skip()}}),cc._RF.pop()},{PopLayerBase:"PopLayerBase",WxSDK:"WxSDK",sdk:"sdk"}],FakeGravity:[function(t,e,i){"use strict";cc._RF.push(e,"cf9a9hREnFEfqN+DWPjR2UZ","FakeGravity");var n=cc.Class({name:"fgItem",properties:{node:cc.Node,z:0}});window.accListenerAdded=!1,window.accFunc=null,cc.Class({extends:cc.Component,properties:{list:[n],moveDis:12},onLoad:function(){},start:function(){window.accListenerAdded||(this.initAccelerometer(),window.accListenerAdded=!0),this.scheduleOnce(this.setAccFunc,.5)},setAccFunc:function(){var t=this,e=this.list.map(function(t){return t.node.position.clone()});window.accFunc=function(i){var n=i.x,o=(i.y,i.z);o>0&&(o=-o,n=-n),t.list.forEach(function(i,s){i.node.stopAllActions(),i.node.runAction(cc.moveTo(.19,e[s].x+n*t.moveDis*i.z,e[s].y-(o+.5)*t.moveDis*i.z))})}},onShow:function(){this.startAccelerometer()},onHide:function(){this.stopAccelerometer()},initAccelerometer:function(){window.wx&&wx.onAccelerometerChange&&wx.onAccelerometerChange(function(t){window.accFunc&&window.accFunc(t)})},startAccelerometer:function(){window.wx&&wx.startAccelerometer&&wx.startAccelerometer()},stopAccelerometer:function(){window.wx&&wx.stopAccelerometer&&wx.stopAccelerometer()},onDestroy:function(){window.accFunc=null,this.stopAccelerometer()}}),cc._RF.pop()},{}],"FileUtils+Loader":[function(t,e,i){"use strict";cc._RF.push(e,"5c8d1y3u0hLv6GG9En1QoZ7","FileUtils+Loader");var n=t("FileUtils"),o=n.prototype,s=0;o.loadConfig=function(){var t=this;s+=15,logTime("Json\u52a0\u8f7d\u5b8c\u6bd5"+s+"%,\u8017\u65f6"),cc.loader.loadResDir("json",cc.JsonAsset,function(e,i,n){t._initCurPercent(e/i,15)},function(e,i,o){if(e)cc.error(e);else{var a=0;i.forEach(function(t){var e=Common.getSimpleUrl(o[a]);n._resourcesData.Config[e]=t,++a}),console.log("resource ",i),t._initBasePercent(15),logTimeEnd("Json\u52a0\u8f7d\u5b8c\u6bd5"+s+"%,\u8017\u65f6"),t.loadTexture()}})},o.loadTexture=function(){var t=this;s+=30,logTime("\u56fe\u7247\u52a0\u8f7d\u5b8c\u6bd5"+s+"%,\u8017\u65f6"),cc.loader.loadResDir("texture",cc.SpriteFrame,function(e,i,n){t._initCurPercent(e/i,30)},function(e,i){if(e)return cc.error(e),void t.showModal(function(e){e.confirm&&setTimeout(function(){t.loadTexture()},1e3)});i.forEach(function(t){var e=t.name;-1===e.indexOf("_del")&&(n._resourcesData.Texture[e]=t),0}),t._initBasePercent(30),logTimeEnd("\u56fe\u7247\u52a0\u8f7d\u5b8c\u6bd5"+s+"%,\u8017\u65f6"),t.loadSound()})},o.loadSound=function(){var t=this;s+=20,logTime("\u58f0\u97f3\u52a0\u8f7d\u5b8c\u6bd5"+s+"%,\u8017\u65f6"),cc.loader.loadResDir("sound",cc.AudioClip,function(e,i,n){t._initCurPercent(e/i,20)},function(e,i,o){if(e)cc.error(e);else{var a=0;i.forEach(function(t){var e=Common.getSimpleUrl(o[a]);n._resourcesData.Sound[e]=t,++a}),t._initBasePercent(20),logTimeEnd("\u58f0\u97f3\u52a0\u8f7d\u5b8c\u6bd5"+s+"%,\u8017\u65f6"),t.loadFont()}})},o.loadFont=function(){var t=this;s+=15,logTime("\u5b57\u4f53\u52a0\u8f7d\u5b8c\u6bd5"+s+"%,\u8017\u65f6"),cc.loader.loadResDir("font",cc.Font,function(e,i,n){t._initCurPercent(e/i,15)},function(e,i){if(e)cc.error(e);else{i.forEach(function(t){var e=t.name;n._resourcesData.Font[e]=t,0}),t._initBasePercent(15),logTimeEnd("\u5b57\u4f53\u52a0\u8f7d\u5b8c\u6bd5"+s+"%,\u8017\u65f6"),t.loadPrefab()}})},o.loadPrefab=function(){var t=this;s+=20,logTime("\u9884\u5236\u4f53\u52a0\u8f7d\u5b8c\u6bd5"+s+"%,\u8017\u65f6"),cc.loader.loadResDir("prefab",cc.Prefab,function(e,i,n){t._initCurPercent(e/i,20)},function(e,i,o){if(e)cc.error(e);else{i.forEach(function(t){var e=t.name;n._resourcesData.Prefab[e]=t,0}),t._initBasePercent(20),logTimeEnd("\u9884\u5236\u4f53\u52a0\u8f7d\u5b8c\u6bd5"+s+"%,\u8017\u65f6"),t._loadComplete()}})},o._loadComplete=function(){this._isLoaded=!0,NotificationCenter.Instant.post(NotificationMsg.LOAD_OVER)},o._initCurPercent=function(t,e){if(t!=1/0&&!Object.is(t,NaN)){var i=t*e;this._curPercent=Math.max(this._basePercent+i,this._curPercent),NotificationCenter.Instant.post(NotificationMsg.PERCENT_CHANGE,Math.floor(this._curPercent))}},o._initBasePercent=function(t){this._basePercent+=t,NotificationCenter.Instant.post(NotificationMsg.PERCENT_CHANGE,Math.floor(this._basePercent))},o.loadOneConfig=function(t,e,i){logTime("Json\u52a0\u8f7d\u5b8c\u6bd5"+t+",\u8017\u65f6"),cc.loader.loadRes(t,cc.TextAsset,function(n,o){if(n)return cc.error(n),void(i&&i());e&&e(o),logTimeEnd("Json\u52a0\u8f7d\u5b8c\u6bd5"+t+",\u8017\u65f6")})},o.loadOneSpr=function(t,e,i){logTime("Json\u52a0\u8f7d\u5b8c\u6bd5"+t+",\u8017\u65f6"),cc.loader.loadRes(t,cc.SpriteFrame,function(n,o){if(n)return cc.error(n),void(i&&i());e&&e(o),logTimeEnd("Json\u52a0\u8f7d\u5b8c\u6bd5"+t+",\u8017\u65f6")})},o.showModal=function(t,e,i){"undefined"!=typeof wx&&wx.showModal({title:"\u52a0\u8f7d\u5931\u8d25",content:"\u7f51\u7edc\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u91cd\u8bd5!",showCancel:!1,cancelText:"\u53d6\u6d88",confirmText:"\u91cd\u8bd5",success:t,fail:e,complete:i})},cc._RF.pop()},{FileUtils:"FileUtils"}],FileUtils:[function(t,e,i){"use strict";cc._RF.push(e,"2e26bGsbWlI+oCTjbK4xhsK","FileUtils");var n={Config:{},Texture:{},Sound:{},Prefab:{},Font:{}},o=cc.Class({extends:t("Singleton"),properties:{_curPercent:0,_basePercent:0,_isLoaded:!1},statics:{_resourcesData:n},getConfigByName:function(t){var e=n.Config[t];return e||cc.error(t+" not exist in the Config"),e},getTextureByName:function(t){var e=n.Texture[t];return e||cc.error(t+" not exist in the Texture"),e},getSoundByName:function(t){var e=n.Sound[t];return e||cc.error(t+" not exist in the Sound"),e},getPrefabByName:function(t){var e=n.Prefab[t];return e||cc.error(t+" not exist in the Prefab"),e},getFontByName:function(t){var e=n.Font[t];return e||cc.error(t+" not exist in the Font"),e}});window.FileUtils=e.exports=o,null===o.Instant&&(o.Instant=new o),cc._RF.pop()},{Singleton:"Singleton"}],GameClubBtn:[function(t,e,i){"use strict";cc._RF.push(e,"80fdfFd9b5BD56ykqIdZzXc","GameClubBtn"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./WxBtn"),o=cc._decorator,s=o.ccclass,a=(o.property,o.menu),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype._createWxBtn=function(){if("undefined"!=typeof wx&&"function"==typeof wx.createGameClubButton){var t=wx.createGameClubButton({icon:"light"});this._wxBtn=t,this.resizeButton(),this.hide()}},e=__decorate([s,a("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/WxBtn/GameClubBtn")],e)}(n.default);i.default=c,cc._RF.pop()},{"./WxBtn":"WxBtn"}],GameDataHandler:[function(t,e,i){"use strict";cc._RF.push(e,"8ac38ixAyxM9KxhSAK2yEMw","GameDataHandler");var n=t("DataHandler"),o=cc.Class({extends:n,properties:{gameState:{default:GameState.GAME_PREPARE,visible:!1},curScore:0,curShootNum:0,onePlayReviveTimes:0,addScale:0},onInit:function(){this._configTableURL="GameData",this._jsonConfigRelativeURL="GameInfo"},onLoadConfig:function(t){n.prototype.onLoadConfig.call(this,t)},initGameData:function(){},getTextureNameByType:function(t){return"bb_"+t+"_sv"},getProp:function(){return[GainPos.Magic,GainPos.Double,GainPos.Laser].getRandomOne()},getGiftReward:function(){var t={},e=[GainPos.Magic,GainPos.Double];return t.num=[1,1,1,1,2].getRandomOne(),t.prop=e.getRandomOne(),t},updateCoin:function(t,e){var i={};return Math.isNumberNoNan(e)&&(this.curCoin=e,i.scrValue=e),Math.isNumberNoNan(t)&&(this.curCoin+=t,i.addValue=t),NotificationCenter.Instant.post(NotificationMsg.UPDATE_COIN,i),this.curCoin},updatePropNum:function(t,e,i){return Math.isNumberNoNan(i)&&(this.propNum[t]=i),Math.isNumberNoNan(e)&&(this.propNum[t]+=e),this.propNum[t]},updateOnePlayPropTimes:function(t){this.onePlayTimes[t]++},initOnePlayPropTimes:function(t){t?this.onePlayTimes=t:(this.onePlayTimes[GainPos.Magic]=0,this.onePlayTimes[GainPos.Double]=0,this.onePlayTimes[GainPos.Laser]=0)},saveAllData:function(){this.saveData(),MissionDataHandler.Instant.saveData(),SkinDataHandler.Instant.saveData(),WxSDK._saveServerData()},saveData:function(){if(GameMng.playLy&&GameMng.playLy.node.active)if(this.gameState!==GameState.GAME_OVER){var t=[];t.push(GameMng.playLy.waitBubble?GameMng.playLy.waitBubble.com.bubbleType:null),t.push(GameMng.playLy.readyBubble?GameMng.playLy.readyBubble.com.bubbleType:null),this.lastGameData={curScore:this.curScore,equipList:t,curShootNum:this.curShootNum,onePlayReviveTimes:this.onePlayReviveTimes,propNum:this.propNum,onePlayTimes:this.onePlayTimes}}else this.lastGameData=null;var e=JSON.stringify({wxgame:{score:this.curScore,update_time:Math.floor((new Date).getTime()/1e3)}});SDK.updateScore({score:this.bestScore,bestScore:this.bestScore,bscore:e}),n.prototype.saveData.call(this)}});window.GameDataHandler=e.exports=o,null===o.Instant&&(o.Instant=new o),cc._RF.pop()},{DataHandler:"DataHandler"}],GameMng:[function(t,e,i){"use strict";cc._RF.push(e,"3f012FizAFL2JHyUGTzX1S+","GameMng");var n=GameDataHandler.Instant,o=t("SignDataMng"),s=t("Server");cc.Class({extends:cc.Component,properties:{startLy:t("Start"),bg:t("Bg"),insideAds:t("InsideAds"),nodeTypeList:{default:[],visible:!1}},onLoad:function(){var t=this;void 0===window.GameMng&&(window.GameMng=this),[1,2,3].forEach(function(e){t["pet"+e]=new My.NodePool("PetBase")}),cc.systemEvent.on("pop_panel",this.popPanel,this),cc.systemEvent.on("ts_reportEvent",this.reportEvent,this)},start:function(){var t=this;WxSDK.checkComplete(),SDK.showBanner(),WxSDK.onShare(Common.getRandShareStr("propShare"),Constant.shareIconPath,"",function(){}),this.scheduleOnce(function(){t.addEvent();var e=!1;0===n.bestScore&&(e=!0),e?(t.startLy.active=!1,t.toPlayLy(!0,!0)):t.toStartLy()},.5)},addEvent:function(){NotificationCenter.Instant.register(NotificationMsg.POP_SHOW,this,this.onNodeShow),NotificationCenter.Instant.register(NotificationMsg.POP_HIDE,this,this.onNodeHide),WxSDK.checkHide(),WxSDK.checkShow()},clickBtn:function(t,e){e},onNodeShow:function(t){var e=t.source;if(NodeType.hasOwnProperty(e)){if(this.nodeTypeList.indexOf(e)<0){switch(e){case NodeType.PLAY:AudioMng.playMusic("bgMusic",!1,!0,.6),this.nodeTypeList.length=0,this.bg.updateState(e),this.bg.particle.duration=1;break;case NodeType.START:AudioMng.playMusic("bgMusic",!1,!0,1),this.nodeTypeList.length=0,this.bg.updateState(e);break;case NodeType.RESULT_LY:AudioMng.playMusic("play_fail",!1,!1,1),this.nodeTypeList.length=0}this.nodeTypeList.push(e)}-1===this.nodeTypeList.indexOf(NodeType.PLAY)?this.insideAds.show():this.insideAds.hide(),cc.systemEvent.emit(NotificationMsg.CLUBBTN_DO,1===this.nodeTypeList.length&&-1!==this.nodeTypeList.indexOf(NodeType.START))}},onNodeHide:function(t){var e=t.source;if(NodeType.hasOwnProperty(e)){var i=this.nodeTypeList.indexOf(e);-1!==this.nodeTypeList.indexOf(NodeType.PLAY)&&(e===NodeType.PLAY?(this.bg.particle.resetSystem(),this.bg.particle.duration=-1,this.insideAds.show()):this.insideAds.hide()),i>=0&&this.nodeTypeList.splice(i,1),cc.systemEvent.emit(NotificationMsg.CLUBBTN_DO,1===this.nodeTypeList.length&&-1!==this.nodeTypeList.indexOf(NodeType.START))}},reportEvent:function(t){t&&t.tag&&t.page&&s.reportEvent(t)},toStartLy:function(){this.startLy.show()},toPlayLy:function(t,e){this.playLy||(this.playLy=PrefabMng.createComByFab("Play","Play",this.node)),this.playLy.show(t,e)},popFail:function(){PrefabMng.createComByFab("Fail","Fail",this.node).show()},popResult:function(){this.result||(this.result=PrefabMng.createComByFab("Result","Result",this.node)),this.result.show()},popRank:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:RankType.FriendsRank,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.rank||(this.rank=PrefabMng.createComByFab("Rank","Rank",this.node)),this.rank.show(t,e,i)},wxSubDo:function(t,e){},popPropBox:function(){this.propBox||(this.propBox=PrefabMng.createComByFab("PropBox","PropBox",this.node)),this.propBox.show()},popPropBox2:function(t){this.propBox2||(this.propBox2=PrefabMng.createComByFab("PropBox2","PropBox2",this.node)),this.propBox2.show(t)},popPause:function(){this.pauseLy||(this.pauseLy=PrefabMng.createComByFab("Pause","Pause",this.node)),this.pauseLy.show()},popGift:function(){this.gift||(this.gift=PrefabMng.createComByFab("Gift","Gift",this.node)),console.log("popGift"),this.gift.show()},popSkinFace:function(){this.skinFace||(this.skinFace=PrefabMng.createComByFab("Skin","Skin",this.node)),this.skinFace.show()},popSetting:function(){this.setting||(this.setting=PrefabMng.createComByFab("Setting","Setting",this.node)),this.setting.show()},popSign:function(){var t=PrefabMng.createComByFab("signView","SignView",this.node);t.show(),o.init(function(e,i){t.refresh(e,i)},function(){ToastMng.showToast("\u62c9\u53d6\u5931\u8d25! \u8bf7\u91cd\u65b0\u6253\u5f00\u7b7e\u5230\u7a97\u53e3",1.5)})},getPet:function(t){var e=this["pet"+t],i=e.get();if(!i){var n=(i=cc.instantiate(FileUtils.Instant.getPrefabByName("pet_"+t))).getComponent("PetBase");n.pool=e,i.com=n,i.com.id=t,i.parent=this.node}return i},popPanel:function(t){var e=this,i=t.name,n=t.callback;IsWx&&wx.showLoading({title:"\u52a0\u8f7d\u4e2d",mask:!0}),cc.loader.loadRes(i,cc.Prefab,function(t,i){if(t)wx.hideLoading();else{var o=cc.instantiate(i);e.node.addChild(o,10),n&&n(o),IsWx&&wx.hideLoading()}})}});cc._RF.pop()},{Bg:"Bg",InsideAds:"InsideAds",Server:"Server",SignDataMng:"SignDataMng",Start:"Start"}],Gift:[function(t,e,i){"use strict";cc._RF.push(e,"6d215apBLlMrLf1CDVlq+Nm","Gift");var n=t("PopLayerBase"),o=t("DragonBonesBase");cc.Class({extends:n,properties:{getBtnSpr:cc.Sprite,propSpr:cc.Sprite,propNumLb:cc.Label,skipBtn:cc.Node,gift_ske:o},onLoad:function(){this.nodeType=NodeType.PAUSE_POP},show:function(){this.hasShow||(this.hasShow=!0,this.skipBtn.active=!0,this.node.active=!0,n.prototype.show.call(this),this.canTouch=!0,this.shakeGift(),this.refreshProp(),this.refreshGetFunc(),this.onShow())},close:function(){n.prototype.close.call(this),this.onHide()},_closeOver:function(){n.prototype._closeOver.call(this),this.hasShow=!1,this.node.active=!1},refreshProp:function(){switch(this.prop=GameDataHandler.Instant.getProp(),this.prop){case GainPos.Magic:this.propSpr.spriteFrame=FileUtils.Instant.getTextureByName("magic_icon");break;case GainPos.Double:this.propSpr.spriteFrame=FileUtils.Instant.getTextureByName("double_icon");break;case GainPos.Laser:this.propSpr.spriteFrame=FileUtils.Instant.getTextureByName("laser_icon");break;default:this.close()}},refreshGetFunc:function(){switch(this.getFuncType=WxSDK.getGainFuncType(this.prop),this.getFuncType){case GainFuncType.SHARE:this.getBtnSpr.spriteFrame=FileUtils.Instant.getTextureByName("dg_share");break;case GainFuncType.VIDEO:this.getBtnSpr.spriteFrame=FileUtils.Instant.getTextureByName("dg_video");break;default:this.close()}},shakeGift:function(){this.reward=null,this.propSpr.node.opacity=0,this.gift_ske.playAnimation("daiji",0)},openGift:function(){var t=this;switch(this.gift_ske.playAnimation("dakai",1),this.propSpr.node.opacity=0,this.skipBtn.active=!1,setTimeout(function(){t.propSpr.node.stopAllActions(),t.propSpr.node.position=cc.v2(0,80),t.propSpr.node.opacity=255,t.propSpr.node.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.8,cc.v2(0,40)),cc.moveBy(.8,cc.v2(0,-40)))))},100),setTimeout(function(){t.gift_ske.playAnimation("dakaistop",0)},1600),this.reward=GameDataHandler.Instant.getGiftReward(),this.reward.prop){case GainPos.Magic:this.propSpr.spriteFrame=FileUtils.Instant.getTextureByName("magic_icon");break;case GainPos.Double:this.propSpr.spriteFrame=FileUtils.Instant.getTextureByName("double_icon")}this.propNumLb.string="+"+this.reward.num,this.getBtnSpr.spriteFrame=FileUtils.Instant.getTextureByName("getGain")},getGain:function(){GameMng.playLy&&GameMng.playLy.updateProp(this.reward.prop,this.reward.num),this.close()},getByVideo:function(){var t=this;this.canTouch=!1,WxSDK.videoGain(function(){t.openGift(),t.canTouch=!0},function(){t.refreshGetFunc(),t.canTouch=!0},function(){ToastMng.showToast("\u770b\u89c6\u9891\u5931\u8d25\u54e6!",2),t.refreshGetFunc(),t.canTouch=!0})},getByShare:function(){var t=this;this.canTouch=!1,WxSDK.propShare(SharePos.GIFT,function(e){t.openGift(),t.canTouch=!0},function(){t.canTouch=!0,t.refreshGetFunc()},function(){},function(){t.canTouch=!0})},clickBtn:function(t,e){if(t.currentTarget.scale=1,this.canTouch)switch(e){case"get":this.testLog("get "),this.reward?this.getGain():this.getFuncType===GainFuncType.VIDEO?this.getByVideo():this.getFuncType===GainFuncType.SHARE&&this.getByShare();break;case"skip":this.close()}}}),cc._RF.pop()},{DragonBonesBase:"DragonBonesBase",PopLayerBase:"PopLayerBase"}],Guide:[function(t,e,i){"use strict";cc._RF.push(e,"4dc4dlsK4hI+6oNGQiZFFGV","Guide"),cc.Class({extends:cc.Component,properties:{hand:cc.Node,toast:cc.Node},onLoad:function(){},start:function(){},update:function(){if(this.play){var t=this.play._ready_pos,e=cc.v2(this.hand.x,this.hand.y);if(this.play.skin){var i=Math.atan2(t.y-e.y,t.x-e.x);i=RadToDeg*i+90,this.play.paoTai.rotation=-i}this.play.showLine(this.play._ready_pos,e)}},show:function(t){var e=this;this.play=t,this.toast.y=.5*Constant.visibleSize.height,this.toast.runAction(cc.moveTo(1,cc.v2(0,.2*Constant.visibleSize.height)).easing(cc.easeElasticOut(.7))),this.hand.runAction(cc.sequence(cc.moveBy(.85,cc.v2(.4*Constant.visibleSize.width,0)),cc.callFunc(function(){e.hand.runAction(cc.repeatForever(cc.sequence(cc.moveBy(1.7,cc.v2(.8*-Constant.visibleSize.width,0)),cc.moveBy(1.7,cc.v2(.8*Constant.visibleSize.width,0)))))})))},hide:function(){this.play.guide=null,this.node.destroy()}}),cc._RF.pop()},{}],InnerAdList:[function(t,e,i){"use strict";cc._RF.push(e,"ed1f3cFBgFG1r5XG0Y/xtAJ","InnerAdList"),cc.Class({extends:cc.Component,properties:{btns:[cc.Node],texs:[cc.SpriteFrame]},onLoad:function(){for(var t=this,e=0;e<this.btns.length;++e)this.initAdsBtn(e);var i=[{app_id:"wxe3b73a78adca8c93",app_path:"wall_appid=1111",icon:0,app_name:"\u5207\u6c34\u679c"},{app_id:"wx60207249d1d520bb",app_path:"wall_appid=1112",icon:1,app_name:"\u8111\u7b4b\u8f6c\u5f2f"},{app_id:"wxab28b9b2c9e29dc5",app_path:"wall_appid=1113",icon:2,app_name:"\u5446\u5446\u6765\u4e86"}];setTimeout(function(){t.initAds(i)},3e3)},initAds:function(t){var e=this;this.appList=t||[];this.schedule(function(){e.updateAppList()},6,cc.macro.REPEAT_FOREVER,6),this.updateAppList()},initAdsBtn:function(t){var e=this,i=this.btns[t];i.active=!1,i.on(cc.Node.EventType.TOUCH_END,function(){var t=e.appList[i.zIndex];SDK.showInsideAds(t)})},updateAppList:function(){if(this.appList.length>0&&this.appList.length>0){for(this.appList.sort(function(){return Math.random()-.5});this.appList.length<this.btns.length;)this.appList=this.appList.concat(this.appList.slice(0,this.btns.length-this.appList.length));for(var t=0;t<this.btns.length;++t)this.refreshData(t)}},refreshData:function(t){var e=this.btns[t];e.active=!0;var i=this.appList[t];e.zIndex=t,e.stopAllActions(),e.rotation=0,e.runAction(cc.repeatForever(cc.sequence(cc.delayTime(2),cc.rotateTo(.2,-10),cc.rotateTo(.2,10),cc.rotateTo(.2,-10),cc.rotateTo(.2,0))));var n=e.getChildByName("label");n&&(n.getComponent(cc.Label).string=i.app_name),e.getComponent(cc.Sprite).spriteFrame=this.texs[i.icon]}}),cc._RF.pop()},{}],InsideAds:[function(t,e,i){"use strict";cc._RF.push(e,"1d253gmaiFOtKjpQSWq1jat","InsideAds");var n=t("Server");cc.Class({extends:cc.Component,properties:{item:cc.Node,content:cc.Node,btn:cc.Node,arrow:cc.Node,red:cc.Node,bg:cc.Node,window:cc.Node},onLoad:function(){this.srcX=-651,this.dstX=-87,this.state=-1,this.bgTime=.3,this.windowTime=.3,this.storagekey=SDK.game_id+"InsideAds2";var t=cc.sys.localStorage.getItem(this.storagekey);this._localList=t?JSON.parse(t):[],this._showList=[]},start:function(){var t=this;this.node.opacity=0,this.node.zIndex=19999,NotificationCenter.Instant.register(NotificationMsg.POP_SHOW,this,function(){-1!==GameMng.nodeTypeList.indexOf(NodeType.START)?t.show():t.hide()}),this.bg.on(cc.Node.EventType.TOUCH_END,function(){1===t.state&&t._hideCt()})},show:function(){this.node.active=!1,SDK.insideAds.onChanged=null},hide:function(){this.node.active=!1,SDK.insideAds.onChanged=null},_initWindow:function(){this.bg.active=!1,this.window.x=this.srcX,this.arrow.rotation=0,this.state=-1},_onDataChanged:function(){SDK.insideAds.hasAds()||!IsWx?(this._list=SDK.insideAds.list,this.refreshCt()):(this._list=[],this.node.active=!1)},refreshCt:function(){var t=this;Array.isArray(this._list)&&this._list.length>0&&this.checkShowListDiff()&&(this.content.removeAllChildren(),this._list.forEach(function(e){t.content.addChild(t.createIcon(e))}),this.content.getComponent(cc.Layout).updateLayout(),this._showList=this._list.slice())},checkShowListDiff:function(){if(this._list.length===this._showList.length){for(var t=0;t<this._list.length;++t){var e=this._list[t],i=this._showList[t];if(!(e.app_id.toString()+e.app_path.toString()===i.app_id.toString()+i.app_path.toString()))return!0}return!1}return!0},createIcon:function(t){var e=this,i=cc.instantiate(this.item);i.active=!0;var o=i.getChildByName("name").getComponent(cc.Label),s=i.getChildByName("red"),a=i.getChildByName("icon");o.string=t.name.substr(0,5),Common.loadImage(a,t.icon,function(){a.setContentSize(e.icon.getContentSize())}),i.on(cc.Node.EventType.TOUCH_END,function(){var i=function(i){if(t.app_id&&void 0!==t.app_path){console.log("signStr:",t.app_id,t.app_path);var o=t.app_id.toString()+t.app_path.toString();e._localList.indexOf(o)<0&&(e._localList.push(o),s.active=!1,cc.sys.localStorage.setItem(e.storagekey,JSON.stringify(e._localList)),e._checkRedShow())}n.reportEvent({tag:t.id,page:i})};1===t.qrcode_flag?SDK.showImage(t.qrcode_url,function(){i("get_list_scan")}):SDK.showInsideAds(t,function(){i("get_list")})});var c=t.app_id.toString()+t.app_path.toString();return s.active=this._localList.indexOf(c)<0,i},_showCt:function(){var t=this;cc.systemEvent.emit(NotificationMsg.CLUBBTN_DO,!1),this.state=0,this.bg.active=!0,this.bg.runAction(cc.sequence(cc.fadeTo(this.bgTime,160),cc.callFunc(function(){}))),this._checkState(),this.playMoveAni(this.window,this.srcX,this.dstX,this.windowTime,function(){t.arrow.rotation=180,t.state=1})},_hideCt:function(){var t=this;cc.systemEvent.emit(NotificationMsg.CLUBBTN_DO,!0),this.state=0,this.bg.runAction(cc.sequence(cc.fadeTo(this.bgTime,0),cc.callFunc(function(){t.bg.active=!1}))),this.playMoveAni(this.window,this.dstX,this.srcX,this.windowTime,function(){t.arrow.rotation=0,t.state=-1,t._checkState()})},_checkState:function(){0===this.state?(this.btn.scale=1,this.btn.stopAllActions(),this._checkRedShow()):-1===this.state&&(this.btn.stopAllActions(),this.btn.scale=1,this.btn.runAction(cc.sequence(cc.scaleTo(1,1.15),cc.scaleTo(1,1)).repeatForever()),this._checkRedShow())},_checkAppIdListDifference:function(){for(var t=this._list.length,e=0;e<t;++e){var i=this._list[e].app_id.toString()+this._list[e].app_path.toString();if(this._localList.indexOf(i)<0)return!0}return!1},_checkRedShow:function(){this.red.active=this._checkAppIdListDifference()},playMoveAni:function(t,e,i,n,o){t.stopAllActions(),t.x=e,t.runAction(cc.sequence(cc.moveTo(n,cc.v2(i,t.y)).easing(cc.easeSineIn()),cc.callFunc(function(){o&&o()})))},clickBtn:function(){1===this.state?this._hideCt():-1===this.state&&this._showCt()}}),cc._RF.pop()},{Server:"Server"}],LineDotBase:[function(t,e,i){"use strict";cc._RF.push(e,"aa1c1t1V2tKZbSW1AXKaUjx","LineDotBase");var n=t("PoolNodeBase");cc.Class({extends:n,properties:{}}),cc._RF.pop()},{PoolNodeBase:"PoolNodeBase"}],Line:[function(t,e,i){"use strict";cc._RF.push(e,"07589umpIVNuYJ1DruXvKhO","Line"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.init(45)},start:function(){},init:function(t){this.inited=!0,this.interval=t,this.points=[]},addTouchEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t,e){})},getPointsByAngle:function(t){},checkCollision:function(t){},update:function(t){}}),cc._RF.pop()},{}],LoadingMng:[function(t,e,i){"use strict";cc._RF.push(e,"7c0eaaA0rhEup90I38jYHxs","LoadingMng");var n=r(t("NotificationCenter")),o=r(t("GameDataHandler")),s=r(t("MissionDataHandler")),a=r(t("SkinDataHandler")),c=r(t("Server"));function r(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:t("NodeBase"),properties:{gameVersion:cc.Label,loadingLabel:cc.Label,progressBar:cc.ProgressBar,iconNode:cc.Node,icon:cc.Node},onLoad:function(){n.default.Instant.register(NotificationMsg.LOAD_OVER,this,this.onLoadOver),n.default.Instant.register(NotificationMsg.PERCENT_CHANGE,this,this.onPercentChange),c.default.reportAppid(0)},onDestroy:function(){},start:function(){logTime("\u52a0\u8f7d\u603b\u8017\u65f6"),FileUtils.Instant.loadConfig(),Constant.visibleSize=cc.view.getVisibleSize(),Constant.visibleScale.hScale=Constant.visibleSize.height/1280,this.icon.runAction(cc.repeatForever(cc.rotateBy(.2,30))),this.updateGameVersion()},onLoadOver:function(t){var e=this,i=cc.find("CommonNode");cc.game.isPersistRootNode(i)||cc.game.addPersistRootNode(i),o.default.Instant.loadJsonConfig(),s.default.Instant.loadJsonConfig(),a.default.Instant.loadJsonConfig(),o.default.Instant.getData().bestScore>0?this.preloadScene():WxSDK._getServerData(function(){e.preloadScene()})},onPercentChange:function(t){var e=t.source;this._setPercent(e)},_setPercent:function(t){if(this.loadingLabel.string="Loading..."+t+"%",this.progressBar){var e=t/100;this.progressBar.progress=e,this.iconNode.x=this.progressBar.node.width*(-.5+e)}},updateGameVersion:function(){this.gameVersion.string=SDK.game_version+".0"},preloadScene:function(){var t=this,e=this;logTime("demo \u573a\u666f\u9884\u52a0\u8f7d\u5b8c\u6210\uff0c\u8017\u65f6"),cc.director.preloadScene("demo",function(t,e){},function(i,n){if(i)return console.error("err:",i),void t.showModal(function(e){e.confirm&&t.scheduleOnce(function(){t.preloadScene()},1.5)});logTimeEnd("demo \u573a\u666f\u9884\u52a0\u8f7d\u5b8c\u6210\uff0c\u8017\u65f6"),e._setPercent(100),e.scheduleOnce(function(t){CommonNode.Instant.loadScene("demo")},.6)})},showModal:function(t,e,i){"undefined"!=typeof wx&&wx.showModal({title:"\u52a0\u8f7d\u5931\u8d25",content:"\u7f51\u7edc\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u91cd\u8bd5!",showCancel:!1,cancelText:"\u53d6\u6d88",confirmText:"\u91cd\u8bd5",success:t,fail:e,complete:i})}}),cc._RF.pop()},{GameDataHandler:"GameDataHandler",MissionDataHandler:"MissionDataHandler",NodeBase:"NodeBase",NotificationCenter:"NotificationCenter",Server:"Server",SkinDataHandler:"SkinDataHandler"}],LocalStorageUtils:[function(t,e,i){"use strict";cc._RF.push(e,"787c4xNVoRLQ5+8c7TzL+cb","LocalStorageUtils");var n=cc.Class({extends:t("Singleton"),properties:{_signName:"bobble_v1_test2"},getData:function(t,e){var i=this._signName+t,n=cc.sys.localStorage.getItem(i);return n?JSON.parse(n):e?(this.setData(t,e),e):null},setData:function(t,e){e||cc.error("setData value is null"),t=this._signName+t,e=JSON.stringify(e),"undefined"==typeof wx?cc.sys.localStorage.setItem(t,e):wx.setStorage({key:t,data:e})},initData:function(t,e){var i=this.getData(t);if(null==i)return this.setData(t,e),e;for(var n in e)-1===Object.keys(i).indexOf(n)&&(i[n]=e[n]);return this.setData(t,i),i},resetData:function(t,e){var i=this.getData(t);if(i){for(var n in e)-1!==Object.keys(i).indexOf(n)&&(i[n]=e[n]);this.setData(t,i)}return i},clearStorage:function(t,e,i){SDK._checkWx(null,null,"clearStorage")?wx.clearStorage({success:t,fail:e,complete:i}):(cc.sys.localStorage.clear(),t&&t())},getItemInt:function(t,e){var i=this.getData(t);return t||e||(i=e,this.setData(t,i)),parseInt(i)},setItemInt:function(t,e){this.setData(t,e)},setDataWithLog:function(t,e){e||cc.error("setData value is null"),t=this._signName+t,e=JSON.stringify(e),"undefined"==typeof wx?cc.sys.localStorage.setItem(t,e):wx.setStorage({key:t,data:e})}});window.LocalStorageUtils=e.exports=n,null==n.Instant&&(n.Instant=new n),cc._RF.pop()},{Singleton:"Singleton"}],MathConvert:[function(t,e,i){"use strict";cc._RF.push(e,"e4b520dy8xGbbSFCZxuqTk7","MathConvert"),window.RadToDeg=180/Math.PI,window.DegToRad=Math.PI/180,Math.isNumberNoNan=function(t){return"number"==typeof t&&!isNaN(t)},Math.getRandom=function(t,e,i){return i?Math.myRandom()*(e-t)+t:Math.random()*(e-t)+t},Math.getRandomInt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777215,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Math.floor(Math.getRandom(t,e,i))},Math.clamp=function(t,e,i){return t<e?e:t>i?i:t},Math.clamp0_1=function(t){return Math.clamp(t,0,1)},Math.getValueByRandVar=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return-t+2*Math.random().toFixed(e)*t},Math.getNormalValue=function(){return value?value/Math.abs(value):0},Math.calcAngle2D=function(t,e){Math.asin();var i=Math.atan((e.y-t.y)/(e.x-t.x))*RadToDeg;if(e.y>t.y&&e.x>t.x)return i;e.y<t.y&&e.x<t.x&&cc.pAngleSigned(),cc.radiansToDegrees()},Math.getLinePara=function(t,e){var i={};return 0===e.x-t.x?(i.k=1e4,i.b=t.y-i.k*t.x):(i.k=(e.y-t.y)/(e.x-t.x),i.b=t.y-i.k*t.x),i},Math.getLinePara2=function(t,e,i,n){var o=void 0,s=void 0,a=void 0;return t===i?0===t?(a=0,s=0,o=1):(s=0,o=-(a=t)/t):e===n?0===e?(a=0,o=0,s=1):(o=0,s=-(a=e)/e):(o=n-e,s=t-i,a=i*e-t*n),{a:o,b:s,c:a}},Math.getDSquarePToLine=function(){},Math.mySeed=0,Math.myRandomBySeed=function(t){var e=window.mySeed||0;this.mySrand(t),this.myRandom(),this.myRandom();var i=this.random();return this.mySrand(e),i},Math.myRandom=function(){return window.mySeed=(214013*window.mySeed+2531011)%4294967296,window.mySeed/4294967296},Math.myRandomInt=function(t,e,i){return Math.floor(Math.myRandom()*(e-t+1)+t)},Math.mySrand=function(t){window.mySeed=parseInt(t)||0},cc._RF.pop()},{}],MissionDataHandler:[function(t,e,i){"use strict";cc._RF.push(e,"c6840pNhWhKSbiRsyN/pVkc","MissionDataHandler");var n=t("DataHandler"),o=GameDataHandler.Instant,s=Constant.MAX_COLS,a=Constant.MAX_ROWS,c=Constant.BUBBLE_RADIUS,r=Constant.LIST_START_ROW,l=Math.sin(3.14/3),h=cc.Class({extends:n,properties:{basePos:{default:null,visible:!1},bubbleTowArray:{default:[],visible:!1},aroundList:{default:[],visible:!1},style:{default:0,visible:!1},bubbleTotalNum:{default:0,visible:!1}},onInit:function(){this._configTableURL="MissionData",this._jsonConfigRelativeURL="MissionInfo"},onLoadConfig:function(t){n.prototype.onLoadConfig.call(this,t),this.basePos=cc.v2(-Constant.visibleSize.width/2-1,Constant.visibleSize.height/2-Constant.TOP_BAR_H+10),Math.mySrand(1)},initMissionData:function(){this.basePos=cc.v2(-Constant.visibleSize.width/2-1,Constant.visibleSize.height/2-Constant.TOP_BAR_H+10),this.bubbleTowArray=[],this.bubbleTotalNum=0;for(var t=0;t<a;++t){for(var e=[],i=0;i<s;++i)e.push(null);this.bubbleTowArray.push(e)}},getEquipBubble:function(t){for(var e=[],i=0;i<t;++i){var n=this.getNewShootBubble();e.push(n)}return e},getNewShootBubble:function(){for(var t=void 0,e=[1,2,3,4,5,6],i=this.getLvScale(2),n=[],o=0;o<s;++o)for(var c=r;c<a;++c){var l=this.bubbleTowArray[c][o];if(l){-1===n.indexOf(l.com.bubbleType)&&n.push(l.com.bubbleType);break}}(n.remove(BubbleType.BUBBLE_GIFT),n.length<=0||6===n.length)?t=this.getBubble():Math.getRandom(0,1,!0)<i?t=n.getRandomOne():(n.forEach(function(t){e.remove(t)}),t=e.getRandomOne());return t},getBubble:function(t,e){var i=[1,2,3,4,5,6],n=void 0;if(t&&t!==BubbleType.BUBBLE_GIFT){var o=Math.getRandom(0,1,!0);if(o<e)n=t;else{i.remove(t);for(var s=1-e,a=i.length,c=s/a,r=e+c,l=0;l<a&&!(o<r);++l)r+=c;n=i[l]}}else n=i.getRandomOne();return n},getHByBubbleRow:function(t){return 2*t*c*l},getRandomBubble:function(t,e){this.bubbleTotalNum++;var i=void 0;if(this.canShowGift())i=BubbleType.BUBBLE_GIFT;else{var n=void 0,o=void 0,s=void 0,a=void 0;if(this.tempBubbleData)if(n=this.tempBubbleData.row,o=this.tempBubbleData.col,a=this.tempBubbleData.sameG,s=this.tempBubbleData.bubbleType,n===t&&o+1===e)if(s)Math.getRandom(0,1,!0)<a&&(a-=.1,i=s);i||(i=this.getBubbleByLastRow(t,e),a=this.getLvScale(1)),this.tempBubbleData={row:t,col:e,bubbleType:i,sameG:a}}return i},getBubbleByLastRow:function(t,e){var i=void 0,n=this.getLastRowBubbles(t,e);if(n.length>0){var o=n.getRandomOne().com.bubbleType,s=this.getLvScale(3);i=this.getBubble(o,s)}else{var a=void 0,c=e-1;c>=0&&this.bubbleTowArray[t][c]&&(a=this.bubbleTowArray[t][c].com.bubbleType),i=this.getBubble(a,0)}return i},getLvScale:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=0,i=this._config.scoreLv.length;e<i&&!(o.curScore<this._config.scoreLv[e][0]);e++);return e===i&&e--,this._config.scoreLv[e][t]},getSameQ:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=void 0,n=void 0,s=this._config.scoreLv.length;for(n=0;n<s&&!(o.curScore<this._config.scoreLv[n][0]);n++);n===s&&n--;var a=this._config.scoreLv[n][e];if(3===e)i=a;else{var c=0;1===e&&(this.lastTempType&&this.lastTempType===t?c=-.1:this.lastTempType=t),i=(1+c)*a}return i},getRowAndColByPos:function(t,e){var i=Math.round((e-this.basePos.y-c)/c/2/l),n=void 0;return n=this.style%2?Math.round(((t-this.basePos.x)/c-2+i%2)/2):Math.round(((t-this.basePos.x)/c-1-i%2)/2),i=i<0?0:i>=a?a-1:i,n=n<0?0:n>=s?s-1:n,cc.v2(i,n)},getPosByRowAndCol:function(t,e){var i,n=void 0;return n=this.style%2?this.basePos.x+(2*e+2-t%2)*c:this.basePos.x+(2*e+1+t%2)*c,i=this.basePos.y+(2*t*c*l+c),cc.v2(n,i)},isValidPos:function(t,e){return!(t<0||e<0)&&!(t>=a||e>=s)},getAroundBubble:function(t,e){var i=this,n=[];return this.getAround(t,e).forEach(function(t){var e=i.bubbleTowArray[t.x][t.y];e&&n.push(e)}),n},getAround:function(t,e){var i=[];this.isValidPos(t,e)&&(this.isValidPos(t,e-1)&&i.push(cc.v2(t,e-1)),this.isValidPos(t,e+1)&&i.push(cc.v2(t,e+1)),(this.style%2?!(t%2):t%2)?(this.isValidPos(t-1,e)&&i.push(cc.v2(t-1,e)),this.isValidPos(t+1,e+1)&&i.push(cc.v2(t+1,e+1)),this.isValidPos(t-1,e+1)&&i.push(cc.v2(t-1,e+1)),this.isValidPos(t+1,e)&&i.push(cc.v2(t+1,e))):(this.isValidPos(t-1,e-1)&&i.push(cc.v2(t-1,e-1)),this.isValidPos(t+1,e)&&i.push(cc.v2(t+1,e)),this.isValidPos(t-1,e)&&i.push(cc.v2(t-1,e)),this.isValidPos(t+1,e-1)&&i.push(cc.v2(t+1,e-1))));return i},getLastRowBubbles:function(t,e){var i=this,n=[],o=[];return(this.style%2?!(t%2):t%2)?(this.isValidPos(t-1,e)&&o.push(cc.v2(t-1,e)),this.isValidPos(t-1,e+1)&&o.push(cc.v2(t-1,e+1))):(this.isValidPos(t-1,e-1)&&o.push(cc.v2(t-1,e-1)),this.isValidPos(t-1,e)&&o.push(cc.v2(t-1,e))),o.forEach(function(t){var e=i.bubbleTowArray[t.x][t.y];e&&n.push(e)}),n},canShowGift:function(){if(this.bubbleTotalNum>100)if(this.giftTag||(this.giftIndex=0,this.giftTag=Math.getRandomInt(1,101,!0)),this.giftIndex++,this.giftIndex>120)this.giftTag=null;else if(this.giftTag===this.giftIndex)return this.giftTag=-1,!0;return!1},saveData:function(){if(GameMng.playLy&&GameMng.playLy.node.active){for(var t=[],e=0;e<a;++e){for(var i=[],o=0;o<s;++o){var c=this.bubbleTowArray[e][o];c?i.push(c.com.bubbleType):i.push(null)}t.push(i)}this.lastMission=t}n.prototype.saveData.call(this)}});window.MissionDataHandler=e.exports=h,null===h.Instant&&(h.Instant=new h),cc._RF.pop()},{DataHandler:"DataHandler"}],MngBase:[function(t,e,i){"use strict";cc._RF.push(e,"591d0YddjFGYpvyVPQKO8ok","MngBase");var n=cc.Class({extends:cc.Component,properties:{},objArrayConvertMay:function(t,e){t.forEach(function(t){t.key&&t.value&&e.set(t.key,t.value)})}});window.MngBase=n,cc._RF.pop()},{}],MyNodePool:[function(t,e,i){"use strict";cc._RF.push(e,"d466fDxJqBFNYDXj4HlzCrc","MyNodePool");var n=t("My");n.NodePool=function(t){this.poolHandlerComp=t,this._pool=[]},e.exports=n.NodePool,n.NodePool.prototype={constructor:n.NodePool,size:function(){return this._pool.length},clear:function(){for(var t=this._pool.length,e=0;e<t;++e)this._pool[e].destroy();this._pool=[]},put:function(t){if(t&&-1==this._pool.indexOf(t)){t.active=!1;var e=this.poolHandlerComp?t.getComponent(this.poolHandlerComp):null;e&&e.unuse&&e.unuse(),this._pool.push(t)}},get:function(){var t=this._pool.length-1;if(t<0)return null;var e=this._pool[t];this._pool.length=t;var i=this.poolHandlerComp?e.getComponent(this.poolHandlerComp):null;return i&&i.reuse&&i.reuse.apply(i,arguments),e.active=!0,e}},cc._RF.pop()},{My:"My"}],My:[function(t,e,i){"use strict";cc._RF.push(e,"ef64d00aHRKla4IY3rHJ81B","My");window.My=e.exports={},cc._RF.pop()},{}],NodeBase:[function(t,e,i){"use strict";cc._RF.push(e,"e23465mL9dMiLV7P39adNgg","NodeBase");var n=cc.Class({extends:cc.Component,properties:{manager:{default:null,visible:!1},enableLog:{default:!1,visible:!1},nodeType:{default:!1,visible:!1}},onLoad:function(){},testLog:function(){var t;this.enableLog&&(t=console).log.apply(t,arguments)},onShow:function(){NotificationCenter.Instant.post(NotificationMsg.POP_SHOW,this.nodeType)},onHide:function(){NotificationCenter.Instant.post(NotificationMsg.POP_HIDE,this.nodeType)}});e.exports=n,cc._RF.pop()},{}],NotificationCenter:[function(t,e,i){"use strict";cc._RF.push(e,"63952GyWZdPVYIcp+TtpUmu","NotificationCenter");var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var a,c=t[Symbol.iterator]();!(n=(a=c.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=cc.Class({extends:t("Singleton"),properties:{_dic:null,_tempPostList:null},onInit:function(){this._dic=new Map,this._tempPostList=new Map},post:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null==t)throw"Post: name";var s=new function(t,e,i){this.name=t,this.source=e,this.userInfo=i}(t,e,i);if(o){var a=this._valueOrDefault(this._tempPostList,o);a?(a.push(s),this._tempPostList.set(o,a)):this._tempPostList.set(o,[s]),this.dealTempPostEvent("time:")}else{var c=this._getDelegates(t),r=function(t,e){e.forEach(function(e){e.call(t,s)})},l=!0,h=!1,u=void 0;try{for(var d,f=c[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value,g=n(p,2);r(g[0],g[1])}}catch(t){h=!0,u=t}finally{try{!l&&f.return&&f.return()}finally{if(h)throw u}}}},register:function(t,e,i){if(null==t)throw"Register: name";if(null==e)throw"Register: target";if(null==i)throw"Register: method";this._addValue(t,e,i)},dealTempPostEvent:function(t){var e=this,i=t.split(":");if(i.length>2){var n=i[0],o=i[1];switch(n){case"time":this._valueOrDefault.forEach(function(t,i){var n=i.split(":");if(n.length>2&&"time"===n[0]){var o=n[1];setTimeout(function(){t.forEach(function(t){e.post(t.name,t.source,t.userInfo)})},o),e._valueOrDefault.delete(i)}});break;case"view":this._valueOrDefault.forEach(function(t,i){var n=i.split(":");n.length>2&&"view"===n[0]&&n[1]===o&&(t.forEach(function(t){e.post(t.name,t.source,t.userInfo)}),e._valueOrDefault.delete(i))})}}},_addValue:function(t,e,i){var n=this._valueOrDefault(this._dic,t);null==n&&(n=new Map,this._dic.set(t,n));var o=this._valueOrDefault(n,i);if(null==o)n.set(e,[i]);else{var s=o.push(i);n.set(e,s)}},_getDelegates:function(t){var e=this._valueOrDefault(this._dic,t);return null!=e?e.entries():[]},_valueOrDefault:function(t,e){return null==t?null:t.has(e)?t.get(e):null},removeRegister:function(){"string"===(arguments.length<=0?void 0:arguments[0])?this._removeRegister1.apply(this,arguments):this._removeRegister2.apply(this,arguments)},_removeRegister1:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==t)throw"_removeRegister1 name";null!=e?null!=i?this._removeKey(t,e,i):this._removeKey(t,e):this._removeKey(t)},_removeRegister2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==t)throw"_removeRegister2 target";var e=!0,i=!1,o=void 0;try{for(var s,a=this._dic[Symbol.iterator]();!(e=(s=a.next()).done);e=!0){var c=s.value,r=n(c,2),l=(r[0],r[1]),h=this._valueOrDefault(l,t);null!=h&&h.delete(t)}}catch(t){i=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw o}}},_removeKey:function(){1===arguments.length?this._removeKey1.apply(this,arguments):2===arguments.length?this._removeKey2.apply(this,arguments):this._removeKey3.apply(this,arguments)},_removeKey1:function(t){this._dic.delete(t)},_removeKey2:function(t,e){var i=this._valueOrDefault(this._dic,t);null!=i&&i.delete()},_removeKey3:function(t,e,i){var n=this._valueOrDefault(this._dic,t);if(null!=n){var o=this._valueOrDefault(n,e);null!=o&&o.remove(i)}}});window.NotificationCenter=e.exports=o,null===o.Instant&&(o.Instant=new o),cc._RF.pop()},{Singleton:"Singleton"}],NumberConvert:[function(t,e,i){"use strict";cc._RF.push(e,"0a440+4/H5B7YFnoDN9+FyJ","NumberConvert");var n=Number.prototype;n.equals=function(t){return this===t},n.isZero=function(){return 0===this},cc._RF.pop()},{}],OnBannerResize:[function(t,e,i){"use strict";cc._RF.push(e,"a4bb1DwEeVCbqXRzOsAkbnc","OnBannerResize"),cc.Class({extends:cc.Component,properties:{btnList:[cc.Node],isFirstHide:!1,autoPlace:!0,placeDelay:2},onLoad:function(){this.btnList.forEach(function(t){t._lastPos=t.position})},onEnable:function(){var t=this;if(this.autoPlace=SDK.close_btn_auto_place>-1,this.placeDelay=Number(SDK.close_btn_place_delay)||0,cc.systemEvent.on("banner_changed",this.placeBtnDelay,this),SDK.hideBanner(),this.isFirstHide){var e=.5*-cc.view.getVisibleSize().height+170;this.btnList.forEach(function(t){t.pauseSystemEvents(!1),t.y=e})}this.scheduleOnce(function(){SDK.showBanner(),t.isFirstHide&&t.btnList.forEach(function(t){t.resumeSystemEvents(!1)}),t.doPlaceBtnList()},this.placeDelay)},onDisable:function(){SDK.showBanner(),cc.systemEvent.off("banner_changed",this.placeBtnDelay,this)},placeBtnDelay:function(){this.scheduleOnce(this.doPlaceBtnList,.05)},doPlaceBtnList:function(){var t=this;this.btnList.forEach(function(e){t.placeBtn(e)}),cc.systemEvent.emit("btn_fit")},placeBtn:function(t){if(this.autoPlace&&SDK._banner&&SDK._banner.style&&SDK._banner.style.realHeight){var e=SDK._banner.style.top,i=cc.view.getVisibleSize(),n=cc.v2(t.x,(SDK.sys.screenHeight-e)/SDK.sys.screenHeight*i.height+.5*t.height);SDK.isIos()&&i.height/i.width>=2&&(n.y+=65),n=t.parent.convertToNodeSpaceAR(n),t.y=n.y+28}else t.position=t._lastPos}}),cc._RF.pop()},{}],Pause:[function(t,e,i){"use strict";cc._RF.push(e,"65ee878+7tKJKfyO99zqQLG","Pause");var n=t("PopLayerBase");cc.Class({extends:n,properties:{scoreLb:cc.Label},onLoad:function(){this.nodeType=NodeType.PAUSE_POP},show:function(){this.node.active=!0,this.scoreLb.string=GameDataHandler.Instant.curScore,n.prototype.show.call(this),this.onShow()},close:function(){n.prototype.close.call(this),this.onHide()},_closeOver:function(){n.prototype._closeOver.call(this),this.node.active=!1},clickBtn:function(t,e){switch(t.currentTarget.scale=1,e){case"toStart":this.testLog("toStart "),this.close(),GameMng.playLy.endGame(),GameMng.toStartLy();break;case"reGame":this.testLog("reGame "),this.close(),GameMng.playLy.startGame();break;case"continue":this.close()}}}),cc._RF.pop()},{PopLayerBase:"PopLayerBase"}],PetBase:[function(t,e,i){"use strict";cc._RF.push(e,"5cfb2SJna5IEYajm+xbKI+D","PetBase");var n=t("DragonBonesBase"),o="shootstart",s="shootend";cc.Class({extends:n,onLoad:function(){n.prototype.onLoad.call(this),this.armature.addEventListener(dragonBones.EventObject.FRAME_EVENT,this._frameEventHandler,this)},playInitEquip:function(t){this.petState="init",this.mng=t,t.waitBubble.scale=t.readyBubble.scale=Constant.ReadyBubbleScale,t.readyBubble.opacity=255,t.waitBubble.opacity=0,this.playWaitAction(),this.updatePaoSkin(t.waitBubble.com.bubbleType)},playChangeEquip:function(){this.petState="change",this.playPaoQiuAction()},playCreateEquip:function(){this.mng.waitBubble.opacity=0,this.petState="create",this.playPaoQiuAction()},playShootEquip:function(){this.petState="shoot",mng.readyBubble.opacity=0,mng.waitBubble.opacity=0,this.playWaitAction(),this.updatePaoSkin(mng.waitBubble.com.bubbleType)},playPaoQiuAction:function(){this.playAnimation("paoqiu",1,2)},playWaitAction:function(){this.playAnimation("daiji",0)},updatePaoSkin:function(t){var e=t-1;console.log("bubbleType ",t),8===e&&(e=7),console.log("index ",e),this.updateSlotSkin("paoblue",e)},_frameEventHandler:function(t){var e=this.mng;switch(t.name){case o:break;case s:switch(this.petState){case"init":break;case"change":case"create":e.canTouch=!0,e.readyBubble.scale=Constant.ReadyBubbleScale,e.readyBubble.opacity=255,e.waitBubble.opacity=0,this.playWaitAction(),this.updatePaoSkin(e.waitBubble.com.bubbleType)}}}}),cc._RF.pop()},{DragonBonesBase:"DragonBonesBase"}],Play:[function(t,e,i){"use strict";cc._RF.push(e,"a4ef5r+kJVHjqbtyOHLlTSs","Play");var n=t("NodeBase"),o=t("Server"),s=t("DragonBonesBase"),a=GameDataHandler.Instant,c=MissionDataHandler.Instant,r=Constant.MAX_COLS,l=Constant.MAX_ROWS,h=Constant.LIST_START_ROW,u=Constant.BORDER_XD,d=Constant.BUBBLE_RADIUS,f=Constant.BUBBLE_SPEED,p=Constant.visibleSize.width,g=Math.pow(1.4*Constant.BUBBLE_RADIUS,2),_=60,v=0;window.PlayerState={Await:1,Happy:2},cc.Class({extends:n,properties:{linePanel:cc.Node,waitBubble:cc.Node,readyBubble:cc.Node,bubblePanel:cc.Node,effectPanel:cc.Node,limitLine:cc.Node,scoreLb:cc.Label,arrowSpr:cc.Node,otherSkin:cc.Node,defaultSkin:cc.Node,paoTai:cc.Node,shootNode:cc.Node,textEffectDgb:s},onLoad:function(){},update:function(t){this.updateLine(),this.updateShotBubble()},init:function(){var t=this;this.canTouch=!1,this.nodeType=NodeType.PLAY,this.addTouchEvent(),this._line_maxPointNum=88,this._bubbleList=[],this._bubblePool=new My.NodePool("PoolNodeBase"),this._lineDotList=[],this._lineDotPool=new My.NodePool("LineDotBase"),this._scoreAddPool=new My.NodePool("ScoreAddBase"),this._effectSprPool=new My.NodePool("EffectSpr"),this._propNumAddPool=new My.NodePool("ScoreAddBase"),this._baoZhaPool=new My.NodePool("DragonBonesBase"),this._shanDianPool=new My.NodePool("DragonBonesBase"),this._laserEffectPool=new My.NodePool("PoolNodeBase"),this._laserTagPool=new My.NodePool("PoolNodeBase"),this._laserTagList=[],this.visibleSize=Constant.visibleSize,this._topY=this.visibleSize.height/2-d-Constant.TOP_BAR_H,this._limitY=this.visibleSize.height/2-Constant.TOP_BAR_H-c.getHByBubbleRow(13),this._shootToBorderXD=Constant.visibleSize.width/2-u,this.laserTagList=[],this.textEffectDgb.node.zIndex=1e4,this.arrowSpr.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){t.arrowSpr.runAction(cc.repeatForever(cc.rotateBy(.5,30)))}))),cc.systemEvent.on("btn_fit",function(){t._ready_pos=cc.v2(t.shootNode.x,t.shootNode.y+_),v=t._ready_pos.y+30})},show:function(t,e){var i=this;this.isInited||(this.isInited=!0,this.init()),this.node.active=!0,t&&this.continueLastGame()||this.startGame(),e&&setTimeout(function(){i.guide=PrefabMng.createComByFab("Guide","Guide",i.node),i.guide.show(i)},1e3),this.onShow()},hide:function(){this.node.active=!1,this.guide&&this.guide.hide(),this.onHide()},endGame:function(){this.clearGame(),this.hide()},reviveGame:function(){for(var t=0;t<h;++t)for(var e=0;e<r;++e){var i=c.bubbleTowArray[t][e];i&&(this.updateScore(100,i.position),i.com.remove(),c.bubbleTowArray[t][e]=null)}for(var n=0;n<4;n++)this.clearDoubleBubble();setTimeout(function(){a.gameState=GameState.GAME_ING},300),ToastMng.showToast("\u590d\u6d3b\u6210\u529f,\u8bf7\u7ee7\u7eed\u6e38\u620f")},updatePlayerState:function(t){if(this.playerState!==t)switch(this.playerState=t,t){case PlayerState.Await:this.skin||(this.arrowSpr.active=!0);break;case PlayerState.Happy:this.skin||(this.arrowSpr.active=!1)}},updateProp:function(t,e,i){var n,o=void 0,s=void 0;if(console.log("updateProp 1 gainPos"+t+" addNum"+e+" scrNum"+i),e>0){if(t===GainPos.Double)s="\u606d\u559c\u83b7\u5f97%d\u679a\u6d88\u53cc\u884c\u9053\u5177";else if(t===GainPos.Magic)s="\u606d\u559c\u83b7\u5f97%d\u679a\u9b54\u6cd5\u7403\u9053\u5177";else{if(t!==GainPos.Laser)return;s="\u606d\u559c\u83b7\u5f97%d\u679a\u6fc0\u5149\u70ae\u9053\u5177"}ToastMng.showToast(s.replace("%d",e),1.5)}if(console.log("updateProp 2 gainPos"+t+" addNum"+e+" scrNum"+i),o=this.node.getChildByName(t),e){var c=this.createPropNumAdd(),r=o.position;e<0?c.com.refresh(""+e,r):c.com.refresh("+"+e,r)}n=a.updatePropNum(t,e,i);var l=o.getChildByName("num");l.getComponent(cc.Label).string="x"+n,l.active=!0},clickProp:function(t){var e=this;if(this.canTouch&&a.gameState===GameState.GAME_ING&&!this._bubbleIsMoving){var i,n=void 0;switch(console.log("gainPos "+t),t){case GainPos.Magic:n=function(){e.useMagic()};break;case GainPos.Double:n=function(){e.clearDoubleBubble()};break;case GainPos.Laser:n=function(){e.useLaser()};break;default:return}i=a.propNum[t],console.log("num ",i),i>0?(this.updateProp(t,-1),n&&n()):GameMng.popPropBox2(t)}},updateScore:function(t,e){(t>0&&(t*=a.addScale+1,t=parseInt(t)),a.curScore+=t,0!==t&&e)&&this.createScoreAdd().com.refresh(t,e);this.scoreLb.string=a.curScore,a.curScore>a.bestScore&&(a.bestScore<5e3&&a.curScore>=5e3&&o.reportEvent(ReportMsg.NEW_PLAYER),a.bestScore=a.curScore)},startGame:function(){var t=this;this.canTouch=!0,this.scoreLb.string=a.curScore=0,a.onePlayReviveTimes=0,a.curShootNum=0,a.gameState=GameState.GAME_PREPARE,a.initOnePlayPropTimes(),this.updateProp(GainPos.Magic,0),this.updateProp(GainPos.Double,0),this.updateProp(GainPos.Laser,0),this.clearGame(),setTimeout(function(){AudioMng.playEffect("play_ready")},1300),setTimeout(function(){t.updatePlayerState(PlayerState.Await),a.gameState=GameState.GAME_ING,c.initMissionData(),t.initBubbleList(6,r),t.initEquip(c.getEquipBubble(2)),t.bubbleListMove(cc.v2(0,-c.getHByBubbleRow(l)-14))},10),this.limitLine.y=this._limitY},continueLastGame:function(){var t=this;this.canTouch=!0;var e=a.lastGameData;return!!(e&&e.curScore&&c.lastMission)&&(a.onePlayReviveTimes=Math.isNumberNoNan(e.onePlayReviveTimes)?e.onePlayReviveTimes:0,a.initOnePlayPropTimes(e.onePlayTimes),this.updateProp(GainPos.Magic,0,e.propNum[GainPos.Magic]),this.updateProp(GainPos.Double,0,e.propNum[GainPos.Double]),this.updateProp(GainPos.Laser,0,e.propNum[GainPos.Laser]),this.scoreLb.string=a.curScore=e.curScore,a.curShootNum=e.curShootNum,a.gameState=GameState.GAME_PREPARE,this.clearGame(),setTimeout(function(){AudioMng.playEffect("play_ready")},1300),setTimeout(function(){a.gameState=GameState.GAME_ING,t.updatePlayerState(PlayerState.Await),c.initMissionData(),t.initLastBubbleList(),t.initLastEquip(),t.bubbleListMove(cc.v2(0,-c.getHByBubbleRow(l)-14))},10),this.limitLine.y=this._limitY,!0)},chickBtn:function(t,e){var i=this.readyBubble.com.bubbleType;switch(e){case"magic":console.log("magic"),i!==BubbleType.BUBBLE_MAGIC&&i!==BubbleType.BUBBLE_LASER?this.clickProp(GainPos.Magic):ToastMng.showToast("\u4eb2!\u8bf7\u5148\u4f7f\u7528\u5b8c\u9053\u5177\u54e6!",1.5);break;case"double":console.log("double"),AudioMng.playEffect("bubble_switch"),this.clickProp(GainPos.Double);break;case"laser":console.log("laser"),AudioMng.playEffect("bubble_switch"),i!==BubbleType.BUBBLE_MAGIC&&i!==BubbleType.BUBBLE_LASER?this.clickProp(GainPos.Laser):ToastMng.showToast("\u4eb2!\u8bf7\u5148\u4f7f\u7528\u5b8c\u9053\u5177\u54e6!",1.5);break;case"change":console.log("change"),a.gameState!==GameState.GAME_FLYING&&this.changeEquip(),AudioMng.playEffect("bubble_switch");break;case"pause":console.log("pause"),GameMng.popPause(),a.saveAllData()}},addTouchEvent:function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(e){t._touchPos=e.currentTarget.convertToNodeSpaceAR(e.getLocation()),t._isTouchBegin=!0,t.guide&&t.guide.hide()}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){t._touchPos=e.currentTarget.convertToNodeSpaceAR(e.getLocation()),t.updatePlayerState(PlayerState.Happy)}),this.node.on(cc.Node.EventType.TOUCH_END,function(e){t.updatePlayerState(PlayerState.Await),t._isTouchBegin=!1,t._touchPos=null,t.linePanel.active&&(t.hideLine(),t.startShotBubble())})},updateLine:function(t){if(this._isTouchBegin&&!this._bubbleIsMoving&&this.canTouch&&a.gameState===GameState.GAME_ING)if(this._touchPos.y>v){var e=this._ready_pos,i=this._touchPos;(this.readyBubble.com.bubbleType===BubbleType.BUBBLE_LASER||this.skin)&&(this.shootAngle=Math.atan2(e.y-i.y,e.x-i.x),this.shootAngle=RadToDeg*this.shootAngle+90,this.skin&&(this.paoTai.rotation=-this.shootAngle)),this.readyBubble.com.bubbleType===BubbleType.BUBBLE_LASER?(this.showLine(e,i,!0),this.showLaser(e,i)):this.showLine(e,i)}else this._touchPos.y<this._ready_pos.y-10&&this.hideLine()},startShotBubble:function(){a.gameState=GameState.GAME_FLYING,a.curShootNum++;var t=Common.getNodePos(this.readyBubble,this.bubblePanel);this.shootBubble=this.createBubble(),this.shootBubble.position=t,this.shootBubble.com.setType(this.readyBubble.com.bubbleType),this.shootBubble.com.bubbleType===BubbleType.BUBBLE_LASER?AudioMng.playEffect("laser"):AudioMng.playEffect("bubble_shoot"),this.skin&&(this.paoTai.scaleY=1,this.paoTai.stopAllActions(),this.paoTai.runAction(cc.sequence(cc.scaleTo(.12,1,.82),cc.scaleTo(.12,1,1.08),cc.scaleTo(.12,1,1)))),this.readyBubble.active=!1},checkState:function(){var t=!1,e=c.bubbleTowArray;if(this.shootBubble&&this.shootBubble.com.bubbleType!==BubbleType.BUBBLE_LASER){var i=this.shootBubble.com.col,n=this.shootBubble.com.row;c.bubbleTowArray[n][i]&&n<2&&(t=!0)}if(!t){for(var o=-1,s=h;s<l;++s){for(var u=0;u<r;++u)if(e[s][u]){o=s;break}if(o>=0)break}var d=c.getLvScale(4);if(a.curShootNum%c.getLvScale(5)==0)this.canPut=!0,0<=o&&d+h>o&&(t=!0);else this.checkCanPut();Math.isNumberNoNan(this.lastFirstRow)||(this.lastFirstRow=l),o===h+d+2&&this.lastFirstRow>o&&GameMng.popPropBox(),this.lastFirstRow=o}t&&(a.gameState=GameState.GAME_OVER,a.saveAllData())},checkCanPut:function(){var t=c.bubbleTowArray;this.canPut=!0;for(var e=l-3,i=0;i<r;++i)if(t[e][i]){this.canPut=!1;break}},updateShotBubble:function(){if(this.shootBubble)if(this.shootBubble.com.bubbleType===BubbleType.BUBBLE_LASER)console.log("updateShotBubble shootBubble"),this.laserClearBubble(),this.findDownBubble(),this.doClearBobble(),this.checkState(),this.shootBubble.com.remove(),this.shootBubble=null;else for(var t=f/10,e=0;e<10;e++){var i=cc.v2(this.shootBubble.x,this.shootBubble.y);if(this.isHitBorder(i)&&(this.m_real.x=-this.m_real.x),i=cc.v2(i.x+this.m_real.x*t,i.y+this.m_real.y*t),this.shootBubble.position=i,this.isHitTop(i)||this.isHitBubbleList(i)){this.stopShotBubbleUpdate(),this.findHitBubble(this.shootBubble)&&this.findDownBubble(),this.doClearBobble(),this.checkState(),this.shootBubble=null;break}}},stopShotBubbleUpdate:function(){var t=this.shootBubble.getPosition(),e=c.getRowAndColByPos(t.x,t.y);if(c.bubbleTowArray[e.x][e.y]){var i=9999;c.getAround(e.x,e.y).forEach(function(n){if(!c.bubbleTowArray[n.x][n.y]){var o=c.getPosByRowAndCol(n.x,n.y),s=Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2);s<i&&(i=s,e=n)}})}c.bubbleTowArray[e.x][e.y]=this.shootBubble,this.shootBubble.com.setIndex(e.x,e.y),t=this.shootBubble.position;var n=cc.v2(t.x+20*this.m_real.x,t.y+20*this.m_real.y);AudioMng.playEffect("collision"),this.shootBubble.runAction(cc.sequence(cc.moveTo(.13,n),cc.moveTo(.13,t).easing(cc.easeBackOut()))),c.getAroundBubble(e.x,e.y).forEach(function(e){var i=cc.v2(e.x,e.y),n=i.sub(t).normalizeSelf(),o=cc.v2(i.x+24*n.x,i.y+24*n.y);e.runAction(cc.sequence(cc.moveTo(.14,o),cc.moveTo(.14,i).easing(cc.easeBackOut())))})},findHitBubble:function(t){switch(this.saveColorList=[],this.giftList=this.findGiftBubble(t),t.com.bubbleType){case BubbleType.BUBBLE_MAGIC:this.saveColorList=this.findMagicClearBubble(t);break;default:this.saveColorList=this.findSameBubble(t)}var e=this.saveColorList.length>0||this.giftList.length>0;return e&&(-1===this.saveColorList.indexOf(t)&&this.saveColorList.push(t),c.bubbleTowArray[t.com.row][t.com.col]=null),e},findSameBubble:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,i=c.bubbleTowArray,n=[];n.push(t),t.isFinded=!0;for(var o=function(t){var e=n[t].com;c.getAroundBubble(e.row,e.col).forEach(function(t){t.com.bubbleType===e.bubbleType&&(t.isFinded||(t.isFinded=!0,n.push(t)))})},s=0;s<n.length;++s)o(s);var a=n.length>=e;return n.forEach(function(t){a&&(i[t.com.row][t.com.col]=null),t.isFinded=!1}),a||(n=[]),n},findGiftBubble:function(t){var e=[];return c.getAroundBubble(t.com.row,t.com.col).forEach(function(t){t.com.bubbleType===BubbleType.BUBBLE_GIFT&&(c.bubbleTowArray[t.com.row][t.com.col]=null,e.push(t))}),e},findMagicClearBubble:function(t){var e=this,i=[];return i.push(t),c.getAroundBubble(t.com.row,t.com.col).forEach(function(t){t.com.bubbleType!==BubbleType.BUBBLE_GIFT&&i.concatSelf(e.findSameBubble(t,1))}),i},clearDoubleBubble:function(){for(var t=this,e=[],i=void 0,n=h;n<l;++n){for(var o=0;o<r;++o)if(c.bubbleTowArray[n][o]){i||(i=c.bubbleTowArray[n][o].position),e.push(n);break}if(2===e.length)break}i&&(i=cc.v2(0,i.y+d),this.playShanDianEffect(i)),e.forEach(function(e){for(var i=0;i<r;++i){var n=c.bubbleTowArray[e][i];n&&(t.updateScore(100,n.position),n.com.bubbleType===BubbleType.BUBBLE_GIFT&&GameMng.popGift(),n.com.remove(),c.bubbleTowArray[e][i]=null)}}),this.scheduleOnce(function(){t.canPut&&(t.canPut=!1,t.putNewRowBubble(c.getLvScale(4)))},.2),e.length>0&&this.checkCanPut()},laserClearBubble:function(){this.playLaserEffect(this.shootAngle),this.removeLaserTagEffect();var t=c.bubbleTowArray;this.laserTagList.forEach(function(e){t[e.com.row][e.com.col]=null})},findDownBubble:function(){for(var t=[],e=[],i=0;i<r;++i){var n=c.bubbleTowArray[l-1][i];n&&(n.com.isAdded=!0,t.push(n))}if(t.length>0)for(var o=0;o<t.length;++o){var s=t[o].com;c.getAroundBubble(s.row,s.col).forEach(function(e){e&&(e.com.isAdded||(t.push(e),e.com.isAdded=!0))})}for(var a=h;a<l;a++)for(var u=0;u<r;u++){var d=c.bubbleTowArray[a][u];d&&(d.com.isAdded?d.com.isAdded=!1:(e.push(d),d.com.bubbleType===BubbleType.BUBBLE_GIFT&&GameMng.popGift(),c.bubbleTowArray[a][u]=null))}this.downList=e},doClearBobble:function(){var t=this,e=c.bubbleTowArray,i=this.saveColorList.length+this.downList.length,n=Math.floor(i/5),o=5*n;if(o>0){var s=void 0;(s=this.saveColorList.length>=o?this.saveColorList[0]:this.downList[0])?s.com.removeCf=function(e){t.playLianJiEffect(n,e)}:console.log("effectIndex "+o+" lianJiNum "+i+" effectLv "+n)}var r=.1;if(this.saveColorList.length>0){var l=.18;this.saveColorList.forEach(function(i){var n=i.position;e[i.com.row][i.com.col]=null,i.runAction(cc.sequence(cc.delayTime(l),cc.callFunc(function(){t.updateScore(100,n),AudioMng.playEffect("bubble_switch"),t.playBaoZhaEffect(n),i.com.remove()}))),l+=.07}),r=l,this.saveColorList=[]}this.downList.length>0&&setTimeout(function(){t.downList.forEach(function(e){var i=40*Math.getRandom(-1,1),n=e.x+i,o=cc.v2(n,t._limitY),s=(e.y-t._limitY)/(700+3*i);e.stopAllActions(),e.runAction(cc.sequence(cc.moveTo(s,o).easing(cc.easeSineInOut()),cc.callFunc(function(){t.updateScore(100,o),t.playBaoZhaEffect(o),e.com.remove()})))}),t.downList=[]},200),this.laserTagList.length>0&&(this.laserTagList.forEach(function(e){t.updateScore(100,e.position),e.com.bubbleType===BubbleType.BUBBLE_GIFT&&GameMng.popGift(),e.com.remove()}),this.laserTagList=[]),this.giftList.length>0&&(this.giftList.forEach(function(e){t.updateScore(100,e.position),e.com.remove()}),GameMng.popGift(),this.giftList=[]),setTimeout(function(){t.createWaitBubble()},200),this.scheduleOnce(function(){t.canPut&&(t.canPut=!1,t.putNewRowBubble(c.getLvScale(4))),t.scheduleOnce(function(){a.gameState===GameState.GAME_OVER?GameMng.popFail():a.gameState=GameState.GAME_ING},.2)},r)},showLine2:function(t,e){this.linePanel.active=!0;for(var i=!1,n=e.sub(t).normalizeSelf(),o=t,s=1;s<this._line_maxPointNum&&!i;s++){o=cc.v2(o.x+n.x*this._shotSpeed,o.y+n.y*this._shotSpeed);var a=this._lineDotList[s-1];a||(a=this.createDot(),console.log("createDot ",a)),a.position=cc.v2(this.xReflectFun(o.x),o.y),s>2&&this.isHitBubbleList(a.position)&&(i=!0)}for(;s<=this._lineDotList.length;++s)this._lineDotList[s-1].com.remove()},showLine:function(t,e,i){var n=this;this.linePanel.active=!0;var o=this.getPointList(t,e,45,i,this._line_maxPointNum),s=0,a=this.readyBubble?this.readyBubble.getComponent(cc.Sprite).spriteFrame:null;if(o.forEach(function(t){var e=n._lineDotList[s-1];e||(e=n.createDot()),e.position=t,a&&(e.getComponent(cc.Sprite).spriteFrame=a),s++}),this._lineDotList.length>0)for(;s<=this._lineDotList.length;++s)this._lineDotList[s-1].com.remove()},hideLine:function(){this.setNullAllDots(),this.linePanel.active=!1},showLaser:function(t,e){this.removeLaserTagEffect(),this.laserTagList=[];for(var i=c.bubbleTowArray,n=Math.getLinePara2(t.x,t.y,e.x,e.y),o=40*Math.sqrt(Math.pow(n.a,2)+Math.pow(n.b,2)),s=h;s<l;++s)for(var a=i[s],u=0;u<r;++u){var d=a[u];if(d)Math.abs(n.a*d.x+n.b*d.y+n.c)<o&&(this.laserTagList.push(d),this.playLaserTagEffect(d.position))}},clearGame:function(){this.setNullAllBubble(),this.hideLine(),this.effectPanel.getChildren().forEach(function(t){t.active&&(t.com?t.com.remove():t.active=!1)}),this.removeLaserTagEffect(),this.setNullList()},setNullList:function(){this.saveColorList=[],this.giftList=[],this.downList=[],this.laserTagList=[]},getPointList:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:9999999,s=[],a=e.sub(t).normalizeSelf();this.m_real=a;for(var c=t,r=1;r<o;r++){c=cc.v2(c.x+a.x*i,c.y+a.y*i);var l=cc.v2(n?c.x:this.xReflectFun(c.x),c.y);if(r>0){if(this.isHitTop(l)||!n&&this.isHitBubbleList(l))break;s.push(l)}}return s},xReflectFun:function(t){if(t<0&&t<-this._shootToBorderXD){var e=-(t+this._shootToBorderXD);t=-this._shootToBorderXD+e}else if(t>0&&t>this._shootToBorderXD){var i=t-this._shootToBorderXD;t=this._shootToBorderXD-i}return t>=-this._shootToBorderXD&&t<=this._shootToBorderXD?t:this.xReflectFun(t)},isHitBubbleList2:function(t){},isHitBubbleList:function(t){for(var e=2;e<l;++e)for(var i=c.bubbleTowArray[e],n=0;n<r;++n){var o=i[n];if(o&&this.isHitBubble(t,o))return cc.v2(e,n)}},isHitBubble:function(t,e){var i=e.getPosition();return Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)<g},isHitBorder:function(t){var e=this.visibleSize.width/2-u;return t.x<0?t.x<-e:t.x>e},isHitTop:function(t){return t.y>this._topY},initBubbleList:function(t,e){(t>l||e>r)&&cc.error("function initBubbleList rowNum or colNum error");for(var i=c.bubbleTowArray,n=t+h;n<l;++n)for(var o=0;o<r;++o){var s=this.createBubble();s.com.setType(c.getRandomBubble(n,o)),s.com.setIndex(n,o),i[n][o]=s}},useMagic:function(){this.readyBubble.com.setType(BubbleType.BUBBLE_MAGIC)},useLaser:function(){this.readyBubble.com.setType(BubbleType.BUBBLE_LASER)},initLastBubbleList:function(){for(var t=c.lastMission,e=c.bubbleTowArray,i=h;i<l;++i)for(var n=0;n<r;++n){var o=t[i][n];if(o){var s=this.createBubble();s.com.setType(o),s.com.setIndex(i,n),e[i][n]=s}}},initEquip:function(t){this.waitBubble.com=this.waitBubble.getComponent("BubbleBase"),this.readyBubble.com=this.readyBubble.getComponent("BubbleBase"),this.waitBubble.com.setType(t[0]),this.readyBubble.com.setType(t[1]),this.waitBubble.active=!0,this.readyBubble.active=!0,this.updateSkin(SkinDataHandler.Instant.curSkin)},initLastEquip:function(){var t=a.lastGameData.equipList,e=t[0];t[1]&&e||(t=c.getEquipBubble(2)),this.initEquip(t)},updateSkin:function(t){if(t&&SkinDataHandler.Instant.isValidId(t)){if(this.skin=t,this.petSpine&&this.petSpine.id!==t&&(this.petSpine.remove(),this.petSpine=null),!this.petSpine){var e=GameMng.getPet(t);e.parent=this.shootNode,e.zIndex=3,this.petSpine=e.com}this.readyBubble.position=this.waitBubble.position=this.otherSkin.position,this.petSpine.playInitEquip(this),this.defaultSkin.active=!1,this.otherSkin.active=!0,this.paoTai.getComponent(cc.Sprite).spriteFrame=FileUtils.Instant.getTextureByName("paoTai_"+t),_=-20,this._ready_pos=cc.v2(this.shootNode.x,this.shootNode.y+_),v=this._ready_pos.y+90}else this.petSpine&&(this.petSpine.remove(),this.petSpine=null),this.skin=0,_=60,this._ready_pos=cc.v2(this.shootNode.x,this.shootNode.y+_),v=this._ready_pos.y+30,this.defaultSkin.active=!0,this.otherSkin.active=!1,this.waitBubble.scale=this.readyBubble.scale=0,this.waitBubble.opacity=this.readyBubble.opacity=255,this.readyBubble.position=cc.v2(0,60),this.waitBubble.position=cc.v2(-60,0),this.waitBubble.stopAllActions(),this.readyBubble.stopAllActions(),this.waitBubble.runAction(cc.scaleTo(.3,Constant.WaitBubbleScale).easing(cc.easeElasticOut(1))),this.readyBubble.runAction(cc.scaleTo(.3,Constant.ReadyBubbleScale).easing(cc.easeElasticOut(1)))},changeEquip:function(){var t=this;if(this.canTouch&&(this.canTouch=!1,this.waitBubble&&this.readyBubble)){var e=this.readyBubble;if(this.readyBubble=this.waitBubble,this.waitBubble=e,this.skin)this.petSpine.playChangeEquip();else{setTimeout(function(){t.canTouch=!0},370);var i=cc.v2(0,60),n=cc.v2(-60,0);this.waitBubble.zIndex=0,this.readyBubble.zIndex=1,this.waitBubble.runAction(cc.spawn(cc.moveTo(.18,n),cc.scaleTo(.18,Constant.WaitBubbleScale))),this.readyBubble.runAction(cc.spawn(cc.moveTo(.18,i),cc.scaleTo(.18,Constant.ReadyBubbleScale)))}}},createWaitBubble:function(){var t=this,e=c.getEquipBubble(1);if(this.readyBubble.active=!0,this.readyBubble.com.setType(e[0]),this.canTouch&&(this.canTouch=!1,this.waitBubble&&this.readyBubble)){var i=this.readyBubble;if(this.readyBubble=this.waitBubble,this.waitBubble=i,this.skin)this.petSpine.playCreateEquip();else{setTimeout(function(){t.canTouch=!0},370),this.waitBubble.scale=0;var n=cc.v2(0,60),o=cc.v2(-60,0);this.waitBubble.zIndex=0,this.readyBubble.zIndex=1,this.waitBubble.runAction(cc.spawn(cc.moveTo(.18,o),cc.scaleTo(.18,Constant.WaitBubbleScale))),this.readyBubble.runAction(cc.spawn(cc.moveTo(.18,n),cc.scaleTo(.18,Constant.ReadyBubbleScale)))}}},createBubble:function(){var t=this._bubblePool.get();if(!t){var e=(t=cc.instantiate(FileUtils.Instant.getPrefabByName("bbBase"))).getComponent("BubbleBase");e.pool=this._bubblePool,e.list=this._bubbleList,t.com=e,t.parent=this.bubblePanel}return t},createBaoZha:function(){var t=this._baoZhaPool.get();if(!t){var e=(t=cc.instantiate(FileUtils.Instant.getPrefabByName("baozha_ske"))).getComponent("DragonBonesBase");e.pool=this._baoZhaPool,t.com=e,t.parent=this.effectPanel}return t},createShanDian:function(){var t=this._shanDianPool.get();if(!t){var e=(t=cc.instantiate(FileUtils.Instant.getPrefabByName("shandian_ske"))).getComponent("DragonBonesBase");e.pool=this._shanDianPool,t.com=e,t.parent=this.effectPanel}return t},createLaser:function(){var t=this._laserEffectPool.get();if(!t){var e=(t=cc.instantiate(FileUtils.Instant.getPrefabByName("laserSkeNodeAnim"))).getComponent("PoolNodeBase");e.pool=this._laserEffectPool,t.com=e,t.parent=this.effectPanel}return t},createLaserTag:function(){var t=this._laserTagPool.get();if(!t){var e=(t=cc.instantiate(FileUtils.Instant.getPrefabByName("laserTag"))).getComponent("PoolNodeBase");e.pool=this._laserTagPool,e.list=this._laserTagList,t.com=e,t.parent=this.effectPanel}return t},playBaoZhaEffect:function(t){var e=this.createBaoZha();e.position=t,e.com.playAnimation("Sprite",1,.8),this.scheduleOnce(function(){e.com.remove()},1)},playShanDianEffect:function(t){AudioMng.playEffect("bubble_lightning");var e=this.createShanDian();e.position=t,e.com.playAnimation("Sprite",3,1.2),this.scheduleOnce(function(){e.com.remove()},.5)},playLaserEffect:function(t){var e=this.createLaser();e.position=this._ready_pos,e.rotation=-t;var i=e.getChildByName("jiguangpao_anim").getComponent(cc.Animation);i.resume(),i.play(),setTimeout(function(){e.com.remove()},500)},playLaserTagEffect:function(t){this.createLaserTag().position=t},playLianJiEffect:function(t,e){if(!(t<1)){var i=void 0,n=void 0;1===t?(i="cool",n="cool"):2===t?(i="good",n="great"):3===t?(i="beautiful",n="nice"):t>=4&&(i="great",n="super");var o=this.textEffectDgb.node;o.active=!0,o.position=e,o.x+.5*o.width>.5*p?o.x=.5*p-.2*o.width:o.x-.5*o.width<.5*-p&&(o.x=.5*-p+.2*o.width),console.log("idx ",i),this.textEffectDgb.playAnimation(i,1),AudioMng.playEffect(n)}},removeLaserTagEffect:function(){for(var t=this._laserTagList.length-1;t>=0;--t)this._laserTagList[t].com.remove()},bubbleListMove:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1;c.basePos.addSelf(t);for(var s=c.bubbleTowArray,a=h;a<l;++a){for(var u=s[a],d=0;d<r;++d){var f=u[d];f&&f.runAction(cc.sequence(cc.delayTime(n),cc.moveBy(e,t)))}n+=o}this._bubbleIsMoving=!0,console.log("bubbleListMove this._bubbleIsMoving = true"),setTimeout(function(){i._bubbleIsMoving=!1,console.log("bubbleListMove this._bubbleIsMoving = false")},1e3*(n+e))},putNewRowBubble:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.3;this.scheduleOnce(function(){c.style+=t;for(var n=h,o=c.bubbleTowArray,s=c.getHByBubbleRow(t),a=n;a<l;++a)for(var u=o[a],d=0;d<r;++d){var f=u[d];if(f){o[a-t][d]=f,o[a][d]=null;var p=f.position;f.com.setIndex(a-t,d);var g=f.position;f.position=p,f.runAction(cc.moveTo(i,g))}}for(var _=n=l-t;_<l;++_)for(var v=0;v<r;++v){var m=e.createBubble();m.com.setType(c.getRandomBubble(_,v)),m.com.setIndex(_,v),o[_][v]=m,m.y+=s,m.runAction(cc.moveBy(i,cc.v2(0,-s)))}},n),this._bubbleIsMoving=!0,console.log("putNewRowBubble this._bubbleIsMoving = true"),setTimeout(function(){e._bubbleIsMoving=!1,console.log("putNewRowBubble this._bubbleIsMoving = false")},1e3*(n+i))},setNullAllBubble:function(){for(var t=this._bubbleList.length-1;t>=0;--t)this._bubbleList[t].com.remove()},createDot:function(){var t=this._lineDotPool.get();if(!t){var e=(t=cc.instantiate(FileUtils.Instant.getPrefabByName("dot"))).getComponent("LineDotBase");e.pool=this._lineDotPool,e.list=this._lineDotList,t.com=e,t.parent=this.linePanel}var i=this._lineDotList.length%2?cc.sequence(cc.scaleTo(.6,1),cc.scaleTo(.6,.5)):cc.sequence(cc.scaleTo(.6,.5),cc.scaleTo(.6,1));return t.runAction(cc.repeatForever(i)),t},setNullAllDots:function(){for(var t=this._lineDotList.length-1;t>=0;--t)this._lineDotList[t].com.remove()},createScoreAdd:function(){var t=this._scoreAddPool.get();if(!t){var e=(t=cc.instantiate(FileUtils.Instant.getPrefabByName("scoreAddBase"))).getComponent("ScoreAddBase");e.pool=this._scoreAddPool,t.com=e,t.parent=this.effectPanel}return t},createPropNumAdd:function(){var t=this._propNumAddPool.get();if(!t){var e=(t=cc.instantiate(FileUtils.Instant.getPrefabByName("propAddBase"))).getComponent("ScoreAddBase");e.pool=this._propNumAddPool,t.com=e,t.parent=this.effectPanel}return t}}),cc._RF.pop()},{DragonBonesBase:"DragonBonesBase",NodeBase:"NodeBase",Server:"Server"}],PoolMng:[function(t,e,i){"use strict";cc._RF.push(e,"664fa7bkTNA6L3lH3T+jGma","PoolMng"),cc._RF.pop()},{}],PoolNodeBase:[function(t,e,i){"use strict";cc._RF.push(e,"fa550MgRb9LEJONuhM31gTo","PoolNodeBase");var n=cc.Class({extends:cc.Component,properties:{pool:{default:null,visible:!1},list:{default:null,visible:!1}},onEnable:function(){var t=this;this.list&&this.list.push(this.node),this.scheduleOnce(function(){t.show()},.01)},onDisable:function(){this.list&&this.list.remove(this.node),this.hide()},remove:function(){this.node.name="",this.node.stopAllActions(),this.pool&&this.pool.put(this.node)},show:function(){},hide:function(){}});e.exports=n,cc._RF.pop()},{}],PopLayerBase:[function(t,e,i){"use strict";cc._RF.push(e,"eecc1TzLzdKBJOQ90wE5I5L","PopLayerBase");var n=cc.Enum({NONE:0,SCALE:1,DOWN:2,FADE:3,ROTATE:4,LEFT_RIGHT:5,SCALE_FADE:6,SLIDE_IN_RIGHT:7,SLIDE_IN_BOTTOM:8,FLIP_HORIZONTAL:9,FLIP_VERTICAL:10,JELLY:11,BOTTOM_TOP:12});window.PopType=n;var o=[["normalShow","normalClose"],["scaleShow","scaleClose"],["downShow","downClose"],["fadeShow","fadeClose"],["rotateShow","rotateClose"],["leftRightShow","leftRightClose"],["scaleFadeShow","scaleFadeClose"],["slideInRightShow","slideInRightClose"],["slideInBottomShow","slideInBottomClose"],["flipHorizontalShow","flipHorizontalClose"],["flipVerticalShow","flipVerticalClose"],["jellyShow","fadeClose"],["bottomTopShow","bottomTopClose"]];cc.Class({extends:t("NodeBase"),properties:{bg:cc.Node,window:cc.Node,popType:{default:n.SCALE,type:n},effectTime:{default:.25},needCloseEventButtons:[cc.Button],_buttonEventMap:null,_closeData:null,needInputLayer:!0,_inputLayer:null,_windowX:0,_windowY:0,closeCallbacks:{default:[],type:cc.Component.EventHandler},_customCloseCallbacks:[]},onLoad:function(){this.node.zIndex=10,this._windowX=this.window.x,this._windowY=this.window.y,this._pushCloseEvent()},start:function(){},onEnable:function(){},onDisable:function(){},onDestroy:function(){this._inputLayer&&(this._inputLayer=null)},_addInputLayer:function(){var t=new cc.Node("input");t.position=cc.v2(0,0),t.width=this.node.width,t.height=this.node.height,t.addComponent(cc.BlockInputEvents),this.node.addChild(t,10),this._inputLayer=t},_pushCloseEvent:function(){this._buttonEventMap=new Map;var t=0,e=!0,i=!1,n=void 0;try{for(var o,s=this.needCloseEventButtons[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var a=o.value,c=new cc.Component.EventHandler;c.target=this.node,c.component="PopLayerBase",c.handler="close",c.customEventData="close"+t,this._buttonEventMap.set(c.customEventData,a.clickEvents.slice()),a.clickEvents=[],a.clickEvents.push(c),t++}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}},setCustomCloseCallback:function(t,e){this._customCloseCallbacks.push({callback:t,target:e})},show:function(){(AudioMng.playEffect("popBoxEffect"),this.node.active=!0,this.needInputLayer&&(this._inputLayer?this._inputLayer.active=!0:this._addInputLayer()),this.bg&&(this.bgOpacity||(this.bgOpacity=this.bg.opacity),this.bg.opacity=0,this.bg.runAction(cc.fadeTo(this.effectTime,this.bgOpacity))),this.window)?this[o[this.popType][0]]():this._showOver()},close:function(t,e){(this._closeData=e,this._inputLayer&&(this._inputLayer.active=!0),this.bg&&this.bg.runAction(cc.fadeOut(this.effectTime)),this.window)?this[o[this.popType][1]]():this._closeOver()},_showOver:function(){this._inputLayer&&(this._inputLayer.active=!1)},_closeOver:function(){if(this._closeData){var t=this._buttonEventMap.get(this._closeData);cc.Component.EventHandler.emitEvents(t,this)}if(this.closeCallbacks.length>0&&cc.Component.EventHandler.emitEvents(this.closeCallbacks,this),this._customCloseCallbacks.length>0){var e=!0,i=!1,n=void 0;try{for(var o,s=this._customCloseCallbacks[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var a=o.value;a.callback.call(a.target)}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}}this.node.active=!1},normalShow:function(){this._showOver()},normalClose:function(){this._closeOver()},scaleShow:function(){var t=this;this.window.scale=0,this.window.runAction(cc.sequence(cc.scaleTo(this.effectTime,1).easing(cc.easeElasticOut(.6)),cc.callFunc(function(e){t.window.scale=1,t._showOver()})))},scaleClose:function(){var t=this;this.window.runAction(cc.sequence(cc.scaleTo(this.effectTime,0).easing(cc.easeElasticIn(.6)),cc.callFunc(function(e){t.window.scale=0,t._closeOver()})))},downShow:function(){var t=this;this.window.y=this.node.height/2+this.window.height/2+50,this.window.runAction(cc.sequence(cc.moveTo(this.effectTime,0,this._windowY).easing(cc.easeElasticOut(.8)),cc.callFunc(function(e){t.window.y=t._windowY,t._showOver()})))},downClose:function(){var t=this,e=this.node.height/2+this.window.height/2+50;this.window.runAction(cc.sequence(cc.moveTo(this.effectTime,0,e).easing(cc.easeElasticIn(.8)),cc.callFunc(function(i){t.window.y=e,t._closeOver()})))},fadeShow:function(){var t=this;this.window.opacity=0,this.window.runAction(cc.sequence(cc.fadeIn(this.effectTime,1),cc.callFunc(function(e){t.window.opacity=255,t._showOver()})))},fadeClose:function(){var t=this;this.window.runAction(cc.sequence(cc.fadeOut(this.effectTime,1),cc.callFunc(function(e){t.window.opacity=0,t._closeOver()})))},rotateShow:function(){var t=this,e=this.window.height,i=-this.node.height/2,n=-(this._windowY-e/2-i)/e;console.log("anchorValue, ",n,i),this.window.rotation=-145,this.window.runAction(cc.sequence(cc.rotateTo(this.effectTime,0).easing(cc.easeElasticOut(.7)),cc.callFunc(function(e){t.window.rotation=0,t._showOver()})))},rotateClose:function(){var t=this;this.window.runAction(cc.sequence(cc.rotateTo(this.effectTime,145).easing(cc.easeElasticIn(.7)),cc.callFunc(function(e){t.window.rotation=145,t._closeOver()})))},leftRightShow:function(){var t=this,e=-this.node.width/2-this.window.width/2-50;this.window.x=e,this.window.runAction(cc.sequence(cc.moveTo(this.effectTime,this._windowX,this._windowY).easing(cc.easeElasticOut(.8)),cc.callFunc(function(e){t.window.x=t._windowX,t._showOver()})))},leftRightClose:function(){var t=this,e=this.node.width/2+this.window.width/2+50;this.window.runAction(cc.sequence(cc.moveTo(this.effectTime,e,this._windowY).easing(cc.easeElasticIn(.8)),cc.callFunc(function(i){t.window.x=e,t._closeOver()})))},scaleFadeShow:function(){var t=this;this.window.opacity=0,this.window.scale=5,this.window.runAction(cc.sequence(cc.spawn(cc.scaleTo(this.effectTime,1),cc.fadeIn(this.effectTime)),cc.callFunc(function(e){t.window.scale=1,t.window.opacity=255,t._showOver()})))},scaleFadeClose:function(){var t=this;this.window.runAction(cc.sequence(cc.spawn(cc.scaleTo(this.effectTime,5),cc.fadeOut(this.effectTime)),cc.callFunc(function(e){t.window.scale=5,t.window.opacity=0,t._closeOver()})))},slideInRightShow:function(){var t=this;this.window.opacity=0,this.window.x=this._windowX+50,this.window.runAction(cc.sequence(cc.spawn(cc.moveTo(this.effectTime,this._windowX,this._windowY),cc.fadeIn(this.effectTime-.1)),cc.callFunc(function(e){t.window.x=t._windowX,t.window.opacity=255,t._showOver()})))},slideInRightClose:function(){var t=this;this.window.runAction(cc.sequence(cc.spawn(cc.moveTo(this.effectTime,this._windowX+50,this._windowY),cc.fadeOut(this.effectTime-.1)),cc.callFunc(function(e){t.window.opacity=0,t._closeOver()})))},slideInBottomShow:function(){var t=this;this.window.opacity=0,this.window.y=this._windowY-50,this.window.runAction(cc.sequence(cc.spawn(cc.moveTo(this.effectTime,this._windowX,this._windowY),cc.fadeIn(this.effectTime)),cc.callFunc(function(e){t.window.y=t._windowY,t.window.opacity=255,t._showOver()})))},slideInBottomClose:function(){var t=this;this.window.runAction(cc.sequence(cc.spawn(cc.moveTo(this.effectTime,this._windowX,this._windowY-50),cc.fadeOut(this.effectTime)),cc.callFunc(function(e){t.window.opacity=0,t._closeOver()})))},flipHorizontalShow:function(){var t=this;this.window.opacity=0,this.window.scaleY=0,this.window.runAction(cc.sequence(cc.spawn(cc.scaleTo(this.effectTime,1,1),cc.fadeIn(this.effectTime)),cc.callFunc(function(e){t.window.scaleY=1,t.window.opacity=255,t._showOver()})))},flipHorizontalClose:function(){var t=this;this.window.runAction(cc.sequence(cc.spawn(cc.scaleTo(this.effectTime,1,0),cc.fadeOut(this.effectTime)),cc.callFunc(function(e){t.window.opacity=0,t.window.scaleY=0,t._closeOver()})))},flipVerticalShow:function(){var t=this;this.window.opacity=0,this.window.scaleX=0,this.window.runAction(cc.sequence(cc.spawn(cc.scaleTo(this.effectTime,1,1),cc.fadeIn(this.effectTime-.1)),cc.callFunc(function(e){t.window.scaleX=1,t.window.opacity=255,t._showOver()})))},flipVerticalClose:function(){var t=this;this.window.runAction(cc.sequence(cc.spawn(cc.scaleTo(this.effectTime,0,1),cc.fadeOut(this.effectTime-.1)),cc.callFunc(function(e){t.window.opacity=0,t.window.scaleX=0,t._closeOver()})))},jellyShow:function(){var t=this,e=this.effectTime-.5;e=e<.1?.1:e,this.window.opacity=255,this.window.scaleX=this.window.scaleY=0,this.window.runAction(cc.sequence(cc.scaleTo(e,1),cc.scaleTo(.1,1.05,.95),cc.scaleTo(.1,.95,1.05),cc.scaleTo(.11,1.02,.98),cc.scaleTo(.11,.98,1.02),cc.scaleTo(.12,1),cc.callFunc(function(e){e.scaleX=e.scaleY=1,t._showOver()})))},bottomTopShow:function(){var t=this,e=.5*-(this.node.height+this.window.height);this.window.y=e,this.window.stopAllActions(),this.window.runAction(cc.sequence(cc.moveTo(this.effectTime,this.window.position.x,0).easing(cc.easeElasticOut(.8)),cc.callFunc(function(){t._showOver()})))},bottomTopClose:function(){var t=this,e=.5*(this.node.height+this.window.height);this.window.y=0,this.window.stopAllActions(),this.window.runAction(cc.sequence(cc.moveTo(this.effectTime,this.window.position.x,e).easing(cc.easeElasticIn(.8)),cc.callFunc(function(){t._closeOver()})))}}),cc._RF.pop()},{NodeBase:"NodeBase"}],PrefabMng:[function(t,e,i){"use strict";cc._RF.push(e,"57a8dxpcGpF55VFm5ShvJCr","PrefabMng");var n=cc.Class({name:"prefabObj",properties:{key:"NotName",value:{type:cc.Asset,default:null}}});cc.Class({extends:MngBase,properties:{prefabResArray:[n],pieceResArray:[n]},onLoad:function(){void 0===window.PrefabMng&&(window.PrefabMng=this),this.prefabResMap=new Map,this.objArrayConvertMay(this.prefabResArray,this.prefabResMap),this.prefabResArray.length=0,this.pieceResMap=new Map,this.objArrayConvertMay(this.pieceResArray,this.pieceResMap),this.pieceResArray.length=0},createComByFab:function(t,e,i){var n=cc.instantiate(FileUtils.Instant.getPrefabByName(t));return n.parent=i,n.getComponent(e)},getPrefabByName:function(t){return this.prefabResMap.get(t)},getPieceByName:function(t){return this.pieceResMap.get(t)}}),cc._RF.pop()},{}],PropBox2:[function(t,e,i){"use strict";cc._RF.push(e,"a546a2+o4tGrri2ZSu8yDGZ","PropBox2");var n=t("PopLayerBase");cc.Class({extends:n,properties:{getBtnSpr:cc.Sprite,propSpr:cc.Sprite,toastLb:cc.Label},onLoad:function(){this.nodeType=NodeType.PAUSE_POP},show:function(t){this.node.active=!0,n.prototype.show.call(this),this.canTouch=!0,this.prop=t,this.refreshProp(),this.refreshGetFunc(),this.onShow()},close:function(){n.prototype.close.call(this),this.onHide()},_closeOver:function(){n.prototype._closeOver.call(this),this.node.active=!1},skip:function(){this.node.active=!1,this.onHide()},refreshProp:function(){switch(this.prop){case GainPos.Magic:this.SharePos=SharePos.MAGIC,this.propSpr.spriteFrame=FileUtils.Instant.getTextureByName("magic_icon"),this.toastString='%s\u83b7\u5f971\u4e2a"\u9b54\u6cd5\u7403"\u53ef\u4ee5\u6d88\u9664\u89e6\u78b0\u7684\u6ce1\u6ce1',this.failToastString="\u4eb2! \u9b54\u6cd5\u7403\u9053\u5177\u672c\u5c40\u6b21\u6570\u5df2\u7528\u5b8c!";break;case GainPos.Double:this.SharePos=SharePos.DOUBLE,this.propSpr.spriteFrame=FileUtils.Instant.getTextureByName("double_icon"),this.toastString='%s\u83b7\u5f971\u4e2a"\u6d88\u53cc\u884c"\u53ef\u4ee5\u6d88\u9664\u6700\u5e95\u4e0b\u4e24\u884c\u6ce1\u6ce1',this.failToastString="\u4eb2! \u6d88\u53cc\u884c\u9053\u5177\u672c\u5c40\u6b21\u6570\u5df2\u7528\u5b8c!";break;case GainPos.Laser:this.SharePos=SharePos.LASER,this.propSpr.spriteFrame=FileUtils.Instant.getTextureByName("laser_icon"),this.toastString='%s\u83b7\u5f971\u4e2a"\u6fc0\u5149\u70ae" \u6d88\u9664\u6fc0\u5149\u7ecf\u8fc7\u7684\u6240\u6709\u6ce1\u6ce1',this.failToastString="\u4eb2! \u6fc0\u5149\u70ae\u9053\u5177\u672c\u5c40\u6b21\u6570\u5df2\u7528\u5b8c!"}},refreshGetFunc:function(){switch(this.getFuncType=WxSDK.canGetProp(this.prop)?WxSDK.getGainFuncType(this.prop):GainFuncType.NOT,this.getFuncType){case GainFuncType.SHARE:this.getBtnSpr.spriteFrame=FileUtils.Instant.getTextureByName("dg_share"),this.toastLb.string=this.toastString.replace("%s","\u514d\u8d39");break;case GainFuncType.VIDEO:this.getBtnSpr.spriteFrame=FileUtils.Instant.getTextureByName("dg_video"),this.toastLb.string=this.toastString.replace("%s","\u89c2\u770b\u89c6\u9891");break;default:ToastMng.showToast(this.failToastString,1.5),this.skip()}},getGain:function(){GameMng.playLy&&GameMng.playLy.updateProp(this.prop,1),GameDataHandler.Instant.updateOnePlayPropTimes(this.prop),this.close()},getByVideo:function(){var t=this;this.canTouch=!1,WxSDK.videoGain(function(){t.getGain(),t.canTouch=!0},function(){t.refreshGetFunc(),t.canTouch=!0},function(){ToastMng.showToast("\u770b\u89c6\u9891\u5931\u8d25\u54e6!",2),t.refreshGetFunc(),t.canTouch=!0})},getByShare:function(){var t=this;this.canTouch=!1,WxSDK.propShare(this.SharePos,function(e){t.getGain()},function(){t.canTouch=!0,t.refreshGetFunc()},function(){t.canTouch=!0},function(){t.canTouch=!0})},clickBtn:function(t,e){if(t.currentTarget.scale=1,this.canTouch)switch(e){case"get":this.testLog("get "),this.getFuncType===GainFuncType.VIDEO?this.getByVideo():this.getFuncType===GainFuncType.SHARE&&this.getByShare();break;case"skip":this.close()}}}),cc._RF.pop()},{PopLayerBase:"PopLayerBase"}],PropBox:[function(t,e,i){"use strict";cc._RF.push(e,"88d148Y4sFEKp8KCMSPUMJW","PropBox");var n=t("PopLayerBase");cc.Class({extends:n,properties:{getBtnSpr:cc.Sprite,propSpr:cc.Sprite,toastSpr:cc.Sprite},onLoad:function(){this.nodeType=NodeType.PAUSE_POP},show:function(){this.node.active=!0,n.prototype.show.call(this),this.canTouch=!0,this.refreshProp(),this.refreshGetFunc(),this.onShow()},close:function(){n.prototype.close.call(this),this.onHide()},_closeOver:function(){n.prototype._closeOver.call(this),this.node.active=!1},refreshProp:function(){switch(this.prop=GameDataHandler.Instant.getProp(),this.prop){case GainPos.Magic:this.propSpr.spriteFrame=FileUtils.Instant.getTextureByName("magic_icon"),this.toastSpr.spriteFrame=FileUtils.Instant.getTextureByName("magic_toast");break;case GainPos.Double:this.propSpr.spriteFrame=FileUtils.Instant.getTextureByName("double_icon"),this.toastSpr.spriteFrame=FileUtils.Instant.getTextureByName("double_toast");break;case GainPos.Laser:this.propSpr.spriteFrame=FileUtils.Instant.getTextureByName("laser_icon"),this.toastSpr.spriteFrame=FileUtils.Instant.getTextureByName("laser_toast");break;default:this.close()}},refreshGetFunc:function(){switch(this.getFuncType=WxSDK.getGainFuncType(this.prop),this.getFuncType){case GainFuncType.SHARE:this.getBtnSpr.spriteFrame=FileUtils.Instant.getTextureByName("dg_share");break;case GainFuncType.VIDEO:this.getBtnSpr.spriteFrame=FileUtils.Instant.getTextureByName("dg_video");break;default:this.close()}},getGain:function(){GameMng.playLy&&GameMng.playLy.updateProp(this.prop,1),GameDataHandler.Instant.updateOnePlayPropTimes(this.prop),this.close()},getByVideo:function(){var t=this;this.canTouch=!1,WxSDK.videoGain(function(){t.getGain(),t.canTouch=!0},function(){t.refreshGetFunc(),t.canTouch=!0},function(){ToastMng.showToast("\u770b\u89c6\u9891\u5931\u8d25\u54e6!",2),t.refreshGetFunc(),t.canTouch=!0})},getByShare:function(){var t=this;this.canTouch=!1,WxSDK.propShare(SharePos.DANGER,function(e){t.getGain()},function(){t.canTouch=!0,t.refreshGetFunc()},function(){t.canTouch=!0},function(){t.canTouch=!0})},clickBtn:function(t,e){if(t.currentTarget.scale=1,this.canTouch)switch(e){case"get":this.testLog("get "),this.getFuncType===GainFuncType.VIDEO?this.getByVideo():this.getFuncType===GainFuncType.SHARE&&this.getByShare();break;case"skip":this.close()}}}),cc._RF.pop()},{PopLayerBase:"PopLayerBase"}],RankCell:[function(t,e,i){"use strict";cc._RF.push(e,"81fb62sbMxB0KQi7lIc+4cx","RankCell");var n=function(t){return t&&t.__esModule?t:{default:t}}(t("viewCell"));cc.Class({extends:n.default,properties:{backSprite:cc.Node,rankLabel:cc.Label,rankSpr:cc.Sprite,avatarImgSprite:cc.Sprite,nickLabel:cc.Label,topScoreLabel:cc.Label,posLabel:cc.Label,posIcon:cc.Node,genderIcon:cc.Sprite,genderSpFrame:[cc.SpriteFrame],defaultIcon:cc.SpriteFrame},start:function(){},init:function(t,e,i,n){var o=e.array[t];this.manager=e.manager;var s=o.rank,a=o.avatar,c=o.nickname||o.name,r=o.score;this.node.zIndex=s,this.rankLabel.string=s,s<4?(this.rankLabel.node.active=!1,this.rankSpr.node.active=!0,this.rankSpr.spriteFrame=FileUtils.Instant.getTextureByName("rank_"+s)):(this.rankLabel.node.active=!0,this.rankSpr.node.active=!1,this.rankLabel.string=s),this.avatarImgSprite.spriteFrame=null,Common.loadImage(this.avatarImgSprite,a),this.nickLabel.string=c,this.topScoreLabel.string=r+"\u5206"},clicked:function(){}}),cc._RF.pop()},{viewCell:"viewCell"}],RankLayer:[function(t,e,i){"use strict";cc._RF.push(e,"8ba575w3WBBOYldepXZ2HWo","RankLayer"),cc._RF.pop()},{}],Rank:[function(t,e,i){"use strict";cc._RF.push(e,"d17f7oVp2lHpYxFiiVc9JkY","Rank");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t){return t&&t.__esModule?t:{default:t}}(t("WxSub"));var s=t("sdk"),a=t("Server"),c=t("PopLayerBase");cc.Class({extends:c,properties:{titleNode:cc.Node,userCell:t("RankCell"),worldView:cc.Node,worldTableView:cc.tableView,worldButton:t("UserInfoBtn"),showSub:o.default,_worldData:null,_ticket:null},onLoad:function(){var t=this;this.node.zIndex=101,console.log("RankPop start "),this.titleNode.on(cc.Node.EventType.TOUCH_START,function(){t.timeNum=(new Date).getTime()}),this.titleNode.on(cc.Node.EventType.TOUCH_END,function(){(new Date).getTime()-t.timeNum>15e3&&NotificationCenter.Instant.post(NotificationMsg.TESTLY_POP)})},show:function(t,e){this.node.active=!0,c.prototype.show.call(this),cc.systemEvent.emit(NotificationMsg.CLUBBTN_DO,!1),this._showType=t,this._ticket=e},_showOver:function(){switch(c.prototype._showOver.call(this),this._showType){case RankType.FriendsRank:this.showFriendRank();break;case RankType.GroupRank:this.showGroupRank(this._ticket);break;case RankType.World:this.showWorld()}},_closeOver:function(){c.prototype._closeOver.call(this),cc.systemEvent.emit(NotificationMsg.CLUBBTN_DO,!0),this.node.active=!1,cc.systemEvent.emit("RankClose"),this.showSub.closeSub()},onEnable:function(){var t=this.worldButton;t&&t.setNormalMode(null)},showFriendRank:function(){this._showType=RankType.FriendsRank,this.showSub.showFriendsRank(),this._toggleCallback(0)},showGroupRank:function(t){this._showType=RankType.GroupRank,this._toggleCallback(2),logTest("shareTicket ",t),this.showSub.showGroupRank(t),setTimeout(function(){},1e3)},showWorld:function(t){if(!IsWx){console.log("IsWx showWorld");var e=GameDataHandler.Instant.bestScore;e>=("string"==typeof s.maxScore?parseInt(s.maxScore):8e5)&&(e=15e4),GameDataHandler.Instant.bestScore=e,t={mine:{rank:9999,name:"\u76db",avatar:null,score:2},list:[{rank:1,name:"aa",avatar:null,score:8797},{rank:2,name:"aaas",avatar:null,score:1136},{rank:3,name:"1211",avatar:null,score:74777},{rank:4,name:"sadfasd",avatar:null,score:113131},{rank:5,name:"cccxvx",avatar:null,score:511631},{rank:6,name:"dfdeeee",avatar:null,score:99959},{rank:8,name:"cccxvx",avatar:null,score:511631},{rank:9,name:"dfdeeee",avatar:null,score:99959},{rank:10,name:"cccxvx",avatar:null,score:511631},{rank:11,name:"dfdeeee",avatar:null,score:99959},{rank:12,name:"cccxvx",avatar:null,score:511631},{rank:13,name:"dfdeeee",avatar:null,score:99959}]}}if(this._showType=RankType.World,this.showSub.closeSub(),this._toggleCallback(1),t){this._worldData=t;var i=this._worldData.mine,n=this._worldData.list;this.refreshList(i,n)}},refreshList:function(t,e){(void 0===e?"undefined":n(e))==Array&&t&&(this._clearWorldView(),this._refreshUserCell(t),this.worldTableView.initTableView(e.length,{array:e,manager:this}))},_refreshUserCell:function(t){this.userCell.active=!0,this.userCell.init(0,{array:[t],manager:this})},_clearWorldView:function(){this.worldTableView.clear(),this.userCell.active=!1},_toggleCallback:function(t){var e=this,i=0;this.worldView.active=1===t;["friend","world","group"].forEach(function(n){var o=t===i,s=cc.find(n,e.titleNode);s&&(s.active=o),i++})},addWorldRankCallback:function(){var t=this,e=this.worldButton;e?(e.createWxBtn(),e.successFunc=function(e){s.showLoading("\u52a0\u8f7d\u4e2d...");var i=GameDataHandler.Instant.bestScore;i>=("string"==typeof s.maxScore?parseInt(s.maxScore):8e5)&&(i=15e4),GameDataHandler.Instant.bestScore=i,a.submitLeaderboard(GameDataHandler.Instant.bestScore,function(e){t.getLeaderboard()},function(t){ToastMng.showToast("\u63d0\u4ea4\u6210\u7ee9\u5230\u4e16\u754c\u6392\u884c\u699c\u5931\u8d25\u4e86!",1.5),s.hideLoading()})},e.failFunc=function(t){ToastMng.showToast("\u9700\u8981\u7528\u6237\u6388\u6743\u624d\u80fd\u67e5\u770b\u4e16\u754c\u6392\u540d\u54e6!",1.5)}):console.log("userInfoBtn not")},getLeaderboard:function(){var t=this;a.getLeaderboard(function(e){if(!(e&&e.data&&e.data.data&&Array.isArray(e.data.data.list)))return console.log("\u4e16\u754c\u6392\u884c\u699c\u6570\u636e\u4e0d\u6b63\u786e: ",e),ToastMng.showToast("\u83b7\u53d6\u4e16\u754c\u6392\u884c\u699c\u5931\u8d25\u4e86!",1.5),void s.hideLoading();t.showWorld(e.data.data),t.worldButton.setNormalMode(function(){console.log("normalMode"),t.showWorld(e.data.data)}),s.hideLoading()},function(t){ToastMng.showToast("\u83b7\u53d6\u4e16\u754c\u6392\u884c\u699c\u5931\u8d25\u4e86!",1.5),s.hideLoading()})},buttonCallback:function(t,e){switch(e){case"group":WxSDK.groupShare(),ToastMng.showToast("\u4eb2\uff01\u70b9\u51fb\u7fa4\u94fe\u63a5\u624d\u80fd\u67e5\u770b\u7fa4\u6392\u884c\u54e6\uff01",1.5);break;case"friend":this.showFriendRank();break;case"world":console.log("\u4e16\u754c\u6392\u884c"),!IsWx&&this.showWorld();break;case"other":console.log("\u4e16\u754c\u6392\u884c"),ToastMng.showToast("\u4eb2\uff01\u4e16\u754c\u6392\u884c\u699c\u8fd8\u5728\u5f00\u53d1\u4e2d\u54e6\uff01");break;case"close":this.close()}}}),cc._RF.pop()},{PopLayerBase:"PopLayerBase",RankCell:"RankCell",Server:"Server",UserInfoBtn:"UserInfoBtn",WxSub:"WxSub",sdk:"sdk"}],Result:[function(t,e,i){"use strict";cc._RF.push(e,"af284b1UrtNmqtTSBhbMTkz","Result");var n=function(t){return t&&t.__esModule?t:{default:t}}(t("WxSub"));cc.Class({extends:t("NodeBase"),properties:{mask:cc.Node,window:cc.Node,ptSc:cc.Label,showSub:n.default},onLoad:function(){var t=this;this.showAcTime=.6,this.nodeType=NodeType.RESULT_LY,cc.systemEvent.on("RankClose",function(){t.node.active&&setTimeout(function(){t.showSub.showResult()},.1)})},start:function(){},show:function(){this.canTouch=!0,this.node.active=!0,this._showAct(),this._interPtAct(),this.onShow()},hide:function(){this.node.active=!1,this.showSub.closeSub(),this.onHide()},_showAct:function(){this.mask.opacity=0,this.mask.runAction(cc.fadeTo(this.showAcTime,160)),this.window.scale=0,this.window.stopAllActions(),this.window.runAction(cc.sequence(cc.delayTime(.6*this.showAcTime),cc.scaleTo(this.showAcTime,1).easing(cc.easeElasticOut(.8))))},_interPtAct:function(){this.showSub.showResult(),this.ptSc.string=GameDataHandler.Instant.curScore},clickBtn:function(t,e){if(t.currentTarget.scale=1,this.canTouch)switch(e){case"toStart":this.testLog("toStart "),this.hide(),GameMng.toStartLy();break;case"reGame":this.testLog("reGame "),this.hide(),GameMng.toPlayLy();break;case"friend":this.showSub.closeSub(),GameMng.popRank();break;case"share":WxSDK.otherShare(SharePos.SCORE)}}}),cc._RF.pop()},{NodeBase:"NodeBase",WxSub:"WxSub"}],ScoreAddBase:[function(t,e,i){"use strict";cc._RF.push(e,"775a85qubZDNr1hyyYXZok8","ScoreAddBase");var n=t("PoolNodeBase");cc.Class({extends:n,properties:{lb:cc.Label},refresh:function(t,e){var i=this;this.lb.string=t,this.node.position=e,this.node.scale=.85,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveBy(1,cc.v2(0,50)),cc.scaleTo(1,1)),cc.callFunc(function(){i.remove()})))}}),cc._RF.pop()},{PoolNodeBase:"PoolNodeBase"}],"Server+Auth":[function(t,e,i){"use strict";cc._RF.push(e,"f1b43oGNM9G274QGfuAQPEr","Server+Auth"),t("Server").refreshAuthButton=function(t){var e=this,i=GameMng.startLy.beginBtn.getComponent("UserInfoBtn");if(t)if(IsWx&&wx.getSetting){var n=function(t){t?i.setNormalMode(function(){GameMng.toPlay()}):(i.successFunc=function(t){e.reportAppid(1),GameMng.toPlay()},i.failFunc=function(t){GameMng.toPlay()})};wx.getSetting({success:function(t){t&&t.authSetting&&t.authSetting["scope.userInfo"]?n&&n(!0):n&&n(!1)},fail:function(){n&&n(!1)}})}else i.setNormalMode(function(){GameMng.toPlay()});else i.setNormalMode(function(){GameMng.toPlay()})},cc._RF.pop()},{Server:"Server"}],"Server+Report":[function(t,e,i){"use strict";cc._RF.push(e,"4c5b4BkbIVM/qTKCy+bRo/n","Server+Report");var n=t("Server");n.reportAppid=function(t){if(IsWx){var e=wx.getLaunchOptionsSync(),i="",o="";e.referrerInfo&&e.referrerInfo.appId&&(i=e.referrerInfo.appId),e.query&&e.query.cid&&(o=e.query.cid),n._reportAppid(i,o,t)}},n._reportAppid=function(t,e,i,n){var o=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.getUserIdOrCode(this.report_user_id,function(a){a.game_id=SDK.game_id,a.version=SDK.game_version,a.app_id=t,a.channel_id=e,a.auth_flag=i,console.log("\u62a5\u544a\u6765\u6e90appid"),console.log(a),wx.request({url:"https://tee.huanle.com/report.php",data:a,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(t){t&&t.data&&t.data.user_id&&(o.report_user_id=t.data.user_id,console.log("this.report_user_id == ",o.report_user_id)),0==t.data.code?(console.log("\u62a5\u544a\u6765\u6e90appid\u6210\u529f: ",t),n&&n(t.data)):(console.log("\u62a5\u544a\u6765\u6e90appid\u5931\u8d25: ",t),s&&s(t))},fail:function(t){console.log("\u8bf7\u6c42\u62a5\u544a\u6765\u6e90appid\u5931\u8d25: ",t),s&&s()}})},s)},n.reportEvent=function(t){var e=this;if(IsWx){var i=t.tag,n=t.page;this.wxLogin(function(t){t.os=WxSDK.getPlatform(),t.game_id=e.game_id,t.tag=i,t.page=n,console.log("\u63d0\u4ea4\u53c2\u6570:",t);wx.request({url:"https://tee.huanle.com/report_click.php",header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},method:"POST",data:t,success:function(t){console.log("\u4e8b\u4ef6\u4e0a\u62a5\u6210\u529f:",t),t&&t.data&&t.data.user_id&&(e.user_id=t.data.user_id)},fail:function(t){console.log("\u4e8b\u4ef6\u4e0a\u62a5\u5931\u8d25:",t)}})})}},cc._RF.pop()},{Server:"Server"}],Server:[function(t,e,i){"use strict";cc._RF.push(e,"71618Qx2apFtoYWxh23a8FH","Server");var n=t("sdk"),o=n,s={game_id:n.game_id,version:n.game_version,report_user_id:null,data_user_id:null,gamebox_ads:{list:[],toapp:null,flag:""},toappid:null,vid:"",flag:"",saveDataUserId:function(t,e){e&&e.data&&e.data.user_id&&(this[t]=e.data.user_id,console.log("this."+t+" == "+this[t]))},getServerTime:function(t,e){var i=this,s=function(t){e&&e(t)};if(o._checkWx(e,null,"request")){this.getUserIdOrCode(this.data_user_id,function(a){n.request({url:"https://cache.huanle.com/time.html",header:{},method:"GET",data:a,success:function(n){o.hideLoading();var s=i._saveHeaderTime(n);s?(console.log("\u4ece\u670d\u52a1\u5668\u83b7\u53d6\u65f6\u95f4\u6210\u529f",s),t&&t(s)):(console.log("\u4ece\u670d\u52a1\u5668\u83b7\u53d6\u65f6\u95f4\u5931\u8d25",s),e&&e(s))},fail:s,complete:null})},s)}else cc.sys.isBrowser?t&&t((new Date).getTime()):s&&s(null)},getData:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(o._checkWx(i,null,"request")){o.showLoading("\u6570\u636e\u52a0\u8f7d\u4e2d...");var s=function(t){o.hideLoading(),console.log("\u8bf7\u6c42\u4ece\u670d\u52a1\u83b7\u53d6\u6570\u636e\u5931\u8d25",t),i&&i(t)};this.getUserIdOrCode(this.data_user_id,function(a){a.game_id=o.game_id,a.type="get",console.log("\u83b7\u53d6\u6570\u636e"),console.log(a),n.request({url:"https://cache.huanle.com/data.php",header:{},method:"GET",data:a,success:function(n){o.hideLoading(),e.saveDataUserId("data_user_id",n),0==n.data.code?(console.log("\u4ece\u670d\u52a1\u5668\u83b7\u53d6\u6570\u636e\u6210\u529f",n),t&&t(n.data)):(console.log("\u4ece\u670d\u52a1\u5668\u83b7\u53d6\u6570\u636e\u5931\u8d25",n),i&&i(n))},fail:s,complete:null})},s)}},saveData:function(t,e){var i=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(o._checkWx(s,null,"request")){this.getUserIdOrCode(this.data_user_id,function(a){a.game_id=o.game_id,a.type="put",a.info=t,console.log("\u4fdd\u5b58\u6570\u636e"),console.log(a),n.request({url:"https://level.huanle.com/data.php",header:{},method:"GET",data:a,success:function(t){i.saveDataUserId("data_user_id",t),0==t.data.code?(console.log("\u4fdd\u5b58\u6570\u636e\u5230\u670d\u52a1\u5668\u6210\u529f",t),e&&e(t.data)):(console.log("\u4fdd\u5b58\u6570\u636e\u5230\u670d\u52a1\u5668\u5931\u8d25",t),s&&s(t))},fail:function(t){console.log("\u8bf7\u6c42\u4fdd\u5b58\u6570\u636e\u5230\u670d\u52a1\u5668\u5931\u8d25"),s&&s(t)},complete:null})},s)}},getUserCodeThenGetUserInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.wxLogin(function(i){o.getUserInfo(function(e){for(var n in console.log("\u83b7\u53d6\u5fae\u4fe1\u7528\u6237\u4fe1\u606f\u6210\u529f: ",e),e)i[n]=e[n];t(i)},function(t){console.log("\u83b7\u53d6\u5fae\u4fe1\u7528\u6237\u4fe1\u606f\u5931\u8d25: ",t),e&&e(t)})},e)},_saveHeaderTime:function(t){var e=void 0;return t&&t.header&&t.header.Date&&(e=new Date(t.header.Date).getTime()),e},wxLoginAndGetInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;wx.login({success:function(i){var o=i.code;n.getUserInfoForce(function(e){var i={code:o,iv:e.iv,rawData:e.rawData,encryptedData:e.encryptedData,signature:e.signature};t(i)},function(t){e&&e(t)})},fail:function(t){e&&e(t)}})},getUserIdOrCode:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t?wx.checkSession({success:function(i){e({user_id:t})},fail:function(t){i.wxLogin(e,n)}}):this.wxLogin(e,n)},wxLogin:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;wx.login({success:function(e){var i=e.code;t&&t({code:i})},fail:function(t){e&&e(t)}})},getGroupID:function(t,e,i,o){var s={game_id:this.game_id,code:t,encryptedData:e.encryptedData,iv:e.iv};n.request({url:"https://api.huanle.com/gid.php",data:s,header:{"content-type":"application/json"},success:function(t){t.data&&0===t.data.code?i&&i(t.data.opendata.openGId):i&&i(0)},fail:function(t){o&&o(t)}})},submitLeaderboard:function(t,e){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;console.log("\u4fdd\u5b58\u6210\u7ee9\u5230\u4e16\u754c\u6392\u884c\u699c: ",t),this.wxLoginAndGetInfo(function(s){s.game_id=i.game_id,s.score=t,console.log("\u4fdd\u5b58\u6210\u7ee9\u5230\u4e16\u754c\u6392\u884c\u699c(data): ",s),n.request({url:"https://mode.huanle.com/submit.php",header:{},method:"GET",data:s,success:function(t){t&&t.data&&0==t.data.code?(console.log("\u4fdd\u5b58\u6210\u7ee9\u5230\u4e16\u754c\u6392\u884c\u699c\u6210\u529f: ",t),WxSDK.leaderSubmitted||(WxSDK.leaderSubmitted=!0),e&&e(t)):(console.log("\u4fdd\u5b58\u6210\u7ee9\u5230\u4e16\u754c\u6392\u884c\u699c\u5931\u8d25: ",t),o&&o(t))},fail:function(t){console.log("\u4fdd\u5b58\u6210\u7ee9\u5230\u4e16\u754c\u6392\u884c\u699c\u5931\u8d25: ",t),o&&o(t)}})},function(t){o&&o(t)})},getLeaderboard:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("\u5f00\u59cb\u83b7\u53d6\u4e16\u754c\u6392\u884c\u699c");this.wxLogin(function(o){o.game_id=e.game_id,console.log("\u83b7\u53d6\u4e16\u754c\u6392\u884c\u699c(\u8bf7\u6c42data): ",o),n.request({url:"https://mode.huanle.com/get.php",header:{},method:"GET",data:o,success:function(e){e&&e.data&&0==e.data.code?(console.log("\u83b7\u53d6\u4e16\u754c\u6392\u884c\u699c\u6210\u529f: ",e),t&&t(e)):(console.log("\u83b7\u53d6\u4e16\u754c\u6392\u884c\u699c\u5931\u8d25: ",e),i&&i(e))},fail:function(t){console.log("\u8bf7\u6c42\u83b7\u53d6\u4e16\u754c\u6392\u884c\u699c\u5931\u8d25: ",t),i&&i(t)}})},i)},getGameBoxConfig:function(t,e){var i=this,o=function(t){console.log("\u62c9\u53d6game_box\u914d\u7f6e\u5931\u8d25",JSON.stringify(t)),e&&e()};this.wxLogin(function(s){s.os=WxSDK.getPlatform(),s.game_id=i.game_id,s.vid=i.vid,s.toappid=i.toappid,s.flag=i.flag,console.log("\u62c9\u53d6game_box\u914d\u7f6e:",s);n.request({url:"https://page.huanle.com/gamebox.php",header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},method:"GET",data:s,success:function(n){if(console.log("\u83b7\u53d6game_box\u914d\u7f6e\u6210\u529f:",n),n.data){for(var o in n.data)i.gamebox_ads[o]=n.data[o];t&&t()}else console.log("\u672a\u627e\u5230data\u6570\u636e"),e&&e()},fail:o})})}};void 0!==e&&(e.exports=s);if(window.wx){var a=wx.getLaunchOptionsSync();console.log("launchOptions == "+JSON.stringify(a)),a.query&&(void 0!=a.query.flag&&(s.flag=a.query.flag),void 0!=a.query.vid&&(s.vid=a.query.vid),a.query.toIndex>=0&&a.query.toIndex<10&&console.log("launchOptions.query.toIndex = "+a.query.toIndex))}cc._RF.pop()},{sdk:"sdk"}],Setting:[function(t,e,i){"use strict";cc._RF.push(e,"45324uc51JFm7GaTDi70zxw","Setting");var n=t("PopLayerBase");cc.Class({extends:n,properties:{audioBtn:cc.Node,effectBtn:cc.Node},onLoad:function(){this.nodeType=NodeType.SETTING_POP},show:function(){this.node.active=!0,n.prototype.show.call(this),this.setAudioBtnState(GameDataHandler.Instant.musicState),this.setEffecBtnState(GameDataHandler.Instant.effectState)},setAudioBtnState:function(t){cc.find("on",this.audioBtn).active=t,cc.find("off",this.audioBtn).active=!t,GameDataHandler.Instant.musicState=t,t?AudioMng.resumeAll(AudioOpObjType.All):AudioMng.pauseAll(AudioOpObjType.All)},setEffecBtnState:function(t){cc.find("on",this.effectBtn).active=t,cc.find("off",this.effectBtn).active=!t,GameDataHandler.Instant.effectState=t},clickBtn:function(t,e){switch(e){case"close":this.close();break;case"audio":this.setAudioBtnState(!GameDataHandler.Instant.musicState),GameDataHandler.Instant.saveData();break;case"effect":this.setEffecBtnState(!GameDataHandler.Instant.effectState),GameDataHandler.Instant.saveData()}}}),cc._RF.pop()},{PopLayerBase:"PopLayerBase"}],Shop:[function(t,e,i){"use strict";cc._RF.push(e,"6b21fR35zJOPakiVwCOOGjZ","Shop");var n=t("PopLayerBase");cc.Class({extends:n,properties:{content:cc.Node},onLoad:function(){this.nodeType=NodeType.SHOP_POP,this.setData([{type:PropType.KILL_TWO,toast:"\u8d2d\u4e70\u6210\u529f\uff0c\u6d88\u4e24\u884c\u9053\u5177+1",price:777},{type:PropType.MAGIC_BALL,toast:"\u8d2d\u4e70\u6210\u529f\uff0c\u9b54\u6cd5\u7403\u9053\u5177+1",price:888},{type:PropType.LASER,toast:"\u8d2d\u4e70\u6210\u529f\uff0c\u6fc0\u5149\u70ae\u9053\u5177+1",price:990},{type:PropType.NO_ADS,toast:"\u8d2d\u4e70\u6210\u529f\uff0c\u606d\u559c\u65e0\u5e7f\u544a\u4e00\u5929",price:18800}])},show:function(){this.node.active=!0,n.prototype.show.call(this)},setData:function(t){var e=this;t.forEach(function(t){var i=e.content.getChildByName(t.type);i&&i.on(cc.Node.EventType.TOUCH_END,function(){})})},clickBtn:function(t,e){switch(e){case"close":this.close();break;case"expect":ToastMng.showToast("\u4eb2\uff01\u66f4\u591a\u5ba0\u7269\u8fd8\u5728\u5f00\u53d1\u4e2d");break;case"itemBtn":var i=parseInt(t.target.parent.name);switch(SkinDataHandler.Instant.getStateById(i)){case SkinState.NOT:ToastMng.showToast("\u4eb2\uff01\u6b64\u76ae\u80a4\u6682\u672a\u83b7\u5f97");break;case SkinState.USING:ToastMng.showToast("\u4eb2\uff01\u6b64\u76ae\u80a4\u6b63\u5728\u4f7f\u7528");break;case SkinState.NO_USE:ToastMng.showToast(SkinDataHandler.Instant.getNameById(i)+"\u4f7f\u7528\u6210\u529f"),SkinDataHandler.Instant.curSkin&&this.setItemState(SkinDataHandler.Instant.curSkin,SkinState.NO_USE),this.setItemState(i,SkinState.USING),SkinDataHandler.Instant.updateCurSkin(i)}}}}),cc._RF.pop()},{PopLayerBase:"PopLayerBase"}],ShortcutBtn:[function(t,e,i){"use strict";cc._RF.push(e,"972c6tUQ5lI/K2e6J4Hmjfh","ShortcutBtn"),cc.Class({extends:cc.Component,properties:{ropeNode:cc.Node,boxNode:cc.Node},show:function(){this.node.active||(this.node.active=!0,this.node.zIndex=1e3,this.appear())},hide:function(){this.node.active=!1},appear:function(){var t=this,e=cc.view.getVisibleSize(),i=.5*e.height+274,n=.5*e.height+11;this.node.stopAllActions(),this.node.setPosition(190,i),this.node.runAction(cc.sequence(cc.moveTo(.7,190,n).easing(cc.easeBounceOut()),cc.callFunc(function(){t.pendular()})));this.ropeNode.stopAllActions(),this.ropeNode.angle=0,this.ropeNode.runAction(cc.rotateTo(.7,-20).easing(cc.easeSineIn())),this.boxNode.stopAllActions(),this.boxNode.angle=0,this.boxNode.runAction(cc.rotateTo(.7,-10).easing(cc.easeSineIn()))},pendular:function(){this.ropeNode.stopAllActions(),this.ropeNode.angle=-20,this.ropeNode.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(1,20).easing(cc.easeSineInOut()),cc.rotateTo(1,-20).easing(cc.easeSineInOut())))),this.boxNode.stopAllActions(),this.boxNode.angle=-10,this.boxNode.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(1,10).easing(cc.easeSineInOut()),cc.rotateTo(1,-10).easing(cc.easeSineInOut()))))},start:function(){}}),cc._RF.pop()},{}],SignDataMng:[function(t,e,i){"use strict";cc._RF.push(e,"6a2fcMqb81AnY7nh7ZkKLM9","SignDataMng");t("Server");function n(t){return"number"==typeof t&&!isNaN(t)}window.SignState={CANNOT_SIGN:0,NORMAL_SIGN:1,BE_SIGNED:2,MEND_SIGN:3};var o={init:function(t,e){var i=this;this.inited?t&&t(this.stateList,this.rewardList):this.getTimeData(function(n){i.tagName="v7.0",i.curTime=n,i.stateList=null,i.rewardList=null,i.getDataV6(),i.refreshStateList(),Array.isArray(i.rewardList)||(i.refreshRewardList(Math.ceil(i.signCount/7)),i.needRfsReward=0),i.stateList&&i.rewardList?(t&&t(i.stateList,i.rewardList),i.saveDataV6(),i.inited=!0):(e&&e(),i.inited=!1)},e)},getDataV6:function(){this.needRfsReward=1,this.signCount=0,this.lastSignTime=0;var t=GameDataHandler.Instant._localData.signData;if(t){var e=t[this.tagName];e?(this.signCount=e.signCount,this.lastSignTime=e.lastSignTime,this.rewardList=e.rewardList,this.needRfsReward=e.needRfsReward):t.stateList&&t.lastDate&&t.rewardList&&(this.rewardList=t.rewardList,this.signCount=t.stateList.lastIndexOf(SignState.BE_SIGNED)+1,this.lastSignTime=this.dateToTime(t.lastDate))}n(this.lastSignTime)||(this.lastSignTime=0)},saveDataV6:function(){GameDataHandler.Instant._localData.signData||(GameDataHandler.Instant._localData.signData={});var t={lastSignTime:this.lastSignTime,signCount:this.signCount,rewardList:this.rewardList,needRfsReward:this.needRfsReward};GameDataHandler.Instant._localData.signData[this.tagName]=t,GameDataHandler.Instant.saveData(),console.log("SignDataMng saveData : ",GameDataHandler.Instant._localData.signData)},refreshStateList:function(){var t=this.getItvDaysByTime(this.lastSignTime,this.curTime);if(t<0);else{for(var e=this.signCount%7,i=[],o=0;o<7;++o)i[o]=o<e?SignState.BE_SIGNED:SignState.CANNOT_SIGN;if(n(t)||(t=0),console.log("intervalDays:",t,"signIndex:",e),e<=0)if(this.curIndex=0,t<1&&t>0)for(var s=0;s<7;++s)i[s]=SignState.BE_SIGNED;else i[this.curIndex]=SignState.NORMAL_SIGN,1==this.needRfsReward&&(this.rewardList=null);else this.needRfsReward=1,t<1?(this.curIndex=e-1,i[this.curIndex]=SignState.BE_SIGNED):(this.curIndex=e,i[this.curIndex]=SignState.NORMAL_SIGN);this.stateList=i}},refreshRewardList:function(t){var e={1:[9900,-1,38800,-2,58800,88800,-3]},i=[9900,18800,38800,46600,58800,88800,12e4],n=e[t];n||(n=e[1]),n.forEach(function(t,e){if(!(t>0)){var o=-t;SkinDataHandler.Instant.getStateById(o)!=SkinState.NOT&&(n[e]=i[e])}}),this.rewardList=n},checkToDayState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t||(t=this.curIndex),console.log("curIndex ",t),this.stateList[t]===SignState.BE_SIGNED},sign:function(t){var e=this.stateList[t];e!==SignState.CANNOT_SIGN&&(e===SignState.NORMAL_SIGN&&(this.lastDate=this.curDate),this.stateList[t]=SignState.BE_SIGNED,this.signCount++,this.lastSignTime=this.curTime,this.saveDataV6())},getItvDaysByTime:function(t,e){return(e-t)/864e5},dateToTime:function(t){var e=new Date(t).toDateString();return new Date(e).getTime()},getTimeData:function(t,e){if(this.testTime)t&&t(this.testTime);else{var i=(new Date).getTime();console.log("localTime ",i),t&&t(i)}}};e.exports=o,cc._RF.pop()},{Server:"Server"}],SignView:[function(t,e,i){"use strict";cc._RF.push(e,"ca32b2yUlJFQ7vC2rZRs3ze","SignView");var n=t("SignDataMng");cc.Class({extends:cc.Component,properties:{bg:cc.Node,window:cc.Node,effectTime:.4,scaleEaseValue:.8,needInputLayer:!0,items:[cc.Node],content:cc.Node,signBtn:cc.Sprite,signBtnStateSprList:[cc.SpriteFrame],boxStateSprList:[cc.SpriteFrame],rewardSprList:[cc.SpriteFrame],coinSpr:cc.SpriteFrame},show:function(){var t=this;this.needInputLayer&&(this._inputLayer?this._inputLayer.active=!0:this._addInputLayer()),cc.systemEvent.emit(NotificationMsg.CLUBBTN_DO,!1),this.content.active=!1,this.canTouch=!0,this.refreshGetFunc(),this.bg.opacity=0,this.bg.runAction(cc.fadeTo(this.effectTime,180)),this.window.scale=0,this.window.runAction(cc.sequence(cc.scaleTo(this.effectTime,1).easing(cc.easeElasticOut(this.scaleEaseValue)),cc.callFunc(function(){t.window.scale=1,t._inputLayer&&(t._inputLayer.active=!1)})))},hide:function(){var t=this;this._inputLayer&&(this._inputLayer.active=!0),cc.systemEvent.emit(NotificationMsg.CLUBBTN_DO,!0),this.bg.opacity=180,this.bg.runAction(cc.fadeTo(this.effectTime,0)),this.window.scale=1,this.window.runAction(cc.sequence(cc.scaleTo(this.effectTime,0).easing(cc.easeElasticIn(this.scaleEaseValue)),cc.callFunc(function(){t.node.destroy()})))},refresh:function(t,e){var i=this;this.content.active=!0;var n=0;t.forEach(function(t){var o=e[n],s=i.items[n];i.setItemReward(s,o),i.setItemState(s,t),n++})},setItemReward:function(t,e){var i=t.getChildByName("spr").getComponent(cc.Sprite),n=t.getChildByName("bottom").getComponent(cc.Label);if(n.node.removeComponent(cc.Widget),"number"==typeof e)if(e>0)i.spriteFrame=this.rewardSprList[0],i.node.scale=1,n.string=e,n.node.y=-68.07;else{var o=-e;i.spriteFrame=this.rewardSprList[o],i.node.scale=1.1,n.string=SkinDataHandler.Instant.getNameById(o),n.node.y=-78.97}},setItemState:function(t,e){t.getChildByName("state").active=e===SignState.BE_SIGNED;var i=this.boxStateSprList[e];i&&(t.getComponent(cc.Sprite).spriteFrame=i)},getReward:function(t){if("number"==typeof t)if(t>0)ToastMng.showToast("\u606d\u559c\u83b7\u5f97"+t+"\u91d1\u5e01"),GameDataHandler.Instant.updateCoin(t);else{var e=-t;ToastMng.showToast("\u606d\u559c\u83b7\u5f97"+SkinDataHandler.Instant.getNameById(e)),SkinDataHandler.Instant.updateSkinData(e,SkinState.NO_USE)}else cc.error("function getReward reward undefined")},_addInputLayer:function(){var t=new cc.Node("input");t.position=cc.v2(0,0),t.width=this.node.width,t.height=this.node.height,t.addComponent(cc.BlockInputEvents),this.node.addChild(t,10),this._inputLayer=t},refreshGetFunc:function(){switch(this.getFuncType=WxSDK.getGainFuncType(GainPos.Sign),this.getFuncType){case GainFuncType.SHARE:this.signBtn.spriteFrame=this.signBtnStateSprList[0];break;case GainFuncType.VIDEO:this.signBtn.spriteFrame=this.signBtnStateSprList[1];break;default:this.signBtn.spriteFrame=this.signBtnStateSprList[2]}},signDay:function(t){var e=n.rewardList[t];n.sign(t),this.getReward(e),this.setItemState(this.items[t],SignState.BE_SIGNED),this.signBtn.node.scale=1,this.hide()},getByVideo:function(t){var e=this;this.canTouch=!1,WxSDK.videoGain(function(){e.signDay(t),e.canTouch=!0},function(){e.refreshGetFunc(),e.canTouch=!0},function(){ToastMng.showToast("\u770b\u89c6\u9891\u5931\u8d25\u54e6!",2),e.refreshGetFunc(),e.canTouch=!0})},getByShare:function(t){var e=this;this.canTouch=!1,WxSDK.propShare(SharePos.SIGN,function(i){e.signDay(t),e.canTouch=!0},function(){e.canTouch=!0,e.refreshGetFunc()},function(){},function(){e.canTouch=!0})},clickBtn:function(t,e){if(this.canTouch)switch(e){case"sureSign":n.inited&&(n.checkToDayState()?(ToastMng.showToast("\u4eca\u5929\u5df2\u7ecf\u7b7e\u5230\u4e86\u54e6!"),this.hide()):this.getFuncType===GainFuncType.VIDEO?this.getByVideo(n.curIndex):this.getFuncType===GainFuncType.SHARE?this.getByShare(n.curIndex):this.signDay(n.curIndex));break;case"close":this.hide()}}}),cc._RF.pop()},{SignDataMng:"SignDataMng"}],Singleton:[function(t,e,i){"use strict";cc._RF.push(e,"84697lz7yVICJHZK2QihQAQ","Singleton");cc.Class({properties:{},statics:{Instant:null},ctor:function(){this.onInit()},onInit:function(){}});cc._RF.pop()},{}],SkinDataHandler:[function(t,e,i){"use strict";cc._RF.push(e,"a0570sg37pFML/aVlWkUU31","SkinDataHandler");var n=t("DataHandler"),o=GameDataHandler.Instant,s=cc.Class({extends:n,properties:{},onInit:function(){this._configTableURL="SkinData",this._jsonConfigRelativeURL="SkinInfo"},onLoadConfig:function(t){n.prototype.onLoadConfig.call(this,t),o.addScale=this.getTotalAdd()/100},updateSkinData:function(t,e){this.isValidId(t,"updateSkinData")&&this.isValidState(e,"updateSkinData")&&(this.curSkin||this.updateCurSkin(t),this.skinInfo[t-1].state=e,o.addScale=this.getTotalAdd()/100,this.saveData())},updateCurSkin:function(t){this.isValidId(t,"updateCurSkin")&&(this.curSkin=t,NotificationCenter.Instant.post(NotificationMsg.UPDATE_CUR_SKIN,t),this.saveData())},getStateById:function(t){var e=void 0;return this.isValidId(t,"getStateById")?(e=this.skinInfo[t-1].state)===SkinState.NO_USE&&this.curSkin===t&&(e=SkinState.USING):e=-1,e},getNameById:function(t){if(this.isValidId(t,"getNameById"))return this._config.skinNameList[t-1]},getTotalAdd:function(){var t=0;return this.skinInfo.forEach(function(e){e.state!==SkinState.NOT&&(t+=e.value)}),t},getStateList:function(){var t=[];return this.skinInfo.forEach(function(e){t.push(e.state)}),t},isValidId:function(t,e){return!(t<1||t>this.skinInfo.length)||(console.error("function "+e+" id "+t+" "),!1)},isValidState:function(t,e){if(!this.skinStateValues)for(var i in this.skinStateValues=[],SkinState)this.skinStateValues.push(SkinState[i]);return!!this.skinStateValues.includes(t)||(console.error("function "+e+" state "+t+" "),!1)}});window.SkinDataHandler=e.exports=s,null===s.Instant&&(s.Instant=new s),cc._RF.pop()},{DataHandler:"DataHandler"}],Skin:[function(t,e,i){"use strict";cc._RF.push(e,"48c50TUuURInI7Wb6TcMRZN","Skin");var n=t("PopLayerBase");cc.Class({extends:n,properties:{content:cc.Node,totalLb:cc.Label,btnSprList:[cc.SpriteFrame]},onLoad:function(){this.nodeType=NodeType.SKIN_FACE_POP},show:function(){this.node.active=!0,n.prototype.show.call(this),this.content.parent.parent.active=!1,this.canTouch=!0,this.onShow()},_showOver:function(){n.prototype._showOver.call(this),this.refreshFace()},close:function(){n.prototype.close.call(this),this.onHide()},_closeOver:function(){n.prototype._closeOver.call(this),this.hideFace()},refreshFace:function(){var t=this;this.content.parent.parent.active=!0;var e=0;SkinDataHandler.Instant.getStateList().forEach(function(i){e++,t.setItemState(e,i),t.showItemPet(e,e)}),this.totalLb.string="\u6c38\u4e45\u5206\u6570\u52a0\u6210: "+SkinDataHandler.Instant.getTotalAdd()+"%",SkinDataHandler.Instant.curSkin&&this.setItemState(SkinDataHandler.Instant.curSkin,SkinState.USING)},hideFace:function(){var t=this;this.content.parent.parent.active=!1;var e=0;this.content.children.forEach(function(){e++,t.hideItemPet(e,e)})},setItemState:function(t,e){var i=this.content.getChildByName(""+t);i&&(i.getChildByName("btn").getComponent(cc.Sprite).spriteFrame=this.btnSprList[e])},showItemPet:function(t,e){var i=this.content.getChildByName(""+t);if(i){var n=GameMng.getPet(e);n.parent=i.getChildByName("spine"),n.name="pet",n.com.playWaitAction()}},hideItemPet:function(t,e){var i=this.content.getChildByName(""+t);i&&i.getChildByName("spine").getChildByName("pet").com.remove()},clickBtn:function(t,e){switch(e){case"close":this.close();break;case"expect":ToastMng.showToast("\u4eb2\uff01\u66f4\u591a\u5ba0\u7269\u8fd8\u5728\u5f00\u53d1\u4e2d");break;case"itemBtn":var i=parseInt(t.target.parent.name);switch(SkinDataHandler.Instant.getStateById(i)){case SkinState.NOT:ToastMng.showToast("\u4eb2\uff01\u8be5\u5ba0\u7269\u6682\u672a\u83b7\u5f97");break;case SkinState.USING:ToastMng.showToast("\u4eb2\uff01\u8be5\u5ba0\u7269\u6b63\u5728\u4f7f\u7528");break;case SkinState.NO_USE:ToastMng.showToast(SkinDataHandler.Instant.getNameById(i)+"\u4f7f\u7528\u6210\u529f"),SkinDataHandler.Instant.curSkin&&this.setItemState(SkinDataHandler.Instant.curSkin,SkinState.NO_USE),this.setItemState(i,SkinState.USING),SkinDataHandler.Instant.updateCurSkin(i)}}}}),cc._RF.pop()},{PopLayerBase:"PopLayerBase"}],Start:[function(t,e,i){"use strict";cc._RF.push(e,"3abcepWDp5GNZzh3L3VI3TY","Start");var n=t("NodeBase"),o=GameDataHandler.Instant,s=t("SignDataMng");cc.Class({extends:n,properties:{bestScore:cc.Label,coin:cc.Label,beginBtn:cc.Node,continueBtn:cc.Node,uiList:[cc.Node],groupRank:cc.Node,clubBtn:cc.Node},onLoad:function(){var t=this;NotificationCenter.Instant.register(NotificationMsg.UPDATE_COIN,this,this.onUpdateCoin),NotificationCenter.Instant.register(NotificationMsg.TESTLY_POP,this,function(){CommonNode.Instant.node.getChildByName("testBtn").active=!0}),cc.systemEvent.on(NotificationMsg.CLUBBTN_DO,function(e){t.showWxBtn(e)}),cc.systemEvent.on("insideAds_show",function(){t.showWxBtn(!1)}),cc.systemEvent.on("insideAds_hide",function(){t.showWxBtn(!0)}),window.__isQQ||this.showWxBtn(!1)},start:function(){window.__isQQ||(this.createFeedbackBtn(),this.showWxBtn(!1))},onDestroy:function(){},show:function(){var t=this;this.node.active=!0,this.showWxBtn(!0),this.isInited?(this.showPnt(),this._show2()):(this.isInited=!0,this.init(),this.scheduleOnce(function(){t.scheduleOnce(function(){s.init(function(){s.checkToDayState()||(GameMng.popSign(),console.log("popSign "))})},.3),t.showPnt(),t._show1()},.1)),this.coin.string=o.curCoin,this.bestScore.string="\u6700\u9ad8\u5206\u6570:"+o.bestScore,this.onShow()},hide:function(t){this.node.active=!1,this.showWxBtn(!1),t&&t(),this.onHide()},hidePnt:function(){this.node.children.forEach(function(t){t.active=!1})},showPnt:function(){this.node.children.forEach(function(t){t.active=!0})},init:function(){this.enableLog=!0,this.nodeType=NodeType.START,this.canTouch=!0,this.hidePnt()},createFeedbackBtn:function(){if(IsWx&&"function"==typeof wx.createFeedbackButton){this._wxBtn=wx.createFeedbackButton({type:"text",text:"\u610f\u89c1\u53cd\u9988",style:{left:0,top:4,width:60,height:22,lineHeight:22,backgroundColor:"#00000077",color:"#ffffff",textAlign:"center",fontSize:13,borderRadius:5}})}},_show1:function(t){this.uiList.forEach(function(t){t.scale=0,t.stopAllActions(),t.runAction(cc.scaleTo(1,1).easing(cc.easeElasticOut(.8)))}),o.lastGameData?(this.continueBtn.active=!0,this.beginBtn.y=18):(this.continueBtn.active=!1,this.beginBtn.y=-74)},_show2:function(){this._show1()},_show3:function(t){Common.swingAc(this.getGunNode),this.beginNode.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,1.1),cc.scaleTo(1,.9)))),this._rtAndLfAc(.6,this.rightSrcX,this.rightDstX,this.leftSrcX,this.leftDstX,cc.easeElasticOut(.8)),this._otherAc(.5,0,255)},_show4:function(){this._rtAndLfAc(.5,this.rightSrcX,this.rightDstX,this.leftSrcX,this.leftDstX,cc.easeElasticOut(.8)),this._otherAc(.4,0,255)},_rtAndLfAc:function(t,e,i,n,o,s){this.rightNode.stopAllActions(),this.rightNode.x=e;var a=cc.moveBy(t,cc.v2(i-e,0));s&&a.easing(s),this.rightNode.runAction(a),this.leftNode.stopAllActions(),this.leftNode.x=n;var c=cc.moveBy(t,cc.v2(o-n,0));s&&c.easing(s),this.leftNode.runAction(c)},_otherAc:function(t,e,i,n){this.otherNode.stopAllActions(),this.otherNode.opacity=e;var o=cc.fadeTo(t,i);n&&o.easing(n),this.otherNode.runAction(o)},onToPlayLy:function(t){var e=this;this.canTouch=!1,this.hide(function(){e.canTouch=!0,GameMng.toPlayLy(t)})},onUpdateCoin:function(t){t&&t.source&&(this.coin.string=o.curCoin)},checkQQActivityStatus:function(){var t=SDK.qq_activity,e=void 0!==window.qq&&void 0!==window.qq.openActivity;1===parseInt(t)&&e&&SDK.isAndroid()?(this.qq_activityBtn.active=!0,this.playQQActivityAction()):this.qq_activityBtn.active=!1},playQQActivityAction:function(){if(!this.qq_activityBtn.getActionByTag(1)){this.qq_activityBtn.stopAllActions();var t=cc.repeatForever(cc.sequence(cc.rotateBy(.1,20),cc.rotateBy(.2,-40),cc.rotateBy(.2,40),cc.rotateBy(.1,-20),cc.delayTime(3)));t.setTag(1),this.qq_activityBtn.runAction(t)}},onQQActivityBtnClick:function(){window.__isQQ&&void 0!==window.qq&&void 0!==window.qq.openActivity?qq.openActivity({url:"https://act.qzone.qq.com/vip/meteor/blockly/p/3330x9b38d?_wwv=4&_wv=49168&a=4",success:function(t){console.log("success:",t)},fail:function(t){console.log("fail:",t),ToastMng.showToast("\u8df3\u8f6c\u5931\u8d25\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5!",1.5)}}):ToastMng.showToast("\u8df3\u8f6c\u5931\u8d25\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5!",1.5)},showWxBtn:function(t){var e=this.clubBtn.getComponent("GameClubBtn");e&&(t&&-1!=SDK.share_flag&&this.node.active?e.show():e.hide()),this._wxBtn&&(t?this._wxBtn.show():this._wxBtn.hide())},clickBtn:function(t,e){if(("clickGetWood"!==e&&"clickGetGift"!==e||WxSDK.canShowGainPos(PropId2GainPos[GainType.PropGift]))&&this.canTouch)switch(e){case"begin":this.testLog("begin "),this.onToPlayLy(!1);break;case"continue":this.testLog("continue "),this.onToPlayLy(!0);break;case"rank":this.testLog("rank "),GameMng.popRank();break;case"share":this.testLog("share "),WxSDK.otherShare(SharePos.START);break;case"setting":GameMng.popSetting();break;case"group":WxSDK.groupShare(),ToastMng.showToast("\u4eb2\uff01\u70b9\u51fb\u7fa4\u94fe\u63a5\u624d\u80fd\u67e5\u770b\u7fa4\u6392\u884c\u54e6\uff01",1.5);break;case"skin":GameMng.popSkinFace();break;case"sign":GameMng.popSign();break;case"shop":ToastMng.showToast("\u4eb2\uff01\u5546\u57ce\u6b63\u5728\u5f00\u53d1\u4e2d\u54e6\uff01",1.5);break;case"qq_activity":this.onQQActivityBtnClick()}}}),cc._RF.pop()},{NodeBase:"NodeBase",SignDataMng:"SignDataMng"}],StringConvert:[function(t,e,i){"use strict";cc._RF.push(e,"e2166ZXzmZB1Jnuym3HWBy4","StringConvert");String.prototype;String.hashCode=function(t){var e=0,i=void 0;if(0===t.length)return e;for(i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e},String.prototype.equals=function(t){return this===t},String.isNullOrEmpty=function(t){return!t||""===t},String.getClassName=function(t){return cc.js.getClassName(t)},String.prototype.toType=function(t){return"<"+t+">"+this+"</"+t+">"},String.prototype.toBold=function(){return"<b>"+this+"</b>"},String.prototype.toItalic=function(){return"<i>"+this+"</i>"},String.prototype.toUnderLine=function(){return"<u>"+this+"</u>"},String.prototype.toBreak=function(){return"<br/>"+this},String.prototype.toColor=function(t){return"<color="+t+">"+this+"</color>"},String.prototype.toSize=function(t){return"<size="+t+">"+this+"</size>"},String.prototype.toOutLine=function(t){return"<outline"+t+">"+this+"</outline>"},String.prototype.toOutLineWC=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"<outline color = "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#ffb9ad")+" width = "+t+">"+this+"</outline>"},cc._RF.pop()},{}],SwitchNode:[function(t,e,i){"use strict";cc._RF.push(e,"dfbbfBSa4hNmaXxJYT83gsm","SwitchNode");var n=cc.Enum({NONE:0,FADEIN:1,FADEOUT:2,CIRCLE:3,SCALE:4,LANDSCAPE:5,PORTRAIT:6,FLIP:7}),o=[["normalShowIn","normalShowOut"],["fadeInShowIn","fadeInShowOut"],["fadeOutShowIn","fadeOutShowOut"],["circleShowIn","circleShowOut"],["scaleShowIn","scaleShowOut"],["landscapeShowIn","landscapeShowOut"],["portraitShowIn","portraitShowOut"],["flipShowIn","flipShowOut"]];cc.Class({extends:cc.Component,properties:{switchEffect:{default:n.FADEIN,type:n},effectTime:.5,effectSpriteFrame:cc.SpriteFrame,_sceneName:null,_callback:null,_effectNode:null,_openUpdate:!1,_curTime:0,_curCallback:null,_curEndCallback:null},loadScene:function(t,e,i){this.node.zIndex=10,this._sceneName=t,this._callback=e,i&&(this.switchEffect=i),this.node.active=!0,this.showIn()},showIn:function(){this[o[this.switchEffect][0]]()},showOut:function(){this[o[this.switchEffect][1]]()},_showInOver:function(){var t=this;cc.director.loadScene(this._sceneName,function(){t.showOut(),t._callback&&t._callback()})},_showOutOver:function(){this.node.active=!1,this._sceneName=null,this._callback=null,this._effectNode&&(this._effectNode.removeFromParent(!0),this._effectNode.destroy(),this._effectNode=null)},normalShowIn:function(){this._showInOver()},normalShowOut:function(){this._showOutOver()},_createFullSceneBg:function(){var t=new cc.Node("bg"),e=t.addComponent(cc.Sprite);e.spriteFrame=this.effectSpriteFrame,e.sizeMode=cc.Sprite.SizeMode.CUSTOM,t.zIndex=15,this.node.addChild(t);var i=cc.view.getVisibleSize();return t.width=i.width+5,t.height=i.height+5,t.color=cc.color(0,0,0),this._effectNode=t,t},fadeInShowIn:function(){var t=this;this._createFullSceneBg(),this._effectNode.opacity=0,this._effectNode.runAction(cc.sequence(cc.fadeIn(this.effectTime),cc.callFunc(function(e){t._effectNode.opacity=255,t._showInOver()})))},fadeInShowOut:function(){var t=this;this._effectNode.runAction(cc.sequence(cc.fadeOut(this.effectTime),cc.callFunc(function(e){t._effectNode.opacity=0,t._showOutOver()})))},fadeOutShowIn:function(){var t=this,e=cc.find("Canvas");e.runAction(cc.sequence(cc.fadeOut(this.effectTime),cc.callFunc(function(i){e.opacity=0,t._showInOver()})))},fadeOutShowOut:function(){var t=this,e=cc.find("Canvas");e.opacity=0,e.runAction(cc.sequence(cc.fadeIn(this.effectTime),cc.callFunc(function(i){e.opacity=255,t._showOutOver()})))},_createMaskLayer:function(){var t=new cc.Node("mask"),e=t.addComponent(cc.Mask);this.node.addChild(t),e.inverted=!0,e.segements=100,this._effectNode=t;var i=new cc.Node("showNode"),n=i.addComponent(cc.Sprite);n.spriteFrame=this.effectSpriteFrame,n.sizeMode=cc.Sprite.SizeMode.CUSTOM,t.addChild(i);var o=cc.view.getVisibleSize();return i.width=o.width+5,i.height=o.height+5,i.color=cc.color(0,0,0),e},circleShowIn:function(){var t=this;this._createMaskLayer().type=1;var e=2*Math.sqrt(this.node.width/2*this.node.width/2+this.node.height/2*this.node.height/2);this._effectNode.width=this._effectNode.height=e,this._runUpdateAction(function(){var i=1-t._curTime/t.effectTime,n=(i<0?0:i)*e;t._effectNode.width=t._effectNode.height=n},function(){t._effectNode.width=t._effectNode.height=0,t._showInOver()})},circleShowOut:function(){var t=this,e=2*Math.sqrt(this.node.width/2*this.node.width/2+this.node.height/2*this.node.height/2);this._effectNode.width=this._effectNode.height=0,this._runUpdateAction(function(){var i=t._curTime/t.effectTime;t._effectNode.width=t._effectNode.height=i*e},function(){t._effectNode.width=t._effectNode.height=e,t._showOutOver()})},scaleShowIn:function(){var t=this,e=cc.find("Canvas");e.runAction(cc.sequence(cc.scaleTo(this.effectTime,0).easing(cc.easeBackIn()),cc.callFunc(function(i){e.scale=0,t._showInOver()})))},scaleShowOut:function(){var t=this,e=cc.find("Canvas");e.scale=0,e.runAction(cc.sequence(cc.scaleTo(this.effectTime,1).easing(cc.easeBackOut()),cc.callFunc(function(i){e.scale=1,t._showOutOver()})))},landscapeShowIn:function(){var t=this;this._createMaskLayer().type=0;var e=this.node.height;this._effectNode.width=this.node.width,this._effectNode.height=e,this._runUpdateAction(function(){var i=1-t._curTime/t.effectTime,n=(i<0?0:i)*e;t._effectNode.height=n},function(){t._effectNode.height=0,t._showInOver()})},landscapeShowOut:function(){var t=this,e=this.node.height;this._effectNode.height=0,this._runUpdateAction(function(){var i=t._curTime/t.effectTime,n=(i<0?0:i)*e;t._effectNode.height=n},function(){t._effectNode.height=e,t._showOutOver()})},portraitShowIn:function(){var t=this;this._createMaskLayer().type=0;var e=this.node.width;this._effectNode.width=e,this._effectNode.height=this.node.height,this._runUpdateAction(function(){var i=1-t._curTime/t.effectTime,n=(i<0?0:i)*e;t._effectNode.width=n},function(){t._effectNode.width=0,t._showInOver()})},portraitShowOut:function(){var t=this,e=this.node.width;this._effectNode.width=0,this._runUpdateAction(function(){var i=t._curTime/t.effectTime,n=(i<0?0:i)*e;t._effectNode.width=n},function(){t._effectNode.width=e,t._showOutOver()})},flipShowIn:function(){var t=this,e=cc.find("Canvas");e.runAction(cc.sequence(cc.scaleTo(this.effectTime,0,1).easing(cc.easeIn(.5)),cc.callFunc(function(i){e.scaleX=0,t._showInOver()})))},flipShowOut:function(){var t=this,e=cc.find("Canvas");e.scaleX=0,e.runAction(cc.sequence(cc.scaleTo(this.effectTime,1,1).easing(cc.easeOut(.5)),cc.callFunc(function(i){e.scale=1,t._showOutOver()})))},_runUpdateAction:function(t,e){this._curCallback=t,this._curEndCallback=e,this._openUpdate=!0},lateUpdate:function(t){this._openUpdate&&(this._curTime>this.effectTime?(this._curTime=0,this._openUpdate=!1,this._curEndCallback()):(this._curTime+=t,this._curCallback()))}});cc._RF.pop()},{}],TestBtn:[function(t,e,i){"use strict";cc._RF.push(e,"545f3/igjZBzJkzkyjTmf31","TestBtn"),cc.Class({extends:cc.Component,properties:{testLyPfb:cc.Prefab},start:function(){this.node.zIndex=1e3},clickBtn:function(){if(!this.testLy){var t=cc.instantiate(this.testLyPfb);t.parent=cc.find("Canvas"),this.testLy=t.getComponent("TestLy")}this.testLy.show()},createComByFab:function(t,e,i){}}),cc._RF.pop()},{}],TestLy:[function(t,e,i){"use strict";cc._RF.push(e,"21a1fN4Q+NLVpqjBdhfOxss","TestLy");var n=t("PopLayerBase"),o=t("Server"),s=t("SignDataMng"),a="BubbleType",c="DelAllData",r="TodayAdd",l="ListSameQ",h="OnShare",u="OffShare",d="ScoreChange",f="SpeedRatioEdit",p="ShootSameQ",g="Close";cc.Class({extends:n,properties:{content:cc.Node},start:function(){this.init()},init:function(){this.node.zIndex=2e4,this.editStringData=new Map},onEditDidEnded:function(t,e){var i=parseInt(t.string);console.log("onEditDidEnded ",t.string),Math.isNumberNoNan(i)?this.editStringData.set(e,i):(t.string="",ToastMng.showToast("\u8f93\u5165\u7684\u5fc5\u987b\u4e3a\u6570\u5b57\u54e6"))},updateContentItem:function(t,e,i){var n=this.content.getChildByName(t);n.getChildByName("Label").getComponent(cc.Label).string=e,n.getChildByName("New EditBox").getComponent(cc.EditBox).string=i,this.editStringData.set(t,i)},clickBtn:function(t,e){switch(e){case a:var i=this.editStringData.get(a);if(Math.isNumberNoNan(i)&&i<7&&i>0);else ToastMng.showToast("\u5f53\u524d\u8bbe\u7f6e\u7684\u6ce1\u6ce1\u7c7b\u578b\u4e0d\u6b63\u786e num = [1,6]");break;case c:var n=function(){LocalStorageUtils.Instant.clearStorage(function(){WxSDK.closeCheck(),IsWx?WxSDK.exitGame():WxSDK.reloadGame()},function(){ToastMng.showToast("\u6e05\u7a7a\u672c\u5730\u6570\u636e\u5931\u8d25")})};o.saveData({},n,function(){n(),ToastMng.showToast("\u6e05\u7a7a\u670d\u52a1\u5668\u6570\u636e\u5931\u8d25")});break;case r:var _=this.editStringData.get(r);console.log("num "+_+" curDate "+s.curTime);var v=(new Date).getTime()+864e5*_;s.testTime=v,s.inited=!1;break;case l:this.editStringData.get(l);var m=this.editStringData.get(a);Math.isNumberNoNan(m)&&m<7&&m>0?ToastMng.showToast("\u4fee\u6539\u6210\u529f"):ToastMng.showToast("\u5f53\u524d\u8bbe\u7f6e\u7684\u6ce1\u6ce1\u7c7b\u578b\u4e0d\u6b63\u786e");break;case p:this.editStringData.get(p);var w=this.editStringData.get(a);Math.isNumberNoNan(w)&&w<7&&w>0?ToastMng.showToast("\u4fee\u6539\u6210\u529f"):ToastMng.showToast("\u5f53\u524d\u8bbe\u7f6e\u7684\u6ce1\u6ce1\u7c7b\u578b\u4e0d\u6b63\u786e");break;case d:var y=this.editStringData.get(d);GameDataHandler.Instant.curScore=y,GameMng.playLy&&(GameMng.playLy.scoreLb.string=GameDataHandler.Instant.curScore),ToastMng.showToast("\u4fee\u6539\u6210\u529f");break;case f:var S=this.editStringData.get(f);GameDataHandler.Instant.speedRatioEdit=S;break;case g:this.close();break;case h:ToastMng.showToast("\u4fee\u6539\u6210\u529f"),SDK.share_flag=1;break;case u:ToastMng.showToast("\u4fee\u6539\u6210\u529f"),SDK.share_flag=-1}}}),cc._RF.pop()},{PopLayerBase:"PopLayerBase",Server:"Server",SignDataMng:"SignDataMng"}],ToastBase:[function(t,e,i){"use strict";cc._RF.push(e,"eb872lGM7tEhbibc9bmgRdf","ToastBase"),cc.Class({extends:cc.Component,properties:{stringCom:cc.Label},onLoad:function(){},showToast:function(t,e,i,n,o){var s=this;this.node.zIndex=3e4,this.stringCom.string=t,this.stringCom._updateRenderData(!0),this.node.height=this.stringCom.node.height+20,this.node.position=0===i.y?i:cc.v2(i.x,i.y-.5*this.node.height-4),this.node.opacity=255,this.node.scale=.5,this.node.active=!0,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.4,.9).easing(cc.easeElasticOut(.8)),cc.delayTime(e),cc.spawn(cc.moveBy(.2,cc.v2(0,70)),cc.fadeOut(.3)),cc.callFunc(function(){s.node.active=!1})))}}),cc._RF.pop()},{}],ToastMng:[function(t,e,i){"use strict";cc._RF.push(e,"f9c39/0+b1EpY38DEFvNUMH","ToastMng");cc.Class({extends:cc.Component,properties:{toastList:[cc.Prefab]},onLoad:function(){void 0===window.ToastMng&&(window.ToastMng=this),this.canLog=!0,this.log=this.canLog?console.log:function(){}},start:function(){this.init([3])},init:function(t){var e=this;this.toastMngList=[];var i=0;t.forEach(function(t){e.toastMngList.push({tail:0,num:t,array:[]});for(var n=0;n<t;++n){var o=e.toastList[i];e.createToastByPfb(i,o)}i++})},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:cc.size(50,50),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cc.Color.YELLOW;this.createToastByList(i).getComponent("ToastBase").showToast(t,e,this.srcPos,n,o),this.log(t)},createToastByPfb:function(t,e){var i=cc.instantiate(e);this.node.addChild(i),i.active=!1,this.toastMngList[t].array.push(i)},createToastByList:function(t){var e=this,i=this.toastMngList[t],n=i.tail,o=i.num;this.srcPos=cc.v2(0,0),this.toastMngList[t].array.forEach(function(t){t.active&&(e.srcPos.y-=0===e.srcPos.y?.5*t.height:t.height)});var s=this.toastMngList[t].array[n];return n>=o-1?i.tail=0:i.tail+=1,s}});cc._RF.pop()},{}],UserInfoBtn:[function(t,e,i){"use strict";cc._RF.push(e,"3c01evgD+NOhZune241FAb/","UserInfoBtn");var n=t("sdk");cc.Class({extends:cc.Component,properties:{_wxBtn:null},setNormalMode:function(t){this._normalCallback=t,t?this._wxBtn&&this._wxBtn.hide():this._wxBtn&&this._wxBtn.show()},onClick:function(){var t=this;this._normalCallback?this._normalCallback():this._wxBtn||this._getUserInfo(function(e){t.successFunc&&t.successFunc(e)},function(e){t.failFunc&&t.failFunc(e)})},_getUserInfo:function(t,e){console.log("\u4f7f\u7528getUserInfo\u83b7\u53d6\u7528\u6237\u4fe1\u606f"),n.getUserInfoForce(function(e){console.log("getUserInfo\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f, res:",e),t&&t(e)},function(t){console.log("getUserInfo\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25, res:",t),e&&e(t)})},createWxBtn:function(){var t=this;if(console.log("createWxBtn "),IsWx&&"function"==typeof window.wx.createUserInfoButton){var e=this.node.convertToWorldSpaceAR(cc.v2(0,0)),i=cc.view.getVisibleSize(),n=e.x-this.node.width/2,o=i.height-e.y-this.node.height/2,s=wx.getSystemInfoSync(),a=s.screenWidth,c=s.screenHeight,r=n/i.width*a,l=o/i.height*c,h=this.node.width/i.width*a,u=this.node.height/i.height*c;this._wxBtn=window.wx.createUserInfoButton({type:"text",text:"\u6388\u6743\u6309\u94ae",style:{left:r,top:l,width:h,height:u,backgroundColor:"#FFFFFF01",color:"#00000001",fontSize:1},withCredentials:!0,lang:"zh_CN"}),this._wxBtn.onTap(function(e){console.log("\u4f7f\u7528UserInfoButton\u83b7\u53d6\u7528\u6237\u4fe1\u606f: ",e),e.errMsg.indexOf("auth deny")>-1||e.errMsg.indexOf("auth denied")>-1||e.errMsg.indexOf("fail")>-1?(console.log("\u4f7f\u7528UserInfoButton\u83b7\u53d6\u7528\u6237\u4fe1\u606f, \u6388\u6743\u5931\u8d25!"),t.failFunc&&t.failFunc(e)):(console.log("\u4f7f\u7528UserInfoButton\u83b7\u53d6\u7528\u6237\u4fe1\u606f, \u6388\u6743\u6210\u529f!"),t.successFunc&&t.successFunc(e))}),this._normalCallback&&(this._wxBtn&&this._wxBtn.hide(),console.log("createWxBtn this._wxBtn && this._wxBtn.hide();",this._normalCallback))}},onEnable:function(){this._normalCallback||(console.log("onEnable this._wxBtn && this._wxBtn.hide();",this._normalCallback),this._wxBtn&&this._wxBtn.show())},onDisable:function(){this._wxBtn&&this._wxBtn.hide(),console.log("onDisable this._wxBtn && this._wxBtn.hide();")},start:function(){},onDestroy:function(){this._wxBtn&&this._wxBtn.destroy()}}),cc._RF.pop()},{sdk:"sdk"}],WxBtn:[function(t,e,i){"use strict";cc._RF.push(e,"40a2cs360pJmIPSkpLug/VK","WxBtn"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,s=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._wxBtn=null,e._tapCallback=null,e}var i;return __extends(e,t),i=e,e.convertToWxRect=function(t){var e=t.convertToWorldSpaceAR(cc.v2(0,0)),i=cc.view.getVisibleSize(),n=e.x-t.width*t.anchorX,o=i.height-e.y-t.height*(1-t.anchorY),s=wx.getSystemInfoSync(),a=s.screenWidth,c=s.screenHeight;return{left:n/i.width*a,top:o/i.height*c,width:t.width/i.width*a,height:t.height/i.height*c}},e.prototype.onLoad=function(){this.getComponent(cc.Widget)&&this.getComponent(cc.Widget).updateAlignment(),this.node.on("position-changed",this.resizeButton,this),this.node.on("size-changed",this.resizeButton,this),this._createWxBtn(),this._addBtnCallback()},e.prototype.onDestroy=function(){this.node.off("position-changed",this.resizeButton,this),this.node.off("size-changed",this.resizeButton,this),this._wxBtn&&(this._wxBtn.destroy(),this._wxBtn=null)},e.prototype.onEnable=function(){this.show()},e.prototype.onDisable=function(){this.hide()},e.prototype.show=function(){this._wxBtn&&this._wxBtn.show()},e.prototype.hide=function(){this._wxBtn&&this._wxBtn.hide()},e.prototype.resizeButton=function(){if(this._wxBtn){var t=this._wxBtn,e=i.convertToWxRect(this.node),n=e.left,o=e.top,s=e.width,a=e.height;t.style.left=n,t.style.top=o,t.style.width=s,t.style.height=a}},e.prototype._createWxBtn=function(){},e.prototype._addBtnCallback=function(){var t=this;this._wxBtn&&"function"==typeof this._wxBtn.onTap&&this._wxBtn.onTap(function(e){t._tapCallback&&t._tapCallback(e)})},e=i=__decorate([o],e)}(cc.Component));i.default=s,cc._RF.pop()},{}],"WxSDK+Controller":[function(t,e,i){"use strict";cc._RF.push(e,"be316UwjKhO5YNN5AdKRYlD","WxSDK+Controller");var n=t("WxSDK"),o=t("sdk"),s=o,a=t("Server"),c=t("LocalStorageUtils");window.IsWx=void 0!==window.wx,window.__isQQ=!1,window.__isQQ?o.init({game_id:"bubble_qq_01",game_version:1,login_type:"qq",bannerId:"3e117a5a106b76fb0e4db7ad110e326d",videoId:"930d4802e5cb0265b7935af5fa6e159e"}):o.init({game_id:"bubble_wx_01",game_version:7,login_type:"wx",bannerId:"adunit-a67c866254872f38",videoId:"adunit-7e99e1d904a1d4c3"}),window.GainFuncType={VIDEO:"video",SHARE:"share",COIN:"coin",NOT:"not"};var r={qq_activity:0,playTimes_limit_num:2e3,group_dailyTask_count:5,share_max_cnt:100,reviveTimes_onePlay:3,magic:50,double:50,laser:50,gift:50,revive:50,danger:50,pddShow:50,freeProp_dailyTimes:2,shortcut_threshold:2e3,shortcut_coins:1e3,share_flag:1,pdd_toggle:0,pdd_goods_change_time:4,pdd_limit_score:5e3,pdd_show_chance:50,pdd_show_time_day:10,pdd_use_time_day:10,share_group_toast:"\u9700\u8981\u5206\u4eab\u5230\u4e0d\u540c\u7fa4\u54e6\uff0c\u6362\u4e2a\u7fa4\u8bd5\u8bd5\u5427\uff5e",share_time_toast:"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff5e",maxScore:8e5,innerad_interval:10},l=null,h=!1,u=0;n.checkRemoteConfigTest=function(){for(var t in r){var e=r[t];o[t]="string"==typeof e?e:e.toString()}var i=(new Date).getTime();console.log("localTime ",i);var n=new Date(Constant.EndDate).getTime();o.share_flag=n<=i?"1":"-1",console.log("share_flag",o.share_flag)},n.checkRemoteConfig=function(){o.showLoading("\u670d\u52a1\u5668\u8fde\u63a5\u4e2d...",!1),o.onRemoteLoaded=function(t){for(var e in r)t&&t[e]&&(o[e]=t[e]);var i=(new Date).getTime(),n=new Date(Constant.EndDate).getTime();o.share_flag=n<=i?"1":"-1",console.log("share_flag",o.share_flag),o.data={conf:t}}},o.showLoading("\u62c9\u53d6\u914d\u7f6e\u4e2d"),o.onFirstConfigComplete=function(){o.hideLoading(),h=!0,l&&l(),o.onFirstConfigComplete=null},n.checkRemoteConfigTest(),n.checkComplete=function(){IsWx?h?n.pareConfig():l=function(){n.pareConfig()}:a.refreshAuthButton(!1)},n.pareConfig=function(){s.data&&s.data.conf&&(u=1==s.data.conf.authflag?1:0),a.refreshAuthButton(u)},n._checkDiffGroupTerm=function(){return!0},n._checkDiffGroupNumEnough=function(t){var e=Common.getLocalData("groupids",[]),i=(new Date).toDateString();return Common.getLocalData("lastDay")!=i&&(e=[],Common.setLocalData("groupids",[]),Common.setLocalData("lastDay",i)),!!(o.group_dailyTask_count&&o.group_dailyTask_count>0&&e.length>=o.group_dailyTask_count)},n.checkShareGroupTerm=function(t,e){var i=this;void 0===t.shareTickets?e&&e(ShareGroupState.State5):this._checkDiffGroupTerm()&&!this._checkDiffGroupNumEnough()?a.wxLogin(function(n){var o=n.code;o?wx.getShareInfo({shareTicket:t.shareTickets[0],success:function(t){a.getGroupID(o,t,function(t){0===(0===t?0:i.isValidGroupId(t))?e&&e(ShareGroupState.State1):e&&e(ShareGroupState.State3)},function(t){e&&e(ShareGroupState.State4)})},fail:function(t){e&&e(ShareGroupState.State4)}}):e&&e(ShareGroupState.State1)}):e&&e(ShareGroupState.State1)},n.isValidGroupId=function(t){var e=Common.getLocalData("groupids",[]);return-1===e.indexOf(t)?(e.push(t),Common.setLocalData("groupids",e),0):-1},n.DataTimeCheck=function(){var t=new Date((new Date).getTime()+144e5).toDateString(),e=c.Instant.getItemInt("shareLastDay",0);new Date(e+144e5).toDateString()!=t&&(console.log("====\u6e05\u7a7a\u5206\u4eab\u6b21\u6570===="),c.Instant.setItemInt("shareLastDay",(new Date).getTime()),GameDataHandler.Instant.shareTimes=0,GameDataHandler.Instant.skinFreeTimes=0,GameDataHandler.Instant.pddRemainTime=parseInt(o.pdd_show_time_day),GameDataHandler.Instant.pddUseRemainTime=parseInt(o.pdd_use_time_day))},n.canGetProp=function(t){var e="string"==typeof o.freeProp_dailyTimes?parseInt(o.freeProp_dailyTimes):2,i=GameDataHandler.Instant.onePlayTimes[t];return console.log("\u5f53\u524d\u53ef\u4ee5\u975e\u793c\u7269\u65b9\u5f0f\u83b7\u5f97\u9053\u5177\u7684\u6b21\u6570"+e+"  \u672c\u5c40"+t+"\u5df2\u4f7f\u7528\u6b21\u6570"+i),i<e},n.EnableShare=function(){return this.DataTimeCheck(),void 0==o.share_max_cnt&&(o.share_max_cnt=8),this.isFaithfulPlay()&&(!IsWx||-1!=o.share_flag)&&GameDataHandler.Instant.shareTimes<o.share_max_cnt},n.EnableRevive=function(){return void 0!=o.reviveTimes_onePlay?o.reviveTimes_onePlay>0&&GameDataHandler.Instant.onePlayReviveTimes<o.reviveTimes_onePlay:GameDataHandler.Instant.onePlayReviveTimes<1},n.isFaithfulPlay=function(){return o.playTimes_limit_num&&o.playTimes_limit_num>0&&GameDataHandler.Instant.bestScore>=o.playTimes_limit_num},n.EnablePopSkin=function(){var t=Math.getRandom(0,100),e="string"==typeof o.newSkin_pop_probability;return logTest("\u65b0\u6b66\u5668\u6982\u7387 ",o.newSkin_pop_probability),logTest("\u968f\u673a\u6570 ",t),e&&t<parseInt(o.newSkin_pop_probability)},n.getGainFuncType=function(t){var e=GainFuncType.NOT,i=o[t];if("string"==typeof i){var n=(i+="_100").match(/([0-9]+)_([0-9]+)/);if(n){var s=parseInt(n[1]),a=parseInt(n[2]),c=Math.getRandom(0,100),r=this.EnableShare(),l=!IsWx||o.hasVideo();c<s?r?e=GainFuncType.SHARE:l&&(e=GainFuncType.VIDEO):c<a&&(l?e=GainFuncType.VIDEO:r&&(e=GainFuncType.SHARE))}}else IsWx&&!o.hasVideo()||(e=GainFuncType.VIDEO);return logTest("function getGainFuncType ",t,i,e),e},n.getReviveGetFunc=function(){var t=GainFuncType.NOT;return this.EnableRevive()&&(t=this.getGainFuncType(GainPos.Revive)),t},n.getOtherGetFunc=function(t){return this.getGainFuncType(t)},n.canShowGainPos=function(t){var e=!1,i=!IsWx||o.hasVideo()||"string"==typeof o[t]&&this.EnableShare();return t===GainPos.Revive?this.EnableRevive()&&(e=i||GameDataHandler.Instant.reviveNeedCoin<=GameDataHandler.Instant.money):e=t===GainPos.Three?i||GameDataHandler.Instant.threeTime>0:i,e},cc._RF.pop()},{LocalStorageUtils:"LocalStorageUtils",Server:"Server",WxSDK:"WxSDK",sdk:"sdk"}],"WxSDK+Report":[function(t,e,i){"use strict";cc._RF.push(e,"1faadafDV9Ao5F09gEOdJzc","WxSDK+Report");var n=t("WxSDK"),o=t("sdk"),s=t("Server");n.reportAppid=function(t){if("undefined"!=typeof wx){var e=wx.getLaunchOptionsSync(),i="",n="";e.referrerInfo&&e.referrerInfo.appId&&(i=e.referrerInfo.appId),e.query&&e.query.cid&&(n=e.query.cid),s.reportAppid(i,n,t)}},n.needAuth="undefined"==typeof wx?1:-1,n.checkNeedAuthList=function(){var t=this.needAuth,e=o.needauth_list;if(e){var i="",n=wx.getLaunchOptionsSync();n.query&&n.query.cid&&(i=n.query.cid),t=e.split(",").indexOf(i)>-1?1:0}else t=0;this.needAuth=t,o.hideLoading()},cc._RF.pop()},{Server:"Server",WxSDK:"WxSDK",sdk:"sdk"}],"WxSDK+Server":[function(t,e,i){"use strict";cc._RF.push(e,"a47c3TSmPRKUrGZHwH9R+3V","WxSDK+Server");var n=t("WxSDK"),o=t("Server");n._getServerData=function(t){var e=function(t){GameDataHandler.Instant.getData();var e=t[GameDataHandler.Instant._configTableURL];e&&GameDataHandler.Instant.resetData(e);var i=t[MissionDataHandler.Instant._configTableURL];i&&MissionDataHandler.Instant.resetData(i);var n=t[SkinDataHandler.Instant._configTableURL];n&&SkinDataHandler.Instant.resetData(n)};if(!IsWx){logTest("\u6a21\u62df\u83b7\u53d6\u670d\u52a1\u5668\u6570\u636e");var i=LocalStorageUtils.Instant.getData("serverDataTest");return i&&e(i),void(t&&t())}o.getData(function(i){if(logTest(i),i&&i.info){var n=JSON.parse(i.info);e(n)}t&&t()},function(){t&&t()})},n._saveServerData=function(){var t=this._getDataMayByKey(["GameDataHandler","MissionDataHandler","SkinDataHandler"]);if(!IsWx)return logTest("\u6a21\u62df\u4e0a\u4f20\u6570\u636e\u81f3\u670d\u52a1\u5668"),void LocalStorageUtils.Instant.setData("serverDataTest",t);t=JSON.stringify(t),logTest("dataValue ",t),o.saveData(t)},n._getDataMayByKey=function(e){var i={};return e.forEach(function(e){var n=t(e);if(n){var o=n.Instant;o&&o._configTableURL&&o._localData&&(i[o._configTableURL]=o._localData)}}),i},cc._RF.pop()},{Server:"Server",WxSDK:"WxSDK"}],"WxSDK+Share":[function(t,e,i){"use strict";cc._RF.push(e,"692cb/8h8BJn7dOlIIqB3v/","WxSDK+Share");var n=t("WxSDK"),o=t("sdk"),s=o;n._getShareConfig=function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:SharePos.NOT,a=void 0,c=void 0,r=void 0,l=o.getShareConfig(t);l?(console.log("\u5728\u7ebf\u5206\u4eab\u914d\u7f6e :",l),a=l.share_text||e,c=l.share_pic_local,r=l.share_id):(console.log("\u5206\u4eab\u70b9"+t+"\u6ca1\u6709\u5728\u7ebf\u5206\u4eab\u914d\u7f6e\uff0c\u4f7f\u7528\u672c\u5730\u914d\u7f6e"),a=e,c=i,r=s);var h={title:a,pic:c,query:null!==n&&""!==n?"position_id="+t+"&share_id="+r+"&"+n:"position_id="+t+"&share_id="+r,share_id:r};return console.log(" function _getShareConfig return ",h),h},n.fakeShareCallBack=function(t,e,i,n){var o=(new Date).getTime(),a=""+o+t;s.onShow(a,function(t){s.offShow(a);var c=((new Date).getTime()-o)/1e3,r=void 0===s.fake_share_gap?2:parseInt(s.fake_share_gap)||0;if(console.log("\u5206\u4eab\u56de\u8c03\uff1a\u540e\u53f0\u8fd4\u56de\u65f6\u95f4\uff1a"+c+"\uff0c\u4e0b\u53d1/\u53d6\u503c\uff1a"+s.fake_share_gap+"/"+r),c>r){var l=void 0===s.fake_share_fail_ratio?50:parseInt(s.fake_share_fail_ratio)||0,h=100*Math.random();console.log("\u5206\u4eab\u56de\u8c03\uff1a\u968f\u673a\u503c\uff1a"+h+"\uff0c\u4e0b\u53d1/\u53d6\u503c\uff1a"+s.fake_share_fail_ratio+"/"+l),h<l?("string"==typeof s.share_group_toast&&""!==s.share_group_toast&&ToastMng.showToast(s.share_group_toast),i&&i(),n&&n()):(e&&e(),n&&n())}else"string"==typeof s.share_time_toast&&""!==s.share_time_toast&&ToastMng.showToast(s.share_time_toast),i&&i(),n&&n()})},n.share2=function(t,e,i,n){var s=this._getShareConfig(t,e,i,n),a=s.title,c=s.pic,r=(s.share_id,s.query);GameDataHandler.Instant.shareTimes++,GameDataHandler.Instant.saveData(),o.share(a,c,r)},n.share=function(t,e,i,n,s,a,c){var r=this._getShareConfig(t,e,i,n),l=r.title,h=r.pic,u=(r.share_id,r.query);IsWx?(GameDataHandler.Instant.shareTimes++,GameDataHandler.Instant.saveData(),o.share(l,h,u),this.fakeShareCallBack(t,s,a,c)):0===Math.getRandomInt(0,2,!0)?(s&&s(),c&&c()):(a&&a(),c&&c())},n.onShare=function(t,e,i){var n=this._getShareConfig(SharePos.SYSTEM,t,e,i),s=n.title,a=n.pic,c=(n.share_id,n.query);o.onShare(s,a,c)},n.propShare=function(t,e,i,n,o,s){var a,c=Constant.shareIconPath;a=Common.getRandShareStr("otherShare");var r="model="+t;this.share(t,a,c,r,function(t){n&&n(),e&&e()},i,s)},n.otherShare=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=void 0,i=Constant.shareIconPath;switch(t){case SharePos.NOT:case SharePos.START:e=Common.getRandShareStr("propShare");break;case SharePos.SCORE:default:e=Common.getRandShareStr("scoreShare")}this.share2(t,e,i,"")},n.groupShare=function(){var t=Common.getRandShareStr("scoreShare"),e=Constant.shareIconPath,i=SharePos.RANK,n="model="+i;this.share2(i,t,e,n)},cc._RF.pop()},{WxSDK:"WxSDK",sdk:"sdk"}],WxSDK:[function(t,e,i){"use strict";cc._RF.push(e,"d7662+2rQZMKJ0h+NzJdJGo","WxSDK");var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var a,c=t[Symbol.iterator]();!(n=(a=c.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=t("sdk"),s=t("LocalStorageUtils");s.Instant.initData("propShareTable",{});var a={onHide:function(){logTest("onHide"),GameDataHandler.Instant.saveAllData()},checkHide:function(){"undefined"!=typeof wx&&wx.onHide(this.onHide)},checkShow:function(){o.onShow("onShowEvent",function(t){if(GameDataHandler.Instant.musicState&&AudioMng.resumeAll(AudioOpObjType.Music),t){var e=t.query;if(e){if(e.model)switch(parseInt(e.model)){case SharePos.RANK:GameMng.popRank(RankType.GroupRank,t.shareTicket,!0)}t.query.position_id&&(console.log("\u7edf\u8ba1\u5206\u4eab\u70b9"),console.log("res.query.position_id = ",t.query.position_id),console.log("res.query.share_id = ",t.query.share_id),o.shareStat(t.query.position_id,t.query.share_id))}if(-1===Collection.state){var i=t.scene;1023!=i&&1104!=i&&1089!=i||(console.log("\u4ece\u684c\u9762\u6216\u5c0f\u7a0b\u5e8f\u8fdb\u5165"),Collection.state=1,Collection.show(),Collection.showRewardBox())}console.log("\u6536\u85cf\u6807\u8bc6\uff1a",Collection.state," scene:",t.scene)}})},closeCheck:function(){"undefined"!=typeof wx&&wx.offHide(this.onHide),o.offShow("onShowEvent")},getGianByVideo:function(){},checkPropShare:function(t){return 1!=o.invite_flag||(void 0!=t.shareTicket||(o.showToast(shareResultErr.err1,3e3),!1))},getGainByShare:function(t,e,i){this.checkShareGroupTerm(t,function(t){switch(t!==ShareGroupState.State1&&i&&i(t),t){case ShareGroupState.State1:e&&e(t);break;case ShareGroupState.State3:o.shareGroup_fail_toast&&ToastMng.showToast(o.shareGroup_fail_toast,2);break;case ShareGroupState.State5:o.sharePersonal_fail_toast&&ToastMng.showToast(o.sharePersonal_fail_toast,2);break;default:ToastMng.showToast(ShareToastStr[t],2)}})},getGainWithSign:function(t,e){var i=e&&this.getPropShareTable(e);if(i&&i.beUse)ToastMng.showToast("\u5df2\u7ecf\u9886\u53d6\u8fc7\u4e86!",2e3);else{var n=5;t===GainType.SKIN&&(n={skin:SkinDataHandler.Instant.curPropSkin,value:-1}),NotificationCenter.Instant.post(NotificationMsg.PROP_UPDATE,{type:t,value:n}),e&&this.setPropShareTable(e,!0)}},getPropShareTable:function(t){return s.Instant.getData("propShareTable")[t]},setPropShareTable:function(t,e,i){var n=s.Instant.getData("propShareTable");n[t]||(n[t]={}),i&&(n[t].time=i),n[t].beUse=e,s.Instant.setData("propShareTable",n)},checkPropShareTime:function(t){return Common.getInterval((new Date).getTime(),t)<1},checkPropCleanTime:function(t){return Common.getInterval((new Date).getTime(),t)>=2},cleanTimeOvePropSign:function(){var t=s.Instant.getData("propShareTable");for(var e in t){var i=t[e];this.checkPropCleanTime(i.time)&&delete t[e]}s.Instant.setData("propShareTable",t)},loadJsonAni:function(t,e){var i=this._getUrlWithoutAsp(e),o=i+".png",s=i+".json";return Promise.all([new Promise(function(t){cc.loader.load(o,function(e,i){t(i)})}),new Promise(function(t){cc.loader.load(s,function(e,i){t(i)})})]).then(function(e){var i=n(e,2),o=i[0],s=i[1],a=s.mc.gif.frames.map(function(t){var e=s.res[t.res];return new cc.SpriteFrame(o,cc.rect(e.x,e.y,e.w,e.h),!1,cc.v2(t.x,t.y),cc.size(e.w,e.h))}),c=void 0;c=t.getComponent(cc.Animation)?t.getComponent(cc.Animation):t.addComponent(cc.Animation),t.getComponent(cc.Sprite)||t.addComponent(cc.Sprite);var r=s.mc.gif.frameRate,l=cc.AnimationClip.createWithSpriteFrames(a,r);return l.name="ani_frame",l.wrapMode=cc.WrapMode.Loop,c.addClip(l),c.play("ani_frame"),t})},_getUrlWithoutAsp:function(t){var e=t.lastIndexOf(".");return e>=0?t.substring(0,e):t},getPlatform:function(){return"android"},exitGame:function(){o._checkWx(console.error("wx.exitMiniProgram() fail"),null,"exitMiniProgram")?wx.exitMiniProgram():close()},reloadGame:function(){o._checkWx(function(){console.error("wx.applyUpdate() fail")},null,"applyUpdate")?wx.applyUpdate():location.reload()},videoGain:function(t,e,i){if(IsWx)o.hasVideo()?o.showVideo(function(i){i?t&&t():e&&e()},function(){i&&i()}):i&&i();else{var n=Math.getRandomInt(0,3,!0);0===n?t&&t():1===n?(e&&e(),ToastMng.showToast("\u589e\u76ca\u5931\u8d25\uff0c\u8bf7\u770b\u5b8c\u89c6\u9891")):i&&i()}}};window.WxSDK=a,e.exports=a,cc._RF.pop()},{LocalStorageUtils:"LocalStorageUtils",sdk:"sdk"}],WxSub:[function(t,e,i){"use strict";cc._RF.push(e,"e629aAKQBZCZL1ET8ioarYe","WxSub"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=t("./sdk");(function(t){t[t.CloseSub=-1]="CloseSub",t[t.NotSub=0]="NotSub",t[t.World=1]="World",t[t.FriendsRank=2]="FriendsRank",t[t.GroupRank=3]="GroupRank",t[t.MyRank=4]="MyRank",t[t.Beyond=5]="Beyond",t[t.BeyondList=6]="BeyondList"})(n||(n={}));var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sprite=null,e._tex=null,e._updateCnt=0,e._sharedCanvas=null,e._curSubType=n.NotSub,e._premultiplyAlpha=!1,e}return __extends(e,t),e.prototype.onLoad=function(){this._init()},e.prototype.update=function(){this._updateCnt>0&&this._sharedCanvas&&(this._updateCnt--,this._tex.initWithElement(this._sharedCanvas),this._tex.handleLoadedTexture(),this._sprite.spriteFrame=new cc.SpriteFrame(this._tex))},e.prototype.onDestroy=function(){window.wx&&(this._removeEvent(),this.closeSub())},e.prototype._init=function(){this._sprite=this.node.getComponent(cc.Sprite),window.wx?(this._sharedCanvas=window.sharedCanVas||window.wx.getOpenDataContext().canvas,this._sprite.type=cc.Sprite.Type.SIMPLE,this._sprite.sizeMode=cc.Sprite.SizeMode.CUSTOM,this._sprite.trim=!1,this._tex=new cc.Texture2D,this._updateCnt=Number.MAX_VALUE,this._tex.initWithElement(this._sharedCanvas),this._tex.handleLoadedTexture(),this._sprite.spriteFrame=new cc.SpriteFrame(this._tex),this._addEvent()):this._updateCnt=0},e.prototype._addEvent=function(){var t=this;cc.systemEvent.on("subOp",function(e,i){if(!i)return console.log("no valueObj");if(console.log("subOp type:",e,"valueObj:",JSON.stringify(i)),t.node.name!=i.subName)return console.log("this subName "+t.node.name+" No response");if(t._getCurSubType()==e)return console.log("curRankType has be type:",e);switch(e){case n.CloseSub:console.log("CloseSub"),t.closeSub();break;case n.NotSub:console.log("NotSub"),t.hideSub();break;case n.World:console.log("World"),t.hideSub();break;case n.FriendsRank:console.log("FriendsRank"),t.showFriendsRank();break;case n.GroupRank:console.log("GroupRank"),i&&t.showGroupRank(i.value);break;case n.MyRank:console.log("MyRank"),t.showResult();break;case n.Beyond:console.log("Beyond"),i&&t.showSurpass(i.value);break;case n.BeyondList:console.log("BeyondList"),i&&t.showSurpassList(i.value)}},this)},e.prototype._removeEvent=function(){cc.systemEvent.targetOff(this)},e.prototype._updateSize=function(){this._sharedCanvas&&(this._sharedCanvas.width=this.node.width,this._sharedCanvas.height=this.node.height)},e.prototype._getResolution=function(){var t=this.node.getBoundingBoxToWorld(),e=cc.view.getVisibleSize();return[t.x,e.height-t.y-t.height,e.width,e.height]},e.prototype.showFriendsRank=function(t,e){var i=this;if(void 0===t&&(t="show"),void 0===e&&(e=!1),window.wx){this._sprite.srcBlendFactor=cc.macro.BlendFactor.ONE,this._premultiplyAlpha=!0,this._setSubType(n.FriendsRank),this._updateSize(),this._updateCnt=Number.MAX_VALUE;var s={msg:"rank",action:t,resolution:this._getResolution(),startUpdate:!0,pageMode:e,key:"score",extKey:"lvl"};console.log(s),o.subMsg(s),this.scheduleOnce(function(){i.node.active=!0},.1)}},e.prototype.showGroupRank=function(t){var e=this;if(window.wx){this._sprite.srcBlendFactor=cc.macro.BlendFactor.ONE,this._premultiplyAlpha=!0,this._setSubType(n.GroupRank),this._updateSize(),this._updateCnt=Number.MAX_VALUE;var i={msg:"group",action:"show",resolution:this._getResolution(),startUpdate:!0,pageMode:!1,key:"score",extKey:"lvl",ticket:t};console.log(i),o.subMsg(i),this.scheduleOnce(function(){e.node.active=!0},.1)}},e.prototype.showResult=function(){var t=this;if(window.wx){this._sprite.srcBlendFactor=cc.macro.BlendFactor.SRC_ALPHA,this._premultiplyAlpha=!1,this._setSubType(n.MyRank),this._updateSize(),this._updateCnt=360;var e={msg:"result",action:"show",key:"score",startUpdate:!1};console.log(e),o.subMsg(e),this.scheduleOnce(function(){t.node.active=!0},.1)}},e.prototype.showSurpass=function(t){var e=this;if(window.wx){this._setSubType(n.Beyond),this._updateSize(),this._updateCnt=360;var i={msg:"beyond",action:"show",format:"\u5373\u5c06\u8d85\u8d8a",score:t,order:-1,key:"score",startUpdate:!1,style:0};console.log(i),o.subMsg(i),this.scheduleOnce(function(){e.node.active=!0},.1)}},e.prototype.showSurpassList=function(t){var e=this;if(window.wx){this._setSubType(n.BeyondList),this._updateSize(),this._updateCnt=360;var i={msg:"surpassList",action:"show",score:t,order:-1,key:"score",startUpdate:!1};console.log(i),o.subMsg(i),this.scheduleOnce(function(){e.node.active=!0},.1)}},e.prototype.hideSub=function(){var t=this;window.wx&&(this._setSubType(n.NotSub),this._updateCnt=1,o.subMsg({msg:"hideAll",pauseUpdate:!0}),this.scheduleOnce(function(){t.node.active=!1},.1))},e.prototype.closeSub=function(){window.wx&&(this._setSubType(n.CloseSub),this._updateCnt=1,o.subMsg({msg:"closeAll",pauseUpdate:!0}),this.node.active=!1)},e.prototype._getCurSubType=function(){return this._curSubType},e.prototype._setSubType=function(t){var e=this._getCurSubType();console.log("setSub type:",t,"curType:",e),t!=n.NotSub&&t!=n.CloseSub||e===n.FriendsRank||e===n.GroupRank||e===n.MyRank||n.Beyond,this._curSubType=t},e=__decorate([a],e)}(cc.Component));i.default=c,cc._RF.pop()},{"./sdk":"sdk"}],sdk:[function(t,e,i){"use strict";cc._RF.push(e,"20580qBNqhNn53NX4Pbflkv","sdk");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){var t;return(t=console).info.apply(t,arguments)},s={init:function(t){var e=t.game_id,i=t.game_version,n=t.videoId,s=t.bannerId,a=t.onBannerPlaced,u=void 0===a?l:a,d=t.onBannerResize,f=void 0===d?h:d,p=t.configUseCdn,g=void 0!==p&&p,_=t.autoPullInterval,v=void 0===_?3:_,m=t.autoPullAllConfig,w=void 0===m||m,y=t.autoPullMainConfig,S=void 0===y||y,b=t.autoPullShare,T=void 0===b||b,B=t.autoPullInsideAds,C=void 0===B||B,x=t.autoPullWallAds,L=void 0!==x&&x,D=t.needReportTime,I=void 0!==D&&D,A=t.printLog,N=void 0===A||A,P=t.saveLog,R=void 0===P||P;this.game_id=e,this.game_version=i,this.video_ids=Array.isArray(n)?n:n?[n]:[],this.banner_ids=Array.isArray(s)?s:s?[s]:[],this.onBannerPlaced=u,this.onBannerResize=f,this.configUseCdn=g,this.autoPullInterval=v,this.autoPullMainConfig=S,this.autoPullShare=T,this.autoPullInsideAds=C,this.autoPullWallAds=L,this.needReportTime=I,o=N?function(){var t;return(t=console).info.apply(t,arguments)}:function(){},function(t){t&&r?(console.log=function(){c.log.apply(console,arguments),r.log.apply(r,arguments)},console.info=function(){c.info.apply(console,arguments),r.info.apply(r,arguments)},console.warn=function(){c.warn.apply(console,arguments),r.warn.apply(r,arguments)},console.debug=function(){c.debug.apply(console,arguments),r.debug.apply(r,arguments)}):(console.log=c.log,console.info=c.info,console.warn=c.warn,console.debug=c.debug)}(R),this.sys=window.wx&&wx.getSystemInfoSync?wx.getSystemInfoSync():{},o("\u6e38\u620f\u7248\u672c: ",this.game_version),o("SDK\u7248\u672c: ",this.version),this.banner_ids=this._shuffle(this.banner_ids),this.video_ids=this._shuffle(this.video_ids),this.video_ids.length>0&&this._loadRewardedVideoAd(),window.wx&&wx.offShow(this._runOnShowCallback),window.wx&&wx.onShow(this._runOnShowCallback),this.autoPullAllConfig=w},version:"0.0.1",game_id:"",game_version:1,pullCfg:!0,lastPullTime:0,_firstPull:!1,get autoPullAllConfig(){return this._autoPullAllConfig},set autoPullAllConfig(t){this.enablePullConfigOnShow(t)},configUseCdn:!1,banner_ids:[],banner_index:0,bannerMethod:{placedTop:function(t,e,i){return{width:i,top:0,left:.5*(t-i)}},placedBottom:l,resizeTop:function(t,e,i,n,o,s){return{top:0,left:s}},resizeBottom:h},onBannerPlaced:l,onBannerResize:h,onBannerShowSuccess:null,onBannerShowFail:null,onBannerHide:null,video_ids:[],video_index:0,conf:{share_flag:-1,invite_flag:-1,prize_flag:-1,banner_refresh_interval:-1},insideAds:{desc:"\u5185\u63a8\u5e7f\u544a",name:"get_list",url:"https://data.huanle.com/get_list.php",url_cdn:"https://data.huanle.com/promotion/list/",list:[],conf:{},onChanged:null,hasAds:function(){return(!window.wx||"function"==typeof wx.navigateToMiniProgram)&&Array.isArray(this.list)&&this.list.length>0},user_id:""},wallAds:{desc:"\u8bd5\u73a9\u5899",name:"get_wall",url:"https://data.huanle.com/get_wall.php",url_cdn:"https://data.huanle.com/promotion/wall/",list:[],conf:{},onChanged:null,hasAds:function(){return(!window.wx||"function"==typeof wx.navigateToMiniProgram)&&Array.isArray(this.list)&&this.list.length>0},user_id:""},onRewardsADClosed:null,onRewardsADLoaded:null,onRemoteLoaded:null,onFirstConfigComplete:null,_firstGetConfig:!0,sys:{},pullMainConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s.configUseCdn?s._getRemoteConfigByCdn(t,e):s._getRemoteConfig(t,e,function(){s._firstGetConfig&&(s._firstGetConfig=!1,s.onFirstConfigComplete&&s.onFirstConfigComplete(),console.log("\u7b2c\u4e00\u6b21\u4ece\u670d\u52a1\u5668\u83b7\u53d6\u914d\u7f6e\u56de\u8c03"))}),s._firstPull=!0},pullOtherConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{inside:!0,wall:!0,share:!0},e={inside:!0,wall:!0,share:!0};s.extend(e,t),(t=e).inside&&s._getAds(s.insideAds),t.wall&&s._getAds(s.wallAds),t.share&&s._getRemoteShareConfig()},enablePullConfigOnShow:function(t){this._autoPullAllConfig=t,s.offShow("sdk"),t&&s.onShow("sdk",function(t){var e=(new Date).getTime()/1e3-s.lastPullTime;s.pullCfg&&e>s.autoPullInterval?(s.lastPullTime=(new Date).getTime()/1e3,s.autoPullMainConfig&&s.pullMainConfig(),s.pullOtherConfig({inside:s.autoPullInsideAds,wall:s.autoPullWallAds,share:s.autoPullShare})):s.pullCfg=!0},0,!s._firstPull)},onShow:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this._onShowList.findIndex(function(e){return e.name==t});if(-1!==o){var s=this._onShowList[o];s.callback=e,s.order=i}else this._onShowList.push({name:t,callback:e,order:i});n&&window.wx&&e&&e(wx.getLaunchOptionsSync())},offShow:function(t){var e=this._onShowList.findIndex(function(e){return e.name==t});return e>=0&&this._onShowList.splice(e,1),e>=0},getUserInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o("SDK.getUserInfo"),this._checkWx(e,i)&&wx.getUserInfo({withCredentials:!0,lang:"zh_CN",success:t,fail:e,complete:i})},updateScore:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(o("SDK.updateScore "+JSON.stringify(t)),this._checkWx(i,n,"setUserCloudStorage")){var s=this._objectToKVArray(t);o("kv array "+JSON.stringify(s)),wx.setUserCloudStorage({KVDataList:s,success:e,fail:i,complete:n})}},enableShare:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o("SDK.enableShare"),this._checkWx(i,n,"showShareMenu")&&(this._shareEnabled||wx.showShareMenu({withShareTicket:!0,success:function(i){e._shareEnabled=!0,t&&t(i)},fail:function(t){i&&i(t),n&&n(t)}}))},onShare:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(o("SDK.onShare"),this._checkWx(a,c)){var r=[],l=[];Array.isArray(t)?t.forEach(function(t){return r.push(t)}):r.push(t),Array.isArray(e)?e.forEach(function(t){return l.push(t)}):l.push(e);var h=function(t){s.pullCfg=!1;var e="",o="";if(0!=r.length){var h=Math.round(1e11*Math.random())%r.length;e=r[h]}if(0!=l.length){var u=Math.round(1e11*Math.random())%l.length;o=l[u]}return{title:e,imageUrl:o,query:i||"",success:n,fail:a,complete:c}};this._shareEnabled?wx.onShareAppMessage(h):this.enableShare(function(){wx.onShareAppMessage(h)},a,c)}},offShare:function(){o("SDK.offShare"),this._checkWx()&&wx.offShareAppMessage()},onShareWithCallback:function(t){o("SDK.onShareWithCallback"),this._checkWx()&&(this._shareEnabled?wx.onShareAppMessage(t):this.enableShare(function(){wx.onShareAppMessage(t)}))},offShareWithCallback:function(t){o("SDK.offShareWithCallback"),this._checkWx()&&wx.offShareAppMessage(t)},share:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(o("SDK.share"),this._checkWx(a,c)){s.pullCfg=!1;var l={title:t,imageUrl:e,query:i||"",success:n,fail:a,complete:c,cancel:r};this._shareEnabled?wx.shareAppMessage(l):this.enableShare(function(){wx.shareAppMessage(l)},a,c)}},subMsg:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o("SDK.subMsg"),this._checkWx(e,null,"getOpenDataContext")&&wx.getOpenDataContext().postMessage(t)},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;o("SDK.showToast"),this._checkWx(n,s)&&wx.showToast({title:t,icon:"none",image:a||void 0,duration:e||1500,success:i,fail:n,complete:s})},showModal:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(o("SDK.showModal"),this._checkWx(n,s)){var a=!1;n&&(a=!0),wx.showModal({title:t,content:e,showCancel:a,cancelText:"\u53d6\u6d88",confirmText:"\u786e\u5b9a",success:i,fail:n,complete:s})}},openSetting:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o("SDK.openSetting"),this._checkWx(e,i)&&wx.openSetting({success:t,fail:e,complete:i})},showLoading:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;o("SDK.showLoading"),this._checkWx(n,s,"showLoading")&&wx.showLoading({title:t,mask:e,onSuccess:i,onFail:n,onComplete:s})},hideLoading:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o("SDK.hideLoading"),this._checkWx(e,i,"hideLoading")&&wx.hideLoading({onSuccess:t,onFail:e,onComplete:i})},_rewardsAdLoaded:!1,hasVideo:function(){return o("SDK.hasVideo"),this._videoAd&&this._videoAd.isReady?this._videoAd.isReady():this.video_ids.length>0&&this._videoAd&&this._rewardsAdLoaded},showVideo:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o("SDK.showVideo"),this.video_ids.length>0?this._videoAd?(this.onRewardsADClosed=e,this._videoAd.load().then(function(){o("\u5e7f\u544a\u5bf9\u8c61: ",t._videoAd),t._videoAd.show().then(function(){t._rewardsAdLoaded=!1,o("\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u6210\u529f!")}).catch(function(t){o("\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u5931\u8d25: ",t),i&&i(t)})}).catch(function(t){o("\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25: ",t),i&&i(t)})):(o("\u89c6\u9891\u5e7f\u544a\u7ec4\u4ef6\u672a\u521b\u5efa!"),i&&i({errMsg:"\u89c6\u9891\u5e7f\u544a\u7ec4\u4ef6\u672a\u521b\u5efa!"})):(o("\u672a\u542f\u7528\u89c6\u9891\u5e7f\u544a!"),i&&i({errMsg:"\u672a\u542f\u7528\u89c6\u9891\u5e7f\u544a!"}))},_bannerTimer:0,_bannerVisible:!1,_bannerHasShow:!1,showBanner:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(o("SDK.showBanner"),this._bannerVisible=!1,this._bannerHasShow=!0,this.banner_ids.length>0){var i=function(e){e>0&&(clearTimeout(t._bannerTimer),t._bannerTimer=setTimeout(function(){t._banner&&(o("\u5b9a\u65f6\u79fb\u9664\u6a2a\u5e45\u5e7f\u544a"),t._banner.destroy(),t._banner=null,t._bannerVisible=!1),o("\u5b9a\u65f6\u91cd\u65b0\u663e\u793a\u6a2a\u5e45\u5e7f\u544a"),t._bannerTimer=setTimeout(function(){t.showBanner()},60)},1e3*e))},n=function(){o("\u6a2a\u5e45\u5e7f\u544a\u663e\u793a\u6210\u529f!"),t._bannerVisible=!0,i(t.conf.banner_refresh_interval),e&&e(),s.onBannerShowSuccess&&s.onBannerShowSuccess()},a=function(e){o("\u6a2a\u5e45\u5e7f\u544a\u663e\u793a\u5931\u8d25! ",e),o("\u5c06\u5728"+t.conf.banner_refresh_interval+"\u79d2\u540e\u91cd\u8bd5(hideBanner\u4f1a\u53d6\u6d88\u91cd\u8bd5)"),i(t.conf.banner_refresh_interval),s.onBannerShowFail&&s.onBannerShowFail()},c=function(){t._createBannerAd(function(){var e=t._banner.show();e?e.then(function(){n()}).catch(function(t){a(t)}):a()},function(t){a(t)})};if(clearTimeout(this._bannerTimer),this._banner){var r=this._banner.show();r?r.then(function(){n()}).catch(function(t){c()}):c()}else c()}else o("SDK.showBanner: \u65e0\u6a2a\u5e45\u5e7f\u544aID!"),s.onBannerShowFail&&s.onBannerShowFail()},hideBanner:function(){o("SDK.hideBanner"),this._bannerVisible=!1,this._bannerHasShow=!1,this._banner&&this._banner.hide(),clearTimeout(this._bannerTimer),this._bannerTimer=0,this.onBannerHide&&this.onBannerHide()},removeBanner:function(){o("SDK.removeBanner"),this._bannerVisible=!1,this._banner&&(this._banner.destroy(),this._banner=null),this._bannerTimer&&(clearTimeout(this._bannerTimer),this._bannerTimer=0)},showImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o("SDK.showImage"),this._checkWx(i,n)&&wx.previewImage({current:t,urls:[t],success:function(t){s.pullCfg=!1,e&&e(t)},fail:i,complete:n})},showInsideAds:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o("SDK.showInsideAds, id:",t.app_id," path:",t.app_path);t.app_id,t.app_path;window.wx&&"function"==typeof wx.navigateToMiniProgram&&t.app_id?wx.navigateToMiniProgram({appId:t.app_id,path:t.app_path,extraData:"bubble",success:function(t){o("\u8df3\u8f6c\u81f3\u5c0f\u7a0b\u5e8f\u6210\u529f: ",t),e&&e(t)},fail:function(t){o("\u8df3\u8f6c\u81f3\u5c0f\u7a0b\u5e8f\u5931\u8d25: ",t),i&&i()},complete:n}):(o("\u4e0d\u652f\u6301\u8df3\u8f6c\u81f3\u5c0f\u7a0b\u5e8f"),i&&i(),n&&n())},getShareConfig:function(t){if(!this._shareConfig)return null;var e=this._shareConfig.findIndex(function(e){return e.position_id==t});if(-1==e)return null;var i=this._shareConfig[e];return i.share_pic_local?(o("\u4f7f\u7528\u8fdc\u7a0b\u5206\u4eab\u914d\u7f6e: ",t,"  config: ",i),i):null},shareStat:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.request({url:"https://data.huanle.com/report.php",data:{position_id:t,share_id:e,self:i},success:function(t){o("\u5206\u4eab\u7edf\u8ba1\u63d0\u4ea4\u6210\u529f: ",t)},fail:function(t){o("\u5206\u4eab\u7edf\u8ba1\u63d0\u4ea4\u5931\u8d25: ",t)}})},compareVersion:function(t,e){"string"!=typeof t&&(t=t.toString?t.toString():"0"),"string"!=typeof e&&(e=e.toString?e.toString():"0");for(var i=t.split("."),n=e.split("."),o=Math.max(i.length,n.length),s=0,a=0;a<o&&0==(s=(parseInt(i[a])||0)-(parseInt(n[a])||0));++a);return s},checkWxVersion:function(t){return this._checkWx()?this.compareVersion(this.sys.version,t):-1},checkWxSdkVersion:function(t){return this._checkWx()?this.compareVersion(this.sys.SDKVersion||"1.0.1",t):-1},isIos:function(){return!!this._checkWx()&&("ios"==this.sys.platform||this.sys.system.indexOf("iOS")>=0)},isAndroid:function(){return!!this._checkWx()&&("android"==this.sys.platform||this.sys.system.indexOf("Android")>=0)},isIphoneX:function(){return!!this._checkWx()&&!!this.sys.model.match("iPhone X")},isIphoneLong:function(){if(!this._checkWx())return!1;var t=this.sys.screenWidth/this.sys.screenHeight;return this.isIos()&&(t>2||t<.5)},reportTime:function(t,e,i){var n=this;window.wx&&Promise.all([this.promisify(wx.getBatteryInfo),this.promisify(wx.getNetworkType)]).then(function(s){var a=n.sys||{},c={sdk_version:a.SDKVersion,version:a.version,model:a.model,system:a.system,battery_level:s[0].level,network_type:s[1].networkType,game_id:n.game_id,tag:t,code:e,time_used:i};o("\u51c6\u5907\u4e0a\u62a5\u8bf7\u6c42\u65f6\u95f4: ",c),n.request({url:"https://data.huanle.com/report_time.php",data:{data:JSON.stringify(c)},success:function(t){o("\u4e0a\u62a5\u8bf7\u6c42\u65f6\u95f4\u6210\u529f: ",t)},fail:function(t){o("\u4e0a\u62a5\u8bf7\u6c42\u65f6\u95f4\u5931\u8d25: ",t)}})})},reportAdsClick:function(t,e){var i=this;if(window.wx){this.getUserIdOrCode("report_click",function(n){n.page=t,n.tag=e;var s=wx.getLaunchOptionsSync();n.reserve=s.query&&s.query.agent||"official",i.request({url:"https://data.huanle.com/report_click.php",data:n,success:function(n){i.saveUserId("report_click",n),o("\u4e0a\u62a5\u70b9\u51fb["+t+", "+e+"]\u6210\u529f: ",n)},fail:function(i){o("\u4e0a\u62a5\u70b9\u51fb["+t+", "+e+"]\u5931\u8d25: ",i)}})})}},promisify:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t;if("string"==typeof t){if(!window.wx||!window.wx[t])return Promise.reject({errMsg:"[SDK.promisify]\u5931\u8d25: \u65b9\u6cd5"+t+"\u5728\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u4e0d\u5b58\u5728!"});i=window.wx[t]}return i?new Promise(function(t,n){e.success=function(e){return t(e)},e.fail=function(t){return n(t)},i(e)}):Promise.reject({errMsg:"[SDK.promisify]\u5931\u8d25: \u65b9\u6cd5\u5728\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u4e0d\u5b58\u5728!"})},setStorage:function(t,e){var i=JSON.stringify({v:e});window.wx?wx.setStorage({key:t,data:i}):window.localStorage&&window.localStorage.setItem(t,i)},getStorageSync:function(t){var e="",i=null;window.wx?e=wx.getStorageSync(t):window.localStorage&&(e=window.localStorage.getItem(t));try{i=JSON.parse(e).v}catch(t){i=null}return i},getStorage:function(t,e){window.wx?e&&wx.getStorage({key:t,success:function(t){var i=null;try{i=JSON.parse(t.data).v}catch(t){i=null}e(i)},fail:function(t){e(null)}}):window.localStorage?e&&e(this.getStorageSync(t)):e&&e(null)},_getUserIdKey:function(t){return"wx_uid_"+t},getSavedUserId:function(t){return this.getStorageSync(this._getUserIdKey(t))||""},getUserCode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._checkWx(e,null,"login")&&wx.login({success:function(e){o("\u8bf7\u6c42\u767b\u5f55\u5fae\u4fe1\u6210\u529f: ",e);var i=e.code;t&&t({code:i})},fail:function(t){o("\u8bf7\u6c42\u767b\u5f55\u5fae\u4fe1\u5931\u8d25: ",t),e&&e(t)}})},getUserIdOrCode:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._checkWx(n,null,"checkSession")&&this.getStorage(this._getUserIdKey(t),function(t){t?wx.checkSession({success:function(e){o("\u767b\u5f55\u672a\u8d85\u65f6, \u4f7f\u7528\u672c\u5730user_id"),i&&i({user_id:t})},fail:function(t){o("\u767b\u5f55\u8d85\u65f6, \u91cd\u65b0\u5fae\u4fe1\u767b\u5f55: ",t),e.getUserCode(i,n)}}):(o("\u672c\u5730\u65e0user_id, \u4f7f\u7528\u5fae\u4fe1\u767b\u5f55\u83b7\u53d6code"),e.getUserCode(i,n))})},saveUserId:function(t,e){e&&e.data&&e.data.user_id&&this.setStorage(this._getUserIdKey(t),e.data.user_id)},request:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{url:url,data:data,success:success,fail:fail,complete:complete};this._checkWx(t.fail,t.complete,"request")&&(!t.data&&(t.data={}),!t.data.game_id&&(t.data.game_id=this.game_id),!t.data.version&&(t.data.version=this.game_version),!t.method&&(t.method="POST"),!t.header&&(t.header={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}),"undefined"!=typeof qq&&!t.data.login_type&&(t.data.login_type="qq"),o("\u53d1\u9001\u7f51\u7edc\u8bf7\u6c42: ",t),wx.request(t))},getAddons:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})||{};if(!this._checkWx(null,null,"getLaunchOptionsSync"))return n;var o=wx.getLaunchOptionsSync();return t&&(n.cid=o.query&&o.query.cid?o.query.cid:"self"),e&&(n.agent=o.query&&o.query.agent?o.query.agent:"official"),i&&s.sys&&s.sys.platform&&"string"==typeof s.sys.platform&&(n.os=s.sys.platform.toLowerCase(),"android"!=n.os&&"ios"!=n.os&&(n.os="android")),n},getDataFromRes:function(t){if(t&&200==t.statusCode&&t.data){var e=t.data;if("string"==typeof t.data)try{e=JSON.parse(t.data)}catch(i){e=t.data}return e}return null},isPlainObject:function(t){return"object"===(void 0===t?"undefined":n(t))&&(!t.constructor||t.constructor.prototype===Object.prototype)},extend:function(){var t,e,i,o,a,c,r=arguments[0]||{},l=1,h=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[1]||{},l=2),"object"!==(void 0===r?"undefined":n(r))&&"function"!=typeof r&&(r={}),h===l&&(r=this,--l);l<h;l++)if(null!=(t=arguments[l]))for(e in t)i=r[e],r!==(o=t[e])&&(u&&o&&(s.isPlainObject(o)||(a=Array.isArray(o)))?(a?(a=!1,c=i&&Array.isArray(i)?i:[]):c=i&&s.isPlainObject(i)?i:{},r[e]=s.extend(u,c,o)):void 0!==o&&(r[e]=o));return r},_shareEnabled:!1,_checkWx:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"undefined"==typeof wx?(t&&t(),e&&e(),!1):!i||void 0!=wx[i]||(t&&t({code:999,errMsg:"\u8bf7\u5347\u7ea7\u4f60\u7684\u5fae\u4fe1\u7248\u672c!"}),e&&e(),!1)},_objectToKVArray:function(t){if(Array.isArray(t))return t;var e=[];if(t instanceof Object)for(var i in t)e.push({key:i,value:t[i]+""});return e},_kvArrayToObject:function(t){var e={};return t.forEach(function(t){void 0!=t.key&&void 0!=t.value&&(e[t.key]=t.value)}),e},_onShowList:[],_runOnShowCallback:function(t){o("_runOnShowCallback: ",t),s._onShowList.sort(function(t,e){return e.order-t.order}),s._onShowList.slice(0).forEach(function(e){e&&e.callback&&e.callback(t)})},_getRemoteConfigByCdn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._checkWx(i,n,"request")){var s={name:"get_conf",t:(new Date).getTime()};"undefined"!=typeof qq&&(s.login_type="qq");var a=(new Date).getTime();wx.request({url:"https://data.huanle.com/conf/"+this.game_id+".json",method:"GET",data:s,header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(i){var n=(new Date).getTime();e.needReportTime&&e.reportTime("conf",0,n-a);var s=e.getDataFromRes(i);s?s.verify_version==e.game_version?o("[\u62c9\u53d6\u914d\u7f6eCDN]\u4e3a\u5ba1\u6838\u7248\u672c"):(o("[\u62c9\u53d6\u914d\u7f6eCDN]\u6210\u529f: ",i),e.conf=s.game_config||{},e._processConfigForChannel(s.channel_config),e._processAdsFromConf(),e.onRemoteLoaded&&e.onRemoteLoaded(e.conf)):o("[\u62c9\u53d6\u914d\u7f6eCDN]\u914d\u7f6e\u4e3a\u7a7a"),t&&t(i)},fail:function(t){var n=(new Date).getTime();e.needReportTime&&e.reportTime("conf",1,n-a),o("[\u62c9\u53d6\u914d\u7f6eCDN]\u5931\u8d25: ",t),i&&i(t)},complete:n})}},_processConfigForChannel:function(t){if(t&&Array.isArray(t)){var e=wx.getLaunchOptionsSync(),i=e.query&&e.query.cid?e.query.cid:"",n=t.findIndex(function(t){return t.cid==i});if(-1!=n){var s=this.queryToObject(t[n].conf);o("[\u62c9\u53d6\u914d\u7f6eCDN]\u5f53\u524d\u6e20\u9053\u914d\u7f6e: ",s),this.extend(this.conf,s)}else o("[\u62c9\u53d6\u914d\u7f6eCDN]\u6e20\u9053\u914d\u7f6e\u4e0d\u5305\u542b\u5f53\u524d\u6e20\u9053: ",i)}else o("[\u62c9\u53d6\u914d\u7f6eCDN]\u6e20\u9053\u914d\u7f6e\u4e0d\u5b58\u5728")},queryToObject:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.substring(t.indexOf("?")+1).split("&"),i={},n=0,o=e.length;n<o;n++){var s=e[n].indexOf("=");if(-1!=s){var a=e[n].substring(0,s),c=window.decodeURIComponent(e[n].substring(s+1));i[a]=c}}return i},_getRemoteConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.getAddons(!0,!1,!0),c=(new Date).getTime();this.request({url:"https://data.huanle.com/conf.php",data:a,success:function(i){var n=(new Date).getTime();e.needReportTime&&e.reportTime("conf",0,n-c);var a=e.getDataFromRes(i);a&&0==a.code&&a.conf?(e.conf=a.conf,e._processAdsFromConf(),o("\u8fdc\u7a0b\u62c9\u53d6\u914d\u7f6e\u6210\u529f: ",i),s.onRemoteLoaded&&s.onRemoteLoaded(e.conf)):o("\u8fdc\u7a0b\u62c9\u53d6\u914d\u7f6e\u6210\u529f(\u4f46code!=0\u6216conf\u4e0d\u5b58\u5728): ",i),t&&t(i)},fail:function(t){var n=(new Date).getTime();e.needReportTime&&e.reportTime("conf",1,n-c),o("\u8fdc\u7a0b\u62c9\u53d6\u914d\u7f6e\u5931\u8d25: ",t),i&&i(t)},complete:n})},_processAdsFromConf:function(){(this.conf.video_ids||this.conf.video_id)&&(s._addVideoId(this.conf.video_ids||this.conf.video_id),s.video_ids.length>0&&!s.hasVideo()&&s._loadRewardedVideoAd()),(this.conf.banner_ids||this.conf.banner_id)&&(s._addBannerId(this.conf.banner_ids||this.conf.banner_id),s.banner_ids.length>0&&!s._bannerVisible&&s._bannerHasShow&&s.showBanner())},_shareConfig:null,_getRemoteShareConfig:function(){var t=this;this.request({url:"https://data.huanle.com/share_list.php",success:function(e){var i=t.getDataFromRes(e);0==i.code&&Array.isArray(i.share)?(o("\u8fdc\u7a0b\u62c9\u53d6\u5206\u4eab\u914d\u7f6e\u6210\u529f: ",i),t._shareConfig=i.share,t._loadShareImage()):(o("\u8fdc\u7a0b\u62c9\u53d6\u5206\u4eab\u914d\u7f6e\u5931\u8d25: ",e),t._shareConfig=null)},fail:function(e){o("\u8fdc\u7a0b\u62c9\u53d6\u5206\u4eab\u914d\u7f6e\u5931\u8d25: ",e),t._shareConfig=null}})},_downloadedFiles:[],_loadShareImage:function(){var t=this,e=this._shareConfig,i=[],n=function(t,n){i.push(t+JSON.stringify(n)),i.length>=e.length&&o("\u4e0b\u8f7d\u5206\u4eab\u56fe\u7247\u5b8c\u6210: ",i)};e.forEach(function(e,i){var o=t._downloadedFiles.findIndex(function(t){return t.url==e.share_pic});if(-1!=o){var s=t._downloadedFiles[o];return e.share_pic_local=s.file,void n("\u4f7f\u7528\u5df2\u7ecf\u4e0b\u597d\u7684\u6587\u4ef6:",s.file)}setTimeout(function(){if("devtools"==t.sys.platform)return e.share_pic_local=e.share_pic,t._downloadedFiles.push({url:e.share_pic,file:e.share_pic}),void n("\u4e0b\u8f7d\u6587\u4ef6\u6210\u529f:",e);wx.downloadFile({url:e.share_pic,header:{},success:function(i){200==i.statusCode?(n("\u4e0b\u8f7d\u6587\u4ef6\u6210\u529f:",i),e.share_pic_local=i.tempFilePath,t._downloadedFiles.push({url:e.share_pic,file:i.tempFilePath})):n("\u4e0b\u8f7d\u6587\u4ef6\u51fa\u9519:",i)},fail:function(t){n("\u4e0b\u8f7d\u6587\u4ef6\u51fa\u9519:",t)}})},200*i)})},_getAds:function(t){this.configUseCdn?this._getAdsCdn(t):this._getAdsNormal(t)},_getAdsCdn:function(t){var e=this;if(this._checkWx(null,null,"request")){var i={name:t.name,t:(new Date).getTime()};"undefined"!=typeof qq&&(i.login_type="qq"),wx.request({url:t.url_cdn+this.game_id+".json",method:"GET",data:i,header:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},success:function(i){var n=e.getDataFromRes(i);if(n)if(n.verify_version==e.game_version)o("[\u62c9\u53d6"+t.desc+"CDN]\u4e3a\u5ba1\u6838\u7248\u672c");else{if(o("[\u62c9\u53d6"+t.desc+"CDN]\u6210\u529f: ",n),n.mask_channel){var s=wx.getLaunchOptionsSync(),a=s.query&&s.query.cid?s.query.cid:"self";if(n.mask_channel.split(",").indexOf(a)>-1)return o("[\u62c9\u53d6"+t.desc+"CDN]\u4e3a\u5c4f\u853d\u6e20\u9053: ",a),t.list=[],t.conf={},void(t.onChanged&&t.onChanged(t))}t.list=Array.isArray(n.list)?n.list:[],e.isIos()?t.list=t.list.filter(function(t){return 1!=t.mask_ios}):e.isAndroid()&&(t.list=t.list.filter(function(t){return 1!=t.mask_android})),1==n.random_flag&&e._shuffle(t.list),t.conf=n.game_config||{},t.onChanged&&t.onChanged(t)}else o("[\u62c9\u53d6"+t.desc+"CDN]\u4e3a\u7a7a")},fail:function(e){o("\u8fdc\u7a0b\u62c9\u53d6"+t.desc+"\u5931\u8d25: ",e)}})}},_getAdsNormal:function(t){var e=this;t.url&&this.getUserIdOrCode(t.name,function(i){var n=e.getAddons(!0,!0,!0,i);e.request({url:t.url,data:n,success:function(i){var n=e.getDataFromRes(i);n&&0==n.code?(e.saveUserId(t.name,i),o("\u8fdc\u7a0b\u62c9\u53d6"+t.desc+"\u6210\u529f: ",n),t.list=Array.isArray(n.list)?n.list:[],t.conf=n.conf||{},t.onChanged&&t.onChanged(t)):o("\u8fdc\u7a0b\u62c9\u53d6"+t.desc+"\u5931\u8d25: ",i)},fail:function(e){o("\u8fdc\u7a0b\u62c9\u53d6"+t.desc+"\u5931\u8d25: ",e)}})},function(e){o("\u8fdc\u7a0b\u62c9\u53d6"+t.desc+"\u5931\u8d25: ",e)})},_bannerResetPosition:!1,_createBannerAd:function(t,e){var i=this;if(o("SDK._createBannerAd"),this._checkWx(null,null,"createBannerAd")){if(0!=this.banner_ids.length){this._banner&&(this._banner.destroy(),this._banner=null);var n=this.banner_ids[this.banner_index];o("\u521b\u5efa\u6a2a\u5e45\u5e7f\u544a("+this.banner_index+"): "+n);var s=this.sys.screenWidth,a=this.sys.screenHeight,c="undefined"!=typeof qq?s:300;return this._bannerResetPosition=!1,this._banner=wx.createBannerAd({adUnitId:n,style:this.onBannerPlaced(s,a,c)}),this._banner.onResize&&this._banner.onResize(function(t){if(!i._bannerResetPosition&&t.height>0){var e=i.onBannerResize(s,a,t.width,t.height,i._banner.style.top,i._banner.style.left);i._banner.style.top!=e.top&&(i._banner.style.top=e.top),i._banner.style.left!=e.left&&(i._banner.style.left=e.left),i._bannerResetPosition=!0}}),this._banner.onLoad(t),this._banner.onError(e),this._banner}o("SDK._createBannerAd: \u65e0\u6a2a\u5e45\u5e7f\u544aID")}else o("\u5fae\u4fe1\u7248\u672c\u4e0d\u652f\u6301\u6a2a\u5e45\u5e7f\u544a!")},_loadRewardedVideoAd:function(){if(o("SDK._loadRewardedVideoAd"),this._checkWx(null,null,"createRewardedVideoAd")){var t=this.video_ids[this.video_index];o("\u521b\u5efa\u89c6\u9891\u5e7f\u544a("+this.video_index+"): "+t),this._videoAd=wx.createRewardedVideoAd({adUnitId:t}),o("\u89c6\u9891\u5e7f\u544a\u5df2\u521b\u5efa: ",this._videoAd),this._bindVideoEvent()}else o("\u5fae\u4fe1\u7248\u672c\u4e0d\u652f\u6301\u89c6\u9891\u5e7f\u544a!")},_bindVideoEvent:function(){var t=this;this._rewardsAdEventBind||(this._videoAd.onClose(function(e){if(o("\u770b\u5b8c\u5e7f\u544a\u56de\u8c03\u53c2\u6570: ",e),t.onRewardsADClosed){var i=!e||void 0===e.isEnded||e.isEnded;t.onRewardsADClosed(i)}}),this._videoAd.onLoad(function(){o("\u4e00\u6761\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u6210\u529f!"),t._rewardsAdLoaded=!0,t.onRewardsADLoaded&&t.onRewardsADLoaded()}),this._videoAd.onError(function(e){if(o("\u52a0\u8f7d\u4e00\u6761\u89c6\u9891\u5e7f\u544a\u65f6\u51fa\u9519\u4e86: ",e),t._rewardsAdLoaded=!1,t.video_index+=1,t.video_index<15){var i=t.video_ids[t.video_index%t.video_ids.length];o("\u91cd\u65b0\u52a0\u8f7d\u89c6\u9891\u5e7f\u544a("+t.video_index+"): "+i),t._videoAd=wx.createRewardedVideoAd({adUnitId:i})}}),this._rewardsAdEventBind=!0)},_addBannerId:function(t){this._mergeAdsId(this.banner_ids,t,"banner_index")},_addVideoId:function(t){this._mergeAdsId(this.video_ids,t,"video_index")},_mergeAdsId:function(t,e,i){o("SDK._mergeAdsId: ",e),o("\u6dfb\u52a0\u5e7f\u544aID\u524d: ids("+t+"), "+i+"("+this[i]+")");var n=t.length,s=(e+"").split(",").filter(function(t){return t});if(s.length>0){(s=s.map(function(t){return t.trim?t.trim():t})).forEach(function(e){return t.push(e)});for(var a=t.length-1;a>=0;--a)for(var c=a-1;c>=0;--c)if(!t[a]||t[a]==t[c]){t.splice(a,1);break}}var r=t.length;r>n&&(this[i]%=r),o("\u6dfb\u52a0\u5e7f\u544aID\u540e: ids("+t+"), "+i+"("+this[i]+")")},_shuffle:function(t){for(var e,i,n=t.length;0!==n;)i=Math.floor(Math.random()*n),e=t[n-=1],t[n]=t[i],t[i]=e;return t}};if(void 0!==e&&(e.exports=s),window.SDK=s,"undefined"!=typeof wx&&"function"==typeof wx.getUpdateManager){var a=wx.getUpdateManager();a.onCheckForUpdate(function(t){o("hasUpdate:"+t.hasUpdate)}),a.onUpdateReady(function(){a.applyUpdate()}),a.onUpdateFailed(function(){})}var c={log:console.log,info:console.info,warn:console.warn,debug:console.debug},r=window.wx&&"function"==typeof wx.getLogManager?wx.getLogManager():null;function l(t,e,i){return{width:i,top:e-104,left:.5*(t-i)}}function h(t,e,i,n,o,s){return{top:e-n,left:s}}cc._RF.pop()},{}],tableView:[function(t,e,i){"use strict";cc._RF.push(e,"9aba29YKexFXolpweZzJPKj","tableView");var n=cc.Enum({Horizontal:0,Vertical:1}),o=cc.Enum({None:0,Up:1,Down:2,Left:3,Rigth:4}),s=cc.Enum({LEFT_TO_RIGHT__TOP_TO_BOTTOM:0,TOP_TO_BOTTOM__LEFT_TO_RIGHT:1}),a=cc.Enum({Scroll:0,Flip:1});var c=cc.Class({extends:cc.ScrollView,editor:!1,properties:{_data:null,_minCellIndex:0,_maxCellIndex:0,_paramCount:0,_count:0,_cellCount:0,_showCellCount:0,_groupCellCount:null,_scrollDirection:o.None,_cellPool:null,_page:0,_pageTotal:0,_touchLayer:cc.Node,_loadSuccess:!1,_initSuccess:!1,_scheduleInit:!1,cell:{default:null,type:cc.Prefab,notify:function(t){}},ScrollModel:{default:0,type:n,notify:function(t){this.ScrollModel===n.Horizontal?(this.horizontal=!0,this.vertical=!1,this.verticalScrollBar=null):(this.vertical=!0,this.horizontal=!1,this.horizontalScrollBar=null)},tooltip:"\u6a2a\u5411\u7eb5\u5411\u6ed1\u52a8"},ViewType:{default:0,type:a,notify:function(t){this.ViewType===a.Flip?this.inertia=!1:this.inertia=!0},tooltip:"\u4e3aScroll\u65f6,\u4e0d\u505a\u89e3\u91ca\n\u4e3aFlipw\u65f6\uff0c\u5728Scroll\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u7ffb\u9875\u7684\u884c\u4e3a"},isFill:{default:!1,tooltip:"\u5f53\u8282\u70b9\u4e0d\u80fd\u94fa\u6ee1\u4e00\u9875\u65f6\uff0c\u9009\u62e9isFill\u4e3atrue\u4f1a\u586b\u5145\u8282\u70b9\u94fa\u6ee1\u6574\u4e2aview"},Direction:{default:0,type:s,tooltip:"\u89c4\u5b9acell\u7684\u6392\u5217\u65b9\u5411"},pageChangeEvents:{default:[],type:cc.Component.EventHandler,tooltip:"\u4ec5\u5f53ViewType\u4e3apageView\u65f6\u6709\u6548\uff0c\u521d\u59cb\u5316\u6216\u7ffb\u9875\u65f6\u89e6\u53d1\u56de\u8c03\uff0c\u5411\u56de\u8c03\u4f20\u5165\u4e24\u4e2a\u53c2\u6570\uff0c\u53c2\u6570\u4e00\u4e3a\u5f53\u524d\u5904\u4e8e\u54ea\u4e00\u9875\uff0c\u53c2\u6570\u4e8c\u4e3a\u4e00\u5171\u591a\u5c11\u9875"}},statics:{_cellPoolCache:{}},onLoad:function(){window.s=this;var t=this;c._tableView.push(this);var e=this.node.destroy;this.node.destroy=function(){t.clear(),e.call(t.node)};var i=this.node._onPreDestroy;this.node._onPreDestroy=function(){t.clear(),i.call(t.node)}},onDestroy:function(){for(var t in this._cellPool&&this._cellPool.clear(),c._tableView)if(c._tableView[t]===this)return void c._tableView.splice(t)},_addListenerToTouchLayer:function(){this._touchLayer=new cc.Node;var t=this._touchLayer.addComponent(cc.Widget);t.isAlignTop=!0,t.isAlignBottom=!0,t.isAlignLeft=!0,t.isAlignRight=!0,t.top=0,t.bottom=0,t.left=0,t.right=0,t.alignMode=cc.Widget.AlignMode,this._touchLayer.parent=this._view},_setStopPropagation:function(){this.node.on("touchstart",function(t){t.stopPropagation()}),this.node.on("touchmove",function(t){t.stopPropagation()}),this.node.on("touchend",function(t){t.stopPropagation()}),this.node.on("touchcancel",function(t){t.stopPropagation()})},_initCell:function(t,e){if(this.ScrollModel===n.Horizontal&&this.Direction===s.TOP_TO_BOTTOM__LEFT_TO_RIGHT||this.ScrollModel===n.Vertical&&this.Direction===s.LEFT_TO_RIGHT__TOP_TO_BOTTOM)for(var i=parseInt(t.name)*t.childrenCount,o=0;o<t.childrenCount;++o){var c=t.children[o].getComponent("viewCell");c&&(c._cellInit_(this),c.init(i+o,this._data,e,[i,o]))}else if(this.ViewType===a.Flip)for(var r=Math.floor(parseInt(t.name)/this._showCellCount),l=r*this._showCellCount*t.childrenCount,h=0;h<t.childrenCount;++h){var u=t.children[h].getComponent("viewCell");u&&(u._cellInit_(this),u.init(this._showCellCount*h+r%this._showCellCount+l,this._data,e,[h+r*t.childrenCount,h]))}else for(var d=0;d<t.childrenCount;++d){var f=t.children[d].getComponent("viewCell");f&&(f._cellInit_(this),f.init(d*this._count+parseInt(t.name),this._data,e,[d,d]))}},_setCellPosition:function(t,e){this.ScrollModel===n.Horizontal?(t.x=0===e?-this.content.width*this.content.anchorX+t.width*t.anchorX:this.content.getChildByName(String(e-1)).x+t.width,t.y=(t.anchorY-this.content.anchorY)*t.height):(t.y=0===e?this.content.height*(1-this.content.anchorY)-t.height*(1-t.anchorY):this.content.getChildByName(String(e-1)).y-t.height,t.x=(t.anchorX-this.content.anchorX)*t.width)},_addCell:function(t){var e=this._getCell();this._setCellAttr(e,t),this._setCellPosition(e,t),e.parent=this.content,this._initCell(e)},_setCellAttr:function(t,e){t.setSiblingIndex(e>=parseInt(t.name)?this._cellCount:0),t.name=e.toString()},_addCellsToView:function(){for(var t=0;t<=this._maxCellIndex;++t)this._addCell(t)},_getCell:function(){if(0===this._cellPool.size()){var t=cc.instantiate(this.cell),e=new cc.Node;e.anchorX=.5,e.anchorY=.5;var i=0;if(this.ScrollModel===n.Horizontal){e.width=t.width;var o=Math.floor(this.content.height/t.height);e.height=this.content.height;for(var s=0;s<o;++s)t||(t=cc.instantiate(this.cell)),t.x=(t.anchorX-.5)*t.width,t.y=e.height/2-t.height*(1-t.anchorY)-i,i+=t.height,t.parent=e,t=null}else{e.height=t.height;var a=Math.floor(this.content.width/t.width);e.width=this.content.width;for(var c=0;c<a;++c)t||(t=cc.instantiate(this.cell)),t.y=(t.anchorY-.5)*t.height,t.x=-e.width/2+t.width*t.anchorX+i,i+=t.width,t.parent=e,t=null}this._cellPool.put(e)}return this._cellPool.get()},_getCellSize:function(){var t=this._getCell(),e=t.getContentSize();return this._cellPool.put(t),e},_getGroupCellCount:function(){var t=this._getCell(),e=t.childrenCount;return this._cellPool.put(t),e},clear:function(){if(this.content){for(var t=this.content.childrenCount-1;t>=0;--t)this._cellPool.put(this.content.children[t]);this._cellCount=0,this._showCellCount=0}},reload:function(t){void 0!==t&&(this._data=t);for(var e=this.content.childrenCount-1;e>=0;--e)this._initCell(this.content.children[e],!0)},_getCellPoolCacheName:function(){return this.ScrollModel===n.Horizontal?this.cell.name+"h"+this.content.height:this.cell.name+"w"+this.content.width},_initTableView:function(){this._scheduleInit=!1,this._cellPool&&this.clear();var t=this._getCellPoolCacheName();c._cellPoolCache[t]||(c._cellPoolCache[t]=new cc.NodePool("viewCell")),this._cellPool=c._cellPoolCache[t],this._cellSize=this._getCellSize(),this._groupCellCount=this._getGroupCellCount(),this._count=Math.ceil(this._paramCount/this._groupCellCount),this.ScrollModel===n.Horizontal?(this._view.width=this.node.width,this._view.x=(this._view.anchorX-this.node.anchorX)*this._view.width,this._cellCount=Math.ceil(this._view.width/this._cellSize.width)+1,this.ViewType===a.Flip?this._cellCount>this._count?(this.isFill?this._cellCount=Math.floor(this._view.width/this._cellSize.width):this._cellCount=this._count,this._showCellCount=this._cellCount,this._pageTotal=1):(this._pageTotal=Math.ceil(this._count/(this._cellCount-1)),this._count=this._pageTotal*(this._cellCount-1),this._showCellCount=this._cellCount-1):this._cellCount>this._count?(this.isFill?this._cellCount=Math.floor(this._view.width/this._cellSize.width):this._cellCount=this._count,this._showCellCount=this._cellCount):this._showCellCount=this._cellCount-1,this.content.width=this._count*this._cellSize.width,this.stopAutoScroll(),this.scrollToLeft()):(this._view.height=this.node.height,this._view.y=(this._view.anchorY-this.node.anchorY)*this._view.height,this._cellCount=Math.ceil(this._view.height/this._cellSize.height)+1,this.ViewType===a.Flip?this._cellCount>this._count?(this.isFill?this._cellCount=Math.floor(this._view.height/this._cellSize.height):this._cellCount=this._count,this._showCellCount=this._cellCount,this._pageTotal=1):(this._pageTotal=Math.ceil(this._count/(this._cellCount-1)),this._count=this._pageTotal*(this._cellCount-1),this._showCellCount=this._cellCount-1):this._cellCount>this._count?(this.isFill?this._cellCount=Math.floor(this._view.height/this._cellSize.height):this._cellCount=this._count,this._showCellCount=this._cellCount):this._showCellCount=this._cellCount-1,this.content.height=this._count*this._cellSize.height,this.stopAutoScroll(),this.scrollToTop()),this._changePageNum(1-this._page),this._lastOffset=this.getScrollOffset(),this._minCellIndex=0,this._maxCellIndex=this._cellCount-1,this._addCellsToView(),this._initSuccess=!0},initTableView:function(t,e){this._paramCount=t,this._data=e,this._loadSuccess?this._scheduleInit||this._initTableView():(this.ScrollModel===n.Horizontal?(this.horizontal=!0,this.vertical=!1):(this.vertical=!0,this.horizontal=!1),this.verticalScrollBar&&this.verticalScrollBar.node.on("size-changed",function(){this._updateScrollBar(this._getHowMuchOutOfBoundary())},this),this.horizontalScrollBar&&this.horizontalScrollBar.node.on("size-changed",function(){this._updateScrollBar(this._getHowMuchOutOfBoundary())},this),this._addListenerToTouchLayer(),this._setStopPropagation(),this.node.getComponent(cc.Widget)||this._view.getComponent(cc.Widget)||this.content.getComponent(cc.Widget)?(this.scheduleOnce(this._initTableView),this._scheduleInit=!0):this._initTableView(),this._loadSuccess=!0)},stopAutoScroll:function(){this._scheduleInit?this.scheduleOnce(function(){this.stopAutoScroll()}):(this._scrollDirection=o.None,cc.ScrollView.prototype.stopAutoScroll.call(this))},scrollToBottom:function(t,e){this._scheduleInit?this.scheduleOnce(function(){this.scrollToBottom(t,e)}):(this._scrollDirection=o.Up,cc.ScrollView.prototype.scrollToBottom.call(this,t,e))},scrollToTop:function(t,e){this._scheduleInit?this.scheduleOnce(function(){this.scrollToTop(t,e)}):(this._scrollDirection=o.Down,cc.ScrollView.prototype.scrollToTop.call(this,t,e))},scrollToLeft:function(t,e){this._scheduleInit?this.scheduleOnce(function(){this.scrollToLeft(t,e)}):(this._scrollDirection=o.Rigth,cc.ScrollView.prototype.scrollToLeft.call(this,t,e))},scrollToRight:function(t,e){this._scheduleInit?this.scheduleOnce(function(){this.scrollToRight(t,e)}):(this._scrollDirection=o.Left,cc.ScrollView.prototype.scrollToRight.call(this,t,e))},scrollToOffset:function(t,e,i){if(this._scheduleInit)this.scheduleOnce(function(){this.scrollToOffset(t,e,i)});else{var s=this.getScrollOffset(),a=t.sub(s);this.ScrollModel===n.Horizontal?a.x>0?this._scrollDirection=o.Left:a.x<0&&(this._scrollDirection=o.Rigth):a.y>0?this._scrollDirection=o.Up:a.y<0&&(this._scrollDirection=o.Down),cc.ScrollView.prototype.scrollToOffset.call(this,t,e,i)}},addScrollEvent:function(t,e,i){var n=new cc.Component.EventHandler;n.target=t,n.component=e,n.handler=i,this.scrollEvents.push(n)},removeScrollEvent:function(t){for(var e in this.scrollEvents){if(this.scrollEvents[e].target===t)return void this.scrollEvents.splice(e,1)}},clearScrollEvent:function(){this.scrollEvents=[]},addPageEvent:function(t,e,i){var n=new cc.Component.EventHandler;n.target=t,n.component=e,n.handler=i,this.pageChangeEvents.push(n)},removePageEvent:function(t){for(var e in this.pageChangeEvents){if(this.pageChangeEvents[e].target===t)return void this.pageChangeEvents.splice(e,1)}},clearPageEvent:function(){this.pageChangeEvents=[]},scrollToNextPage:function(){this.scrollToPage(this._page+1)},scrollToLastPage:function(){this.scrollToPage(this._page-1)},scrollToPage:function(t){if(this.ViewType===a.Flip&&t!==this._page&&!(t<1||t>this._pageTotal)){var e=.3*Math.abs(t-this._page);if(this._changePageNum(t-this._page),this._initSuccess){var i=this._view.width,n=this._view.height;i=(this._page-1)*i,n=(this._page-1)*n,this.scrollToOffset({x:i,y:n},e)}else this.scheduleOnce(function(){var t=this._view.width,i=this._view.height;t=(this._page-1)*t,i=(this._page-1)*i,this.scrollToOffset({x:t,y:i},e)})}},getCells:function(t){var e=this,i=function(){var i=[],n=function t(e,i){if(e.length<=1)return e;for(var n=Math.floor(e.length/2),o=e[n],s=[],a=[],c=0;c<e.length;c++)c!==n&&(i?i(e[c],o)?s.push(e[c]):a.push(e[c]):e[c]<=o?s.push(e[c]):a.push(e[c]));return t(s,i).concat([o],t(a,i))}(e.content.children,function(t,e){return parseInt(t.name)<parseInt(e.name)});for(var o in n){var s=n[o];for(var a in s.children)i.push(s.children[a])}t(i)};this._initSuccess?i():this.scheduleOnce(i)},getData:function(){return this._data},getGroupsRange:function(t){var e=this,i=function(){for(var i=[],n=e._minCellIndex;n<=e._maxCellIndex;n++)i.push(n);t(i)};this._initSuccess?i():this.scheduleOnce(i)},_changePageNum:function(t){this._page+=t,this._page<=0?this._page=1:this._page>this._pageTotal&&(this._page=this._pageTotal);var e=!0,i=!1,n=void 0;try{for(var o,s=this.pageChangeEvents[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){o.value.emit([this._page,this._pageTotal])}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}},_touchstart:function(t){this.ScrollModel===n.Horizontal?this.horizontal=!1:this.vertical=!1},_touchmove:function(t){if(this.horizontal===this.vertical){var e=t.getStartLocation(),i=t.getLocation();if(this.ScrollModel===n.Horizontal){if(Math.abs(i.x-e.x)<=7)return}else if(Math.abs(i.y-e.y)<=7)return;this.ScrollModel===n.Horizontal?this.horizontal=!0:this.vertical=!0}},_touchend:function(t){this.ScrollModel===n.Horizontal?this.horizontal=!0:this.vertical=!0,this.ViewType===a.Flip&&this._pageTotal>1&&this._pageMove(t)},_pageMove:function(t){var e=this._view.width,i=this._view.height;if(this.ViewType===a.Flip){var s=this.getScrollOffset(),c=this.getMaxScrollOffset();if(this.ScrollModel===n.Horizontal){if(s.x>=0||s.x<=-c.x)return;if(i=0,Math.abs(t.getLocation().x-t.getStartLocation().x)>this._view.width/4)if(this._scrollDirection===o.Left){if(!(this._page<this._pageTotal))return;this._changePageNum(1)}else if(this._scrollDirection===o.Rigth){if(!(this._page>1))return;this._changePageNum(-1)}}else{if(s.y>=c.y||s.y<=0)return;if(e=0,Math.abs(t.getLocation().y-t.getStartLocation().y)>this._view.height/4)if(this._scrollDirection===o.Up){if(!(this._page<this._pageTotal))return;this._changePageNum(1)}else if(this._scrollDirection===o.Down){if(!(this._page>1))return;this._changePageNum(-1)}}e=(this._page-1)*e,i=(this._page-1)*i,this.scrollToOffset({x:e,y:i},.3)}},_getBoundingBoxToWorld:function(t){var e=t.convertToWorldSpace(cc.v2(0,0));return cc.rect(e.x,e.y,t.width,t.height)},_updateCells:function(){if(this.ScrollModel===n.Horizontal){if(this._scrollDirection===o.Left){if(this._maxCellIndex<this._count-1){var t=this._getBoundingBoxToWorld(this._view);do{var e=this.content.getChildByName(String(this._minCellIndex)),i=this._getBoundingBoxToWorld(e);if(!(i.xMax<=t.xMin))break;e.x=this.content.getChildByName(String(this._maxCellIndex)).x+e.width,this._minCellIndex++,this._maxCellIndex++,this._setCellAttr(e,this._maxCellIndex),i.xMax+(this._maxCellIndex-this._minCellIndex+1)*e.width>t.xMin&&this._initCell(e)}while(this._maxCellIndex!==this._count-1)}}else if(this._scrollDirection===o.Rigth&&this._minCellIndex>0){var s=this._getBoundingBoxToWorld(this._view);do{var a=this.content.getChildByName(String(this._maxCellIndex)),c=this._getBoundingBoxToWorld(a);if(!(c.xMin>=s.xMax))break;a.x=this.content.getChildByName(String(this._minCellIndex)).x-a.width,this._minCellIndex--,this._maxCellIndex--,this._setCellAttr(a,this._minCellIndex),c.xMin-(this._maxCellIndex-this._minCellIndex+1)*a.width<s.xMax&&this._initCell(a)}while(0!==this._minCellIndex)}}else if(this._scrollDirection===o.Up){if(this._maxCellIndex<this._count-1){var r=this._getBoundingBoxToWorld(this._view);do{var l=this.content.getChildByName(String(this._minCellIndex)),h=this._getBoundingBoxToWorld(l);if(!(h.yMin>=r.yMax))break;l.y=this.content.getChildByName(String(this._maxCellIndex)).y-l.height,this._minCellIndex++,this._maxCellIndex++,this._setCellAttr(l,this._maxCellIndex),h.yMin-(this._maxCellIndex-this._minCellIndex+1)*l.height<r.yMax&&this._initCell(l)}while(this._maxCellIndex!==this._count-1)}}else if(this._scrollDirection===o.Down&&this._minCellIndex>0){var u=this._getBoundingBoxToWorld(this._view);do{var d=this.content.getChildByName(String(this._maxCellIndex)),f=this._getBoundingBoxToWorld(d);if(!(f.yMax<=u.yMin))break;d.y=this.content.getChildByName(String(this._minCellIndex)).y+d.height,this._minCellIndex--,this._maxCellIndex--,this._setCellAttr(d,this._minCellIndex),f.yMax+(this._maxCellIndex-this._minCellIndex+1)*d.width>u.yMin&&this._initCell(d)}while(0!==this._minCellIndex)}},_getScrollDirection:function(){var t=this.getScrollOffset(),e=this._lastOffset;this._lastOffset=t,t=t.sub(e),this.ScrollModel===n.Horizontal?t.x>0?this._scrollDirection=o.Rigth:t.x<0?this._scrollDirection=o.Left:this._scrollDirection=o.None:t.y<0?this._scrollDirection=o.Down:t.y>0?this._scrollDirection=o.Up:this._scrollDirection=o.None},update:function(t){cc.ScrollView.prototype.update.call(this,t),this._initSuccess&&this._cellCount!==this._showCellCount&&1!==this._pageTotal&&(this._getScrollDirection(),this._updateCells())}});c._tableView=[],c.reload=function(){for(var t in c._tableView)c._tableView[t].reload()},c.clear=function(){for(var t in c._tableView)c._tableView[t].clear()},cc.tableView=e.export=c,cc._RF.pop()},{}],viewCell:[function(t,e,i){"use strict";cc._RF.push(e,"d1dfablitpJ5rXHxnkR6CpH","viewCell"),cc.Class({extends:cc.Component,properties:{tableView:{default:null,visible:!1},_isCellInit_:!1,_longClicked_:!1},_cellAddMethodToNode_:function(){this.node.clicked=this.clicked.bind(this)},_cellAddTouch_:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t){!0===this.node.active&&0!==this.node.opacity&&(this._longClicked_||(this._longClicked_=!0,this.scheduleOnce(this._longClicked,1.5)))},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(){this._longClicked_&&(this._longClicked_=!1,this.unschedule(this._longClicked))},this),this.node.on(cc.Node.EventType.TOUCH_END,function(){this.clicked(),this._longClicked_&&(this._longClicked_=!1,this.unschedule(this._longClicked))},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){this._longClicked_&&(this._longClicked_=!1,this.unschedule(this._longClicked))},this)},_cellInit_:function(t){this.tableView=t,this._isCellInit_||(this._cellAddMethodToNode_(),this._cellAddTouch_(),this._isCellInit_=!0)},_longClicked:function(){this._longClicked_=!1,this.node.emit(cc.Node.EventType.TOUCH_CANCEL),this.longClicked()},longClicked:function(){},clicked:function(){},init:function(t,e,i,n){}}),cc._RF.pop()},{}],wx_sub:[function(t,e,i){"use strict";cc._RF.push(e,"c7bf87JnnxCLItRfr0T0v16","wx_sub");var n=t("sdk");cc.Class({extends:cc.Component,properties:{showSub:cc.Sprite},onLoad:function(){this.curShowType=RankType.NotSub,this._interval=0,this._delay=4,this.tex=new cc.Texture2D},start:function(){},onEnable:function(){this.node.zIndex=8888},update:function(t){this._interval++,this._interval>=this._delay&&(this._interval=0,"undefined"!=typeof sharedCanvas&&(this.tex.initWithElement(sharedCanvas),this.tex.handleLoadedTexture(),this.showSub.spriteFrame=new cc.SpriteFrame(this.tex)))},showBeyond:function(){var t=this;this.node.active=!0,this.setSub(RankType.Beyond),setTimeout(function(){n.subMsg({message:"showBeyond",score:GameDataHandler.Instant.curScore,update:!0,pos:[0,0]}),t.showSub.node.active=!0},1e3)},hideBeyond:function(){n.subMsg({message:"hideBeyond"}),this.showSub.node.active=!1,this.node.active=!1},showMyRank:function(){var t=this;this.node.active=!0,this.setSub(RankType.MyRank),n.subMsg({message:"showMyRank",pos:[0,60]}),setTimeout(function(){t.showSub.node.active=!0},200)},hideMyRank:function(){n.subMsg({message:"hideMyRank"}),this.showSub.node.active=!1,this.node.active=!1},showFriendsRank:function(){var t=this;this.hideGroupRank(),this.hideMyRank(),this.node.active=!0,this.setSub(RankType.FriendsRank),n.subMsg({message:"showFriendsRank",key:"bestScore"}),n.showLoading("\u52a0\u8f7d\u4e2d\uff01"),setTimeout(function(){t.showSub.node.active=!0,n.hideLoading()},400),this.delShowLyOnShowGpOrFrd()},hideFriendsRank:function(){n.subMsg({message:"hideFriendsRank"}),this.showSub.node.active=!1,this.node.active=!1},showGroupRank:function(t){var e=this;this.hideFriendsRank(),this.hideMyRank(),this.node.active=!0,this.setSub(RankType.GroupRank),n.showLoading("\u52a0\u8f7d\u4e2d\uff01"),n.subMsg({message:"group",ticket:t,key:"bestScore"}),setTimeout(function(){e.showSub.node.active=!0,n.hideLoading()},1e3)},hideGroupRank:function(){this.node.active=!1,this.showSub.node.active=!1,n.subMsg({message:"hideGroup"})},delShowLyOnShowGpOrFrd:function(){},delShowLyOnHideGp:function(){GameMng.startLy.node.active?this.node.active=!1:GameMng.result.node.active&&this.showMyRank()},delShowLyOnHideFrd:function(){GameMng.startLy.node.active?this.node.active=!1:GameMng.result.node.active&&this.showMyRank()},delGroupOrFriends:function(){switch(this.curShowType){case RankType.FriendsRank:this.hideFriendsRank(),this.delShowLyOnHideFrd();break;case RankType.GroupRank:this.hideGroupRank(),this.delShowLyOnHideGp()}},show:function(){this.node.active=!0},hide:function(){this.node.active=!1},setSub:function(t){this.curShowType=t;var e=cc.view.getVisibleSize();this.showSub.node.position=cc.v2(0,0),this.curShowType===RankType.FriendsRank||this.curShowType===RankType.GroupRank?(e=cc.size(624,750),this.showSub.node.setContentSize(e),this.showSub.node.position=cc.v2(0,100)):this.curShowType===RankType.MyRank?(e=cc.size(550,600),this.showSub.node.setContentSize(e),this.showSub.node.position=cc.v2(0,81)):this.curShowType===RankType.Beyond&&(e=cc.size(190,80),this.showSub.node.setContentSize(e),this.showSub.node.position=cc.v2(.5*(cc.view.getVisibleSize().width-e.width),464)),"undefined"!=typeof sharedCanvas&&(sharedCanvas.width=e.width,sharedCanvas.height=e.height)}}),cc._RF.pop()},{sdk:"sdk"}]},{},["GameClubBtn","WxBtn","Rank","RankCell","RankLayer","DataHandler","DragonBonesBase","DynamicLabel","MngBase","NodeBase","My","MyNodePool","PoolMng","PoolNodeBase","PopLayerBase","Singleton","ButtonCustom","CommonNode","FakeGravity","OnBannerResize","SwitchNode","UserInfoBtn","Collection","ShortcutBtn","ArrayCovert","CCConvert","MathConvert","NumberConvert","StringConvert","Common","Constant","Define","InnerAdList","InsideAds","Server+Auth","Server+Report","Server","WxSDK+Controller","WxSDK+Report","WxSDK+Server","WxSDK+Share","WxSDK","WxSub","sdk","wx_sub","SignDataMng","SignView","tableView","viewCell","TestBtn","TestLy","ToastBase","ToastMng","GameDataHandler","MissionDataHandler","SkinDataHandler","CollisionUtils","FileUtils+Loader","FileUtils","LocalStorageUtils","NotificationCenter","AudioMng","PrefabMng","BubbleBase","EffectSprBase","Line","LineDotBase","PetBase","ScoreAddBase","Bg","Fail","Gift","Guide","Pause","Play","PropBox","PropBox2","Result","Setting","Shop","Skin","Start","GameMng","LoadingMng"]);